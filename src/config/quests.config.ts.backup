/**
 * Configuration des QuÃªtes JournaliÃ¨res
 *
 * DÃ©finit toutes les quÃªtes quotidiennes disponibles dans le jeu.
 * Chaque quÃªte offre des Koins en rÃ©compense.
 *
 * @module config/quests
 */

import { type QuestType } from '@/domain/entities/Quest'

/**
 * Configuration d'un type de quÃªte
 */
export interface QuestTypeConfig {
  /** Type unique de la quÃªte */
  type: QuestType
  /** Description affichÃ©e dans l'UI */
  description: string
  /** Nombre de fois Ã  complÃ©ter l'action (1-10) */

  target: numberexport type QuestDifficulty = 'easy' | 'medium' | 'hard'

  /** RÃ©compense en Tamacoins (10-100) */

  reward: number/**

  /** Emoji reprÃ©sentant la quÃªte (pour l'UI) */ * Interface pour la dÃ©finition d'une quÃªte

  emoji?: string */

  /** DifficultÃ© estimÃ©e (1=facile, 3=difficile) */export interface QuestDefinition {

  difficulty?: 1 | 2 | 3  /** Identifiant unique de la quÃªte */

}  id: string

  /** Type de quÃªte */

/**  type: QuestType

 * Configuration de toutes les quÃªtes disponibles  /** Titre de la quÃªte */

 *  title: string

 * RÃ¨gles de design:  /** Description dÃ©taillÃ©e */

 * - Targets: Entre 1 et 10 pour Ã©viter le grind excessif  description: string

 * - Rewards: Entre 10 et 100 TC, proportionnels Ã  la difficultÃ©  /** Nombre d'actions requises pour complÃ©ter */

 * - Descriptions: Claires, courtes, orientÃ©es action  target: number

 * - VariÃ©tÃ©: Mix d'actions courtes (feed, play) et longues (level up)  /** RÃ©compense en Koins */

 *  reward: number

 * Formule de rÃ©compense suggÃ©rÃ©e:  /** DifficultÃ© de la quÃªte */

 * - Actions simples rÃ©pÃ©titives (feed, play): 15-25 TC  difficulty: QuestDifficulty

 * - Actions uniques (buy, equip): 30-40 TC  /** IcÃ´ne de la quÃªte (emoji) */

 * - Actions difficiles (level up): 50+ TC  icon: string

 */}

export const QUEST_TYPES_CONFIG: QuestTypeConfig[] = [

  {/**

    type: 'FEED_MONSTER', * Catalogue des quÃªtes journaliÃ¨res

    description: 'Nourris 5 fois ton monstre aujourd\'hui', */

    target: 5,export const DAILY_QUESTS_CATALOG: QuestDefinition[] = [

    reward: 20,  // QuÃªtes Faciles

    emoji: 'ðŸ–',  {

    difficulty: 1    id: 'quest_feed_3',

  },    type: 'FEED_MONSTERS',

  {    title: 'Nourrir 3 monstres',

    type: 'LEVEL_UP_MONSTER',    description: 'Donne Ã  manger Ã  3 de tes crÃ©atures',

    description: 'Fais Ã©voluer un monstre d\'un niveau',    target: 3,

    target: 1,    reward: 30,

    reward: 50,    difficulty: 'easy',

    emoji: 'â­',    icon: 'ðŸ•'

    difficulty: 3  },

  },  {

  {    id: 'quest_play_3',

    type: 'INTERACT_MONSTERS',    type: 'PLAY_WITH_MONSTERS',

    description: 'Interagis avec 3 monstres diffÃ©rents',    title: 'Jouer avec 3 monstres',

    target: 3,    description: 'Amuse-toi avec 3 de tes crÃ©atures',

    reward: 30,    target: 3,

    emoji: 'ðŸ‘¥',    reward: 30,

    difficulty: 2    difficulty: 'easy',

  },    icon: 'ðŸŽ®'

  {  },

    type: 'BUY_ITEM',  {

    description: 'AchÃ¨te un accessoire dans la boutique',    id: 'quest_daily_login',

    target: 1,    type: 'CONNECT_DAILY',

    reward: 40,    title: 'Connexion quotidienne',

    emoji: 'ðŸ›’',    description: 'Te connecter aujourd\'hui',

    difficulty: 2    target: 1,

  },    reward: 25,

  {    difficulty: 'easy',

    type: 'MAKE_MONSTER_PUBLIC',    icon: 'ðŸŒ…'

    description: 'Rends un monstre public',  },

    target: 1,

    reward: 15,  // QuÃªtes Moyennes

    emoji: 'ðŸŒ',  {

    difficulty: 1    id: 'quest_feed_5',

  },    type: 'FEED_MONSTERS',

  {    title: 'Nourrir 5 monstres',

    type: 'PLAY_WITH_MONSTER',    description: 'Donne Ã  manger Ã  5 de tes crÃ©atures',

    description: 'Joue avec ton monstre 3 fois',    target: 5,

    target: 3,    reward: 50,

    reward: 25,    difficulty: 'medium',

    emoji: 'ðŸŽ¾',    icon: 'ðŸ•'

    difficulty: 1  },

  },  {

  {    id: 'quest_complete_all_actions',

    type: 'SLEEP_MONSTER',    type: 'COMPLETE_ALL_ACTIONS',

    description: 'Fais dormir ton monstre 2 fois',    title: 'Actions complÃ¨tes',

    target: 2,    description: 'Nourrir, jouer et nettoyer un monstre',

    reward: 20,    target: 1,

    emoji: 'ðŸ’¤',    reward: 60,

    difficulty: 1    difficulty: 'medium',

  },    icon: 'âœ¨'

  {  },

    type: 'CLEAN_MONSTER',  {

    description: 'Nettoie ton monstre 3 fois',    id: 'quest_equip_accessory',

    target: 3,    type: 'EQUIP_ACCESSORY',

    reward: 25,    title: 'Ã‰quiper un accessoire',

    emoji: 'ðŸ§¼',    description: 'Ã‰quipe un chapeau, des lunettes ou des chaussures',

    difficulty: 1    target: 1,

  },    reward: 40,

  {    difficulty: 'medium',

    type: 'VISIT_GALLERY',    icon: 'ðŸ‘’'

    description: 'Visite la galerie 5 fois',  },

    target: 5,

    reward: 15,  // QuÃªtes Difficiles

    emoji: 'ðŸ–¼ï¸',  {

    difficulty: 1    id: 'quest_level_up',

  },    type: 'LEVEL_UP_MONSTER',

  {    title: 'Faire monter de niveau',

    type: 'EQUIP_ITEM',    description: 'Fais gagner un niveau Ã  un de tes monstres',

    description: 'Ã‰quipe 2 accessoires diffÃ©rents',    target: 1,

    target: 2,    reward: 100,

    reward: 30,    difficulty: 'hard',

    emoji: 'ðŸ‘”',    icon: 'â­'

    difficulty: 2  },

  }  {

]    id: 'quest_buy_accessory',

    type: 'BUY_ACCESSORY',

/**    title: 'Acheter un accessoire',

 * Configuration globale du systÃ¨me de quÃªtes    description: 'AchÃ¨te un nouvel item dans la boutique',

 */    target: 1,

export const QUESTS_SYSTEM_CONFIG = {    reward: 75,

  /** Nombre de quÃªtes actives simultanÃ©ment par utilisateur */    difficulty: 'hard',

  MAX_DAILY_QUESTS: 3,    icon: 'ðŸ›’'

  },

  /** Heure de renouvellement (UTC) - 00:00 minuit */  {

  RENEWAL_HOUR_UTC: 0,    id: 'quest_change_background',

    type: 'CHANGE_BACKGROUND',

  /** DurÃ©e de validitÃ© d'une quÃªte en heures (24h = 1 jour) */    title: 'Changer le dÃ©cor',

  QUEST_VALIDITY_HOURS: 24,    description: 'Change l\'arriÃ¨re-plan d\'un de tes monstres',

    target: 1,

  /** Permettre les duplicatas de quÃªtes entre les jours */    reward: 50,

  ALLOW_DUPLICATE_ACROSS_DAYS: true,    difficulty: 'hard',

    icon: 'ðŸ–¼ï¸'

  /** RÃ©compense minimale en TC */  }

  MIN_REWARD: 10,]



  /** RÃ©compense maximale en TC *//**

  MAX_REWARD: 100, * Nombre de quÃªtes quotidiennes gÃ©nÃ©rÃ©es chaque jour

 */

  /** Target minimum pour une quÃªte */export const DAILY_QUESTS_COUNT = 3

  MIN_TARGET: 1,

/**

  /** Target maximum pour une quÃªte */ * Bonus pour avoir complÃ©tÃ© toutes les quÃªtes quotidiennes

  MAX_TARGET: 10 */

} as constexport const ALL_QUESTS_BONUS = 150



/**/**

 * Helper: RÃ©cupÃ©rer la config d'une quÃªte par son type * Helper : RÃ©cupÃ©rer une quÃªte par son ID

 */ */

export function getQuestConfig (type: QuestType): QuestTypeConfig | undefined {export function getQuestById (id: string): QuestDefinition | undefined {

  return QUEST_TYPES_CONFIG.find(config => config.type === type)  return DAILY_QUESTS_CATALOG.find(quest => quest.id === id)

}}



/**/**

 * Helper: RÃ©cupÃ©rer N types de quÃªtes alÃ©atoires * Helper : RÃ©cupÃ©rer toutes les quÃªtes d'une difficultÃ©

 * @param count - Nombre de quÃªtes Ã  sÃ©lectionner */

 * @returns Array de types de quÃªtes alÃ©atoires (sans duplicatas)export function getQuestsByDifficulty (difficulty: QuestDifficulty): QuestDefinition[] {

 */  return DAILY_QUESTS_CATALOG.filter(quest => quest.difficulty === difficulty)

export function getRandomQuestTypes (count: number): QuestType[] {}

  const shuffled = [...QUEST_TYPES_CONFIG].sort(() => Math.random() - 0.5)

  return shuffled.slice(0, count).map(config => config.type)/**

} * Helper : GÃ©nÃ©rer 3 quÃªtes alÃ©atoires pour un jour

 * (1 facile, 1 moyenne, 1 difficile)

/** */

 * Helper: Obtenir la difficultÃ© totale d'un ensemble de quÃªtesexport function generateDailyQuests (): QuestDefinition[] {

 * @param questTypes - Types de quÃªtes Ã  Ã©valuer  const easyQuests = getQuestsByDifficulty('easy')

 * @returns Score de difficultÃ© total (somme des difficultÃ©s)  const mediumQuests = getQuestsByDifficulty('medium')

 */  const hardQuests = getQuestsByDifficulty('hard')

export function calculateQuestSetDifficulty (questTypes: QuestType[]): number {

  return questTypes.reduce((total, type) => {  const randomEasy = easyQuests[Math.floor(Math.random() * easyQuests.length)]

    const config = getQuestConfig(type)  const randomMedium = mediumQuests[Math.floor(Math.random() * mediumQuests.length)]

    return total + (config?.difficulty ?? 1)  const randomHard = hardQuests[Math.floor(Math.random() * hardQuests.length)]

  }, 0)

}  return [randomEasy, randomMedium, randomHard]

}

/**

 * Helper: GÃ©nÃ©rer un set de quÃªtes Ã©quilibrÃ©/**

 * Garantit un mix de difficultÃ©s pour une expÃ©rience variÃ©e * Helper : Calculer le total des rÃ©compenses pour un ensemble de quÃªtes

 * */

 * @param count - Nombre de quÃªtes Ã  gÃ©nÃ©rerexport function calculateTotalRewards (quests: QuestDefinition[]): number {

 * @returns Array de types de quÃªtes Ã©quilibrÃ©s  return quests.reduce((total, quest) => total + quest.reward, 0)

 */}

export function generateBalancedQuestSet (count: number = QUESTS_SYSTEM_CONFIG.MAX_DAILY_QUESTS): QuestType[] {

  // SÃ©parer les quÃªtes par difficultÃ©/**

  const easy = QUEST_TYPES_CONFIG.filter(q => q.difficulty === 1) * Export groupÃ©

  const medium = QUEST_TYPES_CONFIG.filter(q => q.difficulty === 2) */

  const hard = QUEST_TYPES_CONFIG.filter(q => q.difficulty === 3)export const QUESTS_CONFIG = {

  catalog: DAILY_QUESTS_CATALOG,

  const selected: QuestType[] = []  dailyCount: DAILY_QUESTS_COUNT,

  allQuestsBonus: ALL_QUESTS_BONUS

  // StratÃ©gie: 1 facile + 1 moyenne + 1 difficile pour 3 quÃªtes} as const

  if (count === 3) {
    if (easy.length > 0) {
      const randomEasy = easy[Math.floor(Math.random() * easy.length)]
      selected.push(randomEasy.type)
    }
    if (medium.length > 0) {
      const randomMedium = medium[Math.floor(Math.random() * medium.length)]
      selected.push(randomMedium.type)
    }
    if (hard.length > 0) {
      const randomHard = hard[Math.floor(Math.random() * hard.length)]
      selected.push(randomHard.type)
    }
  } else {
    // Pour d'autres nombres, sÃ©lection alÃ©atoire
    return getRandomQuestTypes(count)
  }

  return selected
}

/**
 * Export de tous les types de quÃªtes disponibles
 */
export const ALL_QUEST_TYPES: QuestType[] = QUEST_TYPES_CONFIG.map(config => config.type)
