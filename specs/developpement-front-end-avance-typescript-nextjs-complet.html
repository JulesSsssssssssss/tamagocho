<!DOCTYPE html><html lang="en-US"><head><title>üìò **Mise √† niveau JavaScript**</title><meta property="og:title" content="üìò **Mise √† niveau JavaScript**"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{appearance:none;background-color:initial;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear;-webkit-tap-highlight-color:transparent}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTAgMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJtMzIgOTAgNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNNDAgNzBIMjBWNTBtMjAgMEwyMCA3MG00MC00MGgyMHYyMG0tMjAgMCAyMC0yMCIgY2xhc3M9ImEiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNMjAgNTBoMjB2MjBtLTIwIDAgMjAtMjBtNDAgMEg2MFYzMG0yMCAwTDYwIDUwIiBjbGFzcz0iYSIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNODcuOCA0Ny41Qzg5IDUwIDg3LjcgNTIgODUgNTJIMzVhOC43IDguNyAwIDAgMS03LjItNC41bC0xNS42LTMxQzExIDE0IDEyLjIgMTIgMTUgMTJoNTBhOC44IDguOCAwIDAgMSA3LjIgNC41ek02MCA1MnYzNm0tMTAgMGgyME00NSA0MmgyMCIvPjwvc3ZnPg==") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-bigger{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODBNNTIgOTBWMTAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-smaller{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}}@keyframes __bespoke_marp_transition_reduced_outgoing__{0%{opacity:1}to{opacity:0}}@keyframes __bespoke_marp_transition_reduced_incoming__{0%{mix-blend-mode:plus-lighter;opacity:0}to{mix-blend-mode:plus-lighter;opacity:1}}.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{::view-transition-group(*){animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-timing-function:ease}::view-transition-new(*),::view-transition-old(*){animation-delay:0s;animation-direction:var(--marp-bespoke-transition-animation-direction,normal);animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-fill-mode:both;animation-name:var(--marp-bespoke-transition-animation-name,var(--marp-bespoke-transition-animation-name-fallback,__bespoke_marp_transition_no_animation__));mix-blend-mode:normal}::view-transition-old(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_outgoing__;animation-timing-function:ease}::view-transition-new(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_incoming__;animation-timing-function:ease}::view-transition-new(root),::view-transition-old(root){animation-timing-function:linear}::view-transition-new(__bespoke_marp_transition_osc__),::view-transition-old(__bespoke_marp_transition_osc__){animation-duration:0s!important;animation-name:__bespoke_marp_transition_osc__!important}::view-transition-new(__bespoke_marp_transition_osc__){opacity:0!important}.bespoke-marp-transition-warming-up::view-transition-group(*),.bespoke-marp-transition-warming-up::view-transition-new(*),.bespoke-marp-transition-warming-up::view-transition-old(*){animation-play-state:paused!important}body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide:not(.bespoke-marp-active) *{view-transition-name:none!important}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}}@media screen and (prefers-reduced-motion:reduce){svg.bespoke-marp-slide *{view-transition-name:none!important}}@media screen{[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{inset:0;position:absolute}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:#000000a6;border-radius:7px;bottom:50px;color:#fff;contain:paint;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;user-select:none;white-space:nowrap;will-change:transform;z-index:1;view-transition-name:__bespoke_marp_transition_osc__}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{background:#0288d1;flex:0 0 0;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:#0000}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{display:grid;font-family:Helvetica,Arial,sans-serif;grid-template:"current dragbar next" minmax(140px,1fr) "current dragbar note" 2fr "info    dragbar note" 3em;grid-template-columns:minmax(3px,var(--bespoke-marp-presenter-split-ratio,66%)) 0 minmax(3px,1fr);height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container{background:#0288d1;cursor:col-resize;grid-area:dragbar;margin-left:-3px;opacity:0;position:relative;transition:opacity .4s linear .1s;width:6px;z-index:10}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container:hover{opacity:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container.active{opacity:1;transition-delay:0s}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:#0000;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note;position:relative;z-index:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper{display:block;inset:0;position:absolute}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons{background:#000000a6;border-radius:4px;bottom:0;display:flex;gap:4px;margin:12px;opacity:0;padding:6px;pointer-events:none;position:absolute;right:0;transition:opacity .2s linear}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons:focus-within,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper:focus-within+.bespoke-marp-presenter-note-buttons,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container:hover .bespoke-marp-presenter-note-buttons{opacity:1;pointer-events:auto}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{box-sizing:border-box;font-size:calc(1.1em*var(--bespoke-marp-note-font-scale, 1));height:calc(100% - 40px);margin:20px;overflow:auto;padding-right:3px;white-space:pre-wrap;width:calc(100% - 40px);word-wrap:break-word;scrollbar-color:#eeeeee80 #0000;scrollbar-width:thin}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:#0000}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:#eeeeee80;border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;overflow:hidden;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{box-sizing:border-box;display:block;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer:hover{cursor:pointer}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');div#\:\$p > svg > foreignObject > section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center;-webkit-text-size-adjust:100%;text-size-adjust:100%}div#\:\$p > svg > foreignObject > section::after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#\:\$p > svg > foreignObject > section:not([data-marpit-pagination])::after{display:none}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){font-size:2em;margin-block:0.67em}div#\:\$p > svg > foreignObject > section video::-webkit-media-controls{will-change:transform}@page {size:var(--slide-w) var(--slide-h);margin:0}@media print{html, body{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#\:\$p > svg > foreignObject > section{page-break-before:always;break-before:page}div#\:\$p > svg > foreignObject > section, div#\:\$p > svg > foreignObject > section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;print-color-adjust:exact!important;transition:none!important}div#\:\$p > svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}div#\:\$p > svg > foreignObject > :where(section){container-type:size}div#\:\$p > svg > foreignObject > section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}div#\:\$p > svg > foreignObject > :where(section):not([\20 root]){--brand-dark: #0B192F;--brand-mint: #64FFDA;--brand-gray: #F0F0F0;--white: #FFFFFF;--slide-w: 1280px;--slide-h: 720px;--pad: 56px;--header-h: 60px;--footer-h: 40px;--bg: #FFFFFF;--fg: #0B192F;--muted: #F0F0F0;--accent: #64FFDA;--header-bg: #FFFFFF;--footer-bg: #FFFFFF;--rule: #F0F0F0;}div#\:\$p > svg > foreignObject > :where(section):not([\20 root])[data-theme="light"]{--bg: #FFFFFF;--fg: #0B192F;--muted: #F0F0F0;--accent: #64FFDA;--header-bg: #FFFFFF;--footer-bg: #FFFFFF;--rule: #F0F0F0;}div#\:\$p > svg > foreignObject > :where(section):not([\20 root])[data-theme="dark"]{--bg: #0B192F;--fg: #F0F0F0;--muted: #11243F;--accent: #64FFDA;--header-bg: #0B192F;--footer-bg: #0B192F;--rule: #1B335A;}@media (prefers-color-scheme: dark){div#\:\$p > svg > foreignObject > :where(section):not([\20 root]):not([data-theme]){--bg: #0B192F;--fg: #F0F0F0;--muted: #11243F;--accent: #64FFDA;--header-bg: #0B192F;--footer-bg: #0B192F;--rule: #1B335A;}}div#\:\$p > svg > foreignObject > section::after{position:absolute!important;bottom:0!important;right:var(--pad)!important;top:auto!important;left:auto!important;background:transparent!important;color:var(--fg)!important;font-weight:700!important;font-size:16px!important;padding:0!important;margin:0!important;z-index:15!important;display:flex!important;align-items:center!important;height:var(--footer-h)!important}div#\:\$p > svg > foreignObject > section::after{--marpit-root-font-size: 16px !important;}div#\:\$p > svg > foreignObject > section .pagination{display:none!important}@keyframes slideIn{from{opacity:0;transform:translateX(50px)}to{opacity:1;transform:translateX(0)}}@keyframes slideOut{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(-50px)}}@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInLeft{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@keyframes fadeInRight{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}@keyframes fadeInScale{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}div#\:\$p > svg > foreignObject > section{width:var(--slide-w);height:var(--slide-h);font-family:"Poppins", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;color:var(--fg);background:var(--bg);padding:calc(var(--pad) + var(--header-h) - 25px) var(--pad) calc(var(--pad) + var(--footer-h)) var(--pad);box-sizing:border-box;line-height:1.35;position:relative;transition:background-color 0.3s ease, color 0.3s ease;animation:slideIn 0.6s ease-out}div#\:\$p > svg > foreignObject > section.marpit-section{animation:slideIn 0.6s ease-out}div#\:\$p > svg > foreignObject > section > header{position:absolute;top:0;left:0;right:0;height:var(--header-h);background:var(--header-bg);border-bottom:2px solid var(--rule);display:flex;align-items:center;justify-content:space-between;padding:0 var(--pad);box-sizing:border-box;z-index:10;transition:background-color 0.3s ease, border-color 0.3s ease}div#\:\$p > svg > foreignObject > section > header img{height:60px;width:auto;display:block;animation:none!important}div#\:\$p > svg > foreignObject > section > header .part-title{margin:0;font-size:20px;font-weight:600;color:var(--fg);text-align:right;max-width:40%;transition:color 0.3s ease;animation:none!important}div#\:\$p > svg > foreignObject > section > header div#\:\$p > svg > foreignObject > section section.part-title{--marpit-root-font-size: 20px;}div#\:\$p > svg > foreignObject > section > header p{margin:0;font-size:24px;font-weight:600;color:var(--fg);text-align:right;max-width:60%;transition:color 0.3s ease}div#\:\$p > svg > foreignObject > section > footer{position:absolute;left:0;right:0;bottom:0;height:var(--footer-h);background:var(--footer-bg);border-top:2px solid var(--rule);display:flex;align-items:center;padding:0 var(--pad);box-sizing:border-box;z-index:10;transition:background-color 0.3s ease, border-color 0.3s ease}div#\:\$p > svg > foreignObject > section > footer p{margin:0;font-size:18px;font-weight:600;color:var(--fg);transition:color 0.3s ease}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){margin:0 0 16px 0;font-size:34px;font-weight:700;color:var(--fg);line-height:1.4;transition:color 0.3s ease;animation:fadeInUp 0.8s ease-out 0.2s both}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) :is(span, marp-span), div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) emoji, div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) :is(span, marp-span), div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) emoji, div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) :is(span, marp-span), div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) emoji{animation:none!important;display:inline-block}div#\:\$p > svg > foreignObject > section :is(h2, marp-h2), div#\:\$p > svg > foreignObject > section :is(h3, marp-h3){margin:0 0 16px 0;line-height:1.3;animation:fadeInUp 0.8s ease-out 0.4s both}div#\:\$p > svg > foreignObject > section :is(h2, marp-h2){font-size:28px;font-weight:700;color:var(--fg);transition:color 0.3s ease}div#\:\$p > svg > foreignObject > section :is(h3, marp-h3){font-size:22px;font-weight:600;color:var(--fg);transition:color 0.3s ease}div#\:\$p > svg > foreignObject > section p{margin:0 0 12px 0;font-size:18px;line-height:1.6;animation:fadeInUp 0.8s ease-out 0.6s both}div#\:\$p > svg > foreignObject > section emoji, div#\:\$p > svg > foreignObject > section :is(span, marp-span)[role="img"], div#\:\$p > svg > foreignObject > section .emoji, div#\:\$p > svg > foreignObject > section img[alt*="emoji"], div#\:\$p > svg > foreignObject > section img[alt*="ic√¥ne"]{animation:none!important;display:inline-block}div#\:\$p > svg > foreignObject > section strong, div#\:\$p > svg > foreignObject > section em, div#\:\$p > svg > foreignObject > section a{color:var(--fg);transition:color 0.3s ease}div#\:\$p > svg > foreignObject > section mark{background:var(--accent);color:#00302A;padding:0 .15em;animation:fadeInScale 0.6s ease-out 0.8s both}div#\:\$p > svg > foreignObject > section ul, div#\:\$p > svg > foreignObject > section ol{font-size:20px;margin:16px 0 0 0;line-height:1.5;animation:fadeInUp 0.8s ease-out 0.8s both}div#\:\$p > svg > foreignObject > section li{margin:8px 0;line-height:1.5;animation:fadeInLeft 0.6s ease-out 1s both}div#\:\$p > svg > foreignObject > section li:nth-child(1){animation-delay:1s}div#\:\$p > svg > foreignObject > section li:nth-child(2){animation-delay:1.1s}div#\:\$p > svg > foreignObject > section li:nth-child(3){animation-delay:1.2s}div#\:\$p > svg > foreignObject > section li:nth-child(4){animation-delay:1.3s}div#\:\$p > svg > foreignObject > section li:nth-child(5){animation-delay:1.4s}div#\:\$p > svg > foreignObject > section ul li::marker, div#\:\$p > svg > foreignObject > section ol li::marker{color:var(--accent)}div#\:\$p > svg > foreignObject > section blockquote{border-left:6px solid var(--accent);background:color-mix(in srgb, var(--accent) 15%, transparent);padding:16px 20px;margin:16px 0;font-size:20px;line-height:1.5;animation:fadeInLeft 0.8s ease-out 1s both}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre){background:var(--muted);color:var(--fg);padding:16px;border-radius:10px;font-size:18px;line-height:1.4;overflow:auto;transition:background-color 0.3s ease, color 0.3s ease;animation:fadeInScale 0.8s ease-out 1.2s both}div#\:\$p > svg > foreignObject > section.lead :is(h1, marp-h1){text-align:center;font-size:48px;margin:0 0 16px 0;line-height:1.3;animation:fadeInScale 1s ease-out 0.2s both}div#\:\$p > svg > foreignObject > section.lead :is(h2, marp-h2){text-align:center}div#\:\$p > svg > foreignObject > section.lead{background:radial-gradient(1200px 600px at 100% 0%, color-mix(in srgb, var(--accent) 18%, transparent), transparent 60%), var(--bg);transition:background 0.3s ease}div#\:\$p > svg > foreignObject > section table{width:100%;border-collapse:collapse;margin:16px 0;font-size:18px;line-height:1.4;animation:fadeInUp 0.8s ease-out 1s both}div#\:\$p > svg > foreignObject > section table th{background:var(--muted);color:var(--fg);font-weight:700;padding:12px 16px;text-align:left;border:2px solid var(--rule);border-bottom:3px solid var(--accent)}div#\:\$p > svg > foreignObject > section table td{padding:12px 16px;border:1px solid var(--rule);vertical-align:top}div#\:\$p > svg > foreignObject > section table tr:nth-child(even){background:color-mix(in srgb, var(--muted) 30%, transparent)}div#\:\$p > svg > foreignObject > section table tr:hover{background:color-mix(in srgb, var(--accent) 10%, transparent)}div#\:\$p > svg > foreignObject > section img{animation:fadeInScale 0.8s ease-out 1.4s both}div#\:\$p > svg > foreignObject > section table tr:nth-child(1){animation-delay:1s}div#\:\$p > svg > foreignObject > section table tr:nth-child(2){animation-delay:1.1s}div#\:\$p > svg > foreignObject > section table tr:nth-child(3){animation-delay:1.2s}div#\:\$p > svg > foreignObject > section table tr:nth-child(4){animation-delay:1.3s}div#\:\$p > svg > foreignObject > section table tr:nth-child(5){animation-delay:1.4s}div#\:\$p > svg > foreignObject > section table tr:nth-child(6){animation-delay:1.5s}div#\:\$p > svg > foreignObject > section .fragment.fade-in{animation:fadeInUp 0.6s ease-out forwards}div#\:\$p > svg > foreignObject > section .fragment.fade-in-left{animation:fadeInLeft 0.6s ease-out forwards}div#\:\$p > svg > foreignObject > section .fragment.fade-in-right{animation:fadeInRight 0.6s ease-out forwards}div#\:\$p > svg > foreignObject > section .fragment.fade-in-scale{animation:fadeInScale 0.6s ease-out forwards}div#\:\$p > svg > foreignObject > section .fragment.delay-1{animation-delay:0.2s}div#\:\$p > svg > foreignObject > section .fragment.delay-2{animation-delay:0.4s}div#\:\$p > svg > foreignObject > section .fragment.delay-3{animation-delay:0.6s}div#\:\$p > svg > foreignObject > section .fragment.delay-4{animation-delay:0.8s}div#\:\$p > svg > foreignObject > section .fragment.delay-5{animation-delay:1s}div#\:\$p > svg > foreignObject > section .theme-switch{position:fixed;top:14px;right:14px;z-index:9999;padding:8px 14px;font-family:inherit;font-size:14px;border-radius:999px;border:2px solid var(--rule);background:var(--header-bg);color:var(--fg);cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.08);transition:all 0.3s ease;animation:fadeInRight 0.8s ease-out 1.5s both}div#\:\$p > svg > foreignObject > section section.theme-switch{--marpit-root-font-size: 14px;}div#\:\$p > svg > foreignObject > section .theme-switch:focus{outline:3px solid color-mix(in srgb, var(--accent) 40%, transparent)}div#\:\$p > svg > foreignObject > section .theme-switch:hover{background:var(--accent);color:var(--brand-dark);border-color:var(--accent)}@media (prefers-reduced-motion: reduce){div#\:\$p > svg > foreignObject > section *, div#\:\$p > svg > foreignObject > section *::before, div#\:\$p > svg > foreignObject > section *::after{animation-duration:0.01ms!important;animation-iteration-count:1!important;transition-duration:0.01ms!important}}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]{columns:initial!important;display:block!important;padding:0!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::after, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::after{display:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction="vertical"]{flex-direction:column}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split] > div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split, 50%)}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split="right"] > div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure > figcaption{position:absolute;border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;white-space:nowrap;width:1px}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"], div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"]{background:transparent!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"], div#\:\$p > svg[data-marpit-svg] > foreignObject[data-marpit-advanced-background="pseudo"]{pointer-events:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background-split]{width:100%;height:100%}
</style></head><body><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id=":$p"><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="1" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>

<h1 id="%F0%9F%93%98-mise-%C3%A0-niveau-javascript"><img class="emoji" draggable="false" alt="üìò" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4d8.svg" data-marp-twemoji=""/> <strong>Mise √† niveau JavaScript</strong></h1>
<h2 id="javascript-moderne-es6"><strong>JavaScript moderne (ES6+)</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Ma√Ætriser les bases de JavaScript moderne pour encha√Æner sur TypeScript et Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Public vis√©</strong> : D√©butants JavaScript bienvenus ‚Äî on part de z√©ro mais on avance vite</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="2" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Lire/√©crire du <strong>JS clair</strong> (variables, fonctions, boucles, tableaux, objets, modules)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Manipuler le <strong>DOM</strong> et r√©agir aux <strong>√©v√©nements</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">D√©boguer, structurer votre code et <strong>travailler avec une IA</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="3" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%9A%80-d%C3%A9marrer-avec-javascript"><img class="emoji" draggable="false" alt="üöÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg" data-marp-twemoji=""/> <strong>D√©marrer avec JavaScript</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="int%C3%A9grer-js-dans-une-page">Int√©grer JS dans une page</h3>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/main.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="outils-indispensables">Outils indispensables</h3>
<ul>
<li data-marpit-fragment="1">Navigateur (Chrome/Firefox) + <strong>DevTools</strong></li>
<li data-marpit-fragment="2"><strong>VS Code</strong> + ESLint, Prettier, Error Lens</li>
<li data-marpit-fragment="3"><strong>Node.js LTS</strong> pour le terminal</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="4" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%93%A6-variables-et-port%C3%A9e"><img class="emoji" draggable="false" alt="üì¶" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e6.svg" data-marp-twemoji=""/> <strong>Variables et port√©e</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-keyword">let</span> compteur = <span class="hljs-number">0</span>;      <span class="hljs-comment">// variable mutable (bloc)</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-number">3.14159</span>;    <span class="hljs-comment">// constante (bloc)</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="r%C3%A8gles-dor">R√®gles d'or</h3>
<ul>
<li data-marpit-fragment="1"><strong>Toujours pr√©f√©rer <code>const</code></strong> ‚Üí code plus pr√©visible</li>
<li data-marpit-fragment="2">Utiliser <code>let</code> seulement si la valeur <strong>change</strong></li>
<li data-marpit-fragment="3"><strong>√âviter <code>var</code></strong> (port√©e fonctionnelle + hoisting)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="5" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%94%A4-types-de-base"><img class="emoji" draggable="false" alt="üî§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f524.svg" data-marp-twemoji=""/> <strong>Types de base</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-keyword">const</span> nom = <span class="hljs-string">&quot;Alice&quot;</span>;           <span class="hljs-comment">// string</span>
<span class="hljs-keyword">const</span> age = <span class="hljs-number">25</span>;                 <span class="hljs-comment">// number</span>
<span class="hljs-keyword">const</span> actif = <span class="hljs-literal">true</span>;             <span class="hljs-comment">// boolean</span>
<span class="hljs-keyword">let</span> inconnu;                    <span class="hljs-comment">// undefined</span>
<span class="hljs-keyword">const</span> rien = <span class="hljs-literal">null</span>;              <span class="hljs-comment">// null</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="conversions-utiles">Conversions utiles</h3>
<pre><code class="language-js"><span class="hljs-title class_">Number</span>(<span class="hljs-string">&quot;42&quot;</span>)     <span class="hljs-comment">// 42</span>
<span class="hljs-title class_">String</span>(<span class="hljs-number">10</span>)       <span class="hljs-comment">// &quot;10&quot;</span>
<span class="hljs-title class_">Boolean</span>(<span class="hljs-number">0</span>)       <span class="hljs-comment">// false</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> <strong>Pi√®ge</strong> : <code>==</code> fait des coercitions surprenantes ‚Üí utilisez <code>===</code></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="6" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%E2%9A%A1-fonctions"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Fonctions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-comment">// D√©claration classique</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">somme</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// Fonction fl√©ch√©e</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">somme2</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;

<span class="hljs-comment">// Valeur par d√©faut</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">hello</span> = (<span class="hljs-params">nom = <span class="hljs-string">&quot;world&quot;</span></span>) =&gt; <span class="hljs-string">`Hello <span class="hljs-subst">${nom}</span>`</span>;
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> Les fonctions fl√©ch√©es n'ont pas leur propre <code>this</code> (utile en React)</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="7" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%93%9A-tableaux--m%C3%A9thodes-essentielles"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Tableaux : m√©thodes essentielles</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-keyword">const</span> fruits = [<span class="hljs-string">&quot;pomme&quot;</span>, <span class="hljs-string">&quot;banane&quot;</span>, <span class="hljs-string">&quot;kiwi&quot;</span>];

fruits.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;mangue&quot;</span>);                    <span class="hljs-comment">// ajoute</span>
<span class="hljs-keyword">const</span> last = fruits.<span class="hljs-title function_">pop</span>();                <span class="hljs-comment">// retire</span>
<span class="hljs-keyword">const</span> up = fruits.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// transforme</span>
<span class="hljs-keyword">const</span> pOnly = fruits.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;p&quot;</span>)); <span class="hljs-comment">// filtre</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="points-cl%C3%A9s">Points cl√©s</h3>
<ul>
<li data-marpit-fragment="1"><code>map</code> ‚Üí <strong>transforme</strong> les √©l√©ments (m√™me longueur)</li>
<li data-marpit-fragment="2"><code>filter</code> ‚Üí <strong>r√©duit</strong> selon une condition</li>
<li data-marpit-fragment="3"><code>reduce</code> ‚Üí <strong>agr√®ge</strong> en une seule valeur</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="8" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%8E%81-objets--destructuring--spread"><img class="emoji" draggable="false" alt="üéÅ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f381.svg" data-marp-twemoji=""/> <strong>Objets : destructuring &amp; spread</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-keyword">const</span> user = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-attr">admin</span>: <span class="hljs-literal">false</span> };

<span class="hljs-comment">// Destructuring</span>
<span class="hljs-keyword">const</span> { id, name } = user;

<span class="hljs-comment">// Spread (copie superficielle)</span>
<span class="hljs-keyword">const</span> user2 = { ...user, <span class="hljs-attr">admin</span>: <span class="hljs-literal">true</span> };
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> <strong>Pi√®ge</strong> : le spread est <strong>superficiel</strong> ‚Äî les objets imbriqu√©s restent partag√©s</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="9" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%8E%AF-op%C3%A9rateurs-logiques-modernes"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Op√©rateurs logiques modernes</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-keyword">const</span> titre = <span class="hljs-string">&quot;&quot;</span>;
<span class="hljs-keyword">const</span> fallback = titre || <span class="hljs-string">&quot;Sans titre&quot;</span>;  <span class="hljs-comment">// falsy ‚Üí &quot;Sans titre&quot;</span>
<span class="hljs-keyword">const</span> strict = titre ?? <span class="hljs-string">&quot;Sans titre&quot;</span>;    <span class="hljs-comment">// nullish coalescing</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-js"><span class="hljs-keyword">const</span> cfg = { <span class="hljs-attr">port</span>: <span class="hljs-number">0</span> };
<span class="hljs-keyword">const</span> p1 = cfg.<span class="hljs-property">port</span> || <span class="hljs-number">3000</span>;  <span class="hljs-comment">// 3000 (dangereux)</span>
<span class="hljs-keyword">const</span> p2 = cfg.<span class="hljs-property">port</span> ?? <span class="hljs-number">3000</span>;  <span class="hljs-comment">// 0 (correct pour 0)</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <code>??</code> ne cible <strong>que</strong> <code>null</code> et <code>undefined</code></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="10" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%8C%90-dom--s%C3%A9lection-et-%C3%A9v%C3%A9nements"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>DOM : s√©lection et √©v√©nements</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>Clique<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;out&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-js"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#btn&#x27;</span>);
<span class="hljs-keyword">const</span> out = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#out&#x27;</span>);

btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  out.<span class="hljs-property">textContent</span> = <span class="hljs-string">&#x27;Salut!&#x27;</span>;
});
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> <strong>Pi√®ge</strong> : manipuler le DOM avant qu'il existe ‚Üí utilisez <code>type=&quot;module&quot;</code></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="11" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%E2%8F%B1%EF%B8%8F-asynchronisme--promises--asyncawait"><img class="emoji" draggable="false" alt="‚è±Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/23f1.svg" data-marp-twemoji=""/> <strong>Asynchronisme : Promises &amp; async/await</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">wait</span> = (<span class="hljs-params">ms</span>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(res, ms));

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;start&#x27;</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">wait</span>(<span class="hljs-number">500</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;end&#x27;</span>);
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="fetch-de-base">Fetch de base</h3>
<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUsers</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;https://api.example.com/users&#x27;</span>);
  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;HTTP &#x27;</span> + res.<span class="hljs-property">status</span>);
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="12" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%93%A6-modules-es--importexport"><img class="emoji" draggable="false" alt="üì¶" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e6.svg" data-marp-twemoji=""/> <strong>Modules ES : import/export</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-comment">// utils/math.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">clamp</span>(<span class="hljs-params">v, min, max</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(max, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(min, v));
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-js"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> clamp, { add } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./utils/math.js&#x27;</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>), <span class="hljs-title function_">clamp</span>(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>));
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> Pr√©f√©rez <strong>named exports</strong> pour la recherche et la relecture</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="13" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%90%9B-d%C3%A9bogage--qualit%C3%A9"><img class="emoji" draggable="false" alt="üêõ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f41b.svg" data-marp-twemoji=""/> <strong>D√©bogage &amp; qualit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><code>console.log</code>, <code>console.table</code>, <strong>breakpoints</strong> dans DevTools</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Linting</strong> (ESLint) + <strong>formatage</strong> (Prettier)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Structurez en <strong>petites fonctions pures</strong> r√©utilisables</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ac.svg" data-marp-twemoji=""/> <strong>Prompt IA</strong> : ¬´ Donne-moi un plan de refactoring en 3 √©tapes pour simplifier ce code ¬ª</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="14" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%E2%9C%85-checklists--pi%C3%A8ges-fr%C3%A9quents"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklists &amp; pi√®ges fr√©quents</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Pr√©f√©rer <code>const</code> ; <code>let</code> seulement si n√©cessaire</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><code>===</code> / <code>!==</code> (√©viter <code>==</code>)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><code>??</code> plut√¥t que <code>||</code> quand <code>0</code>/<code>&quot;&quot;</code> sont des valeurs valides</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Scripts en <code>type=&quot;module&quot;</code> pour garantir le DOM</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5">Toujours un <code>try/catch</code> autour des <code>await</code> √† risque</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="15" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%A4%96-ia-au-quotidien"><img class="emoji" draggable="false" alt="ü§ñ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f916.svg" data-marp-twemoji=""/> <strong>IA au quotidien</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="prompts-utiles">Prompts utiles</h3>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="1"><strong>Comprendre</strong> : ¬´ Explique ce code pas √† pas, rep√®re les effets de bord ¬ª</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="2"><strong>Refactor</strong> : ¬´ D√©coupe en fonctions pures et justifie les signatures ¬ª</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="3"><strong>S√©curit√©</strong> : ¬´ Liste les risques XSS et propose une version s√ªre ¬ª</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Toujours <strong>lire</strong> le code g√©n√©r√© et tester ‚Äî l'IA est un <strong>assistant</strong></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="16" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Mise √† niveau JavaScript&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Mise √† niveau JavaScript</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>MDN</strong> JavaScript Guide</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>javascript.info</strong> (tutoriels progressifs)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Eloquent JavaScript</strong> (gratuit en ligne)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="17" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>

<h1 id="%F0%9F%94%B7-typescript-avanc%C3%A9"><img class="emoji" draggable="false" alt="üî∑" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f537.svg" data-marp-twemoji=""/> <strong>TypeScript avanc√©</strong></h1>
<h2 id="du-javascript-au-code-robuste-et-maintenable"><strong>Du JavaScript au code robuste et maintenable</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Ma√Ætriser TypeScript pour cr√©er des applications Next.js robustes et √©volutives</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>TypeScript n'ex√©cute rien</strong> √† l'ex√©cution ‚Äî c'est du typage statique</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="18" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Passer de <strong>JavaScript</strong> √† <strong>TypeScript</strong> robuste et maintenable</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Concevoir des <strong>types r√©utilisables</strong> (alias, interfaces, g√©n√©riques)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser le <strong>narrowing</strong>, <strong>type guards</strong> et <strong>utility types</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Taper correctement des <strong>composants React</strong> (props, hooks)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="19" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-mise-en-place--tsconfig"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Mise en place &amp; tsconfig</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="installation-rapide">Installation rapide</h3>
<pre><code class="language-bash">npm i -D typescript ts-node @types/node
npx tsc --init
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="configuration-minimale-recommand%C3%A9e">Configuration minimale recommand√©e</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;target&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ES2020&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ESNext&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;jsx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;react-jsx&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;moduleResolution&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bundler&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">&quot;@/components/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/components/*&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="20" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%93%9D-types-de-base"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Types de base</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">let</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;Hello&quot;</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">ok</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// union</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-keyword">let</span> <span class="hljs-attr">u</span>: <span class="hljs-built_in">unknown</span>;  <span class="hljs-comment">// pr√©f√©rable √† any</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">n</span>: <span class="hljs-built_in">never</span>;    <span class="hljs-comment">// code inatteignable</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">x</span>: <span class="hljs-built_in">unknown</span></span>): <span class="hljs-built_in">void</span> { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); }
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <code>unknown</code> oblige √† v√©rifier le type ‚Üí plus s√ªr que <code>any</code></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-marpit-fragments="2" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="21" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%8F%B7%EF%B8%8F-litt%C3%A9raux--alias"><img class="emoji" draggable="false" alt="üè∑Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3f7.svg" data-marp-twemoji=""/> <strong>Litt√©raux &amp; alias</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Status</span> = <span class="hljs-string">&quot;idle&quot;</span> | <span class="hljs-string">&quot;loading&quot;</span> | <span class="hljs-string">&quot;success&quot;</span> | <span class="hljs-string">&quot;error&quot;</span>;
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="1"><code>Status</code> centralise <strong>tous</strong> les √©tats autoris√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="2">Votre UI devient un switch exhaustif</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ac.svg" data-marp-twemoji=""/> <strong>Prompt IA</strong> : ¬´ G√©n√®re des unions litt√©rales pour tous les champs √† valeurs finies de ce JSON ¬ª</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="22" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%93%A6-objets--alias-vs-interface"><img class="emoji" draggable="false" alt="üì¶" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e6.svg" data-marp-twemoji=""/> <strong>Objets : alias vs interface</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Alias</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">User</span> = {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">role</span>?: <span class="hljs-string">&quot;admin&quot;</span> | <span class="hljs-string">&quot;editor&quot;</span> | <span class="hljs-string">&quot;viewer&quot;</span>;
};
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// Interface</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Article</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong><code>type</code></strong> pour unions/tuples, <strong><code>interface</code></strong> pour l'extension</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="23" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%94%A7-fonctions--surcharges"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Fonctions &amp; surcharges</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">toUpper</span>(<span class="hljs-params"><span class="hljs-attr">x</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> x.<span class="hljs-title function_">toUpperCase</span>();
}

<span class="hljs-keyword">const</span> add = (<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> a + b;
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// G√©n√©rique</span>
<span class="hljs-keyword">function</span> first&lt;T&gt;(<span class="hljs-attr">list</span>: T[]): T | <span class="hljs-literal">undefined</span> {
  <span class="hljs-keyword">return</span> list[<span class="hljs-number">0</span>];
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="24" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%E2%9C%A8-g%C3%A9n%C3%A9riques-game-changer"><img class="emoji" draggable="false" alt="‚ú®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2728.svg" data-marp-twemoji=""/> <strong>G√©n√©riques (game-changer)</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="contraintes-avec-keyof">Contraintes avec <code>keyof</code></h3>
<pre><code class="language-ts"><span class="hljs-keyword">function</span> pluck&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">arr</span>: T[], <span class="hljs-attr">key</span>: K): T[K][] {
  <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item[key]);
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="api-typ%C3%A9e">API typ√©e</h3>
<pre><code class="language-ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> jsonFetch&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;HTTP error&quot;</span>);
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="25" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%8E%AF-narrowing--type-guards"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Narrowing &amp; type guards</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderValue</span>(<span class="hljs-params"><span class="hljs-attr">x</span>: <span class="hljs-built_in">unknown</span></span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">&quot;string&quot;</span>) <span class="hljs-keyword">return</span> x.<span class="hljs-title function_">toUpperCase</span>();
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(x)) <span class="hljs-keyword">return</span> x.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(x);
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="garde-personnalis%C3%A9e">Garde personnalis√©e</h3>
<pre><code class="language-ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Cat</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">&quot;cat&quot;</span>; <span class="hljs-title function_">meow</span>(): <span class="hljs-built_in">void</span> };
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Dog</span> = { <span class="hljs-attr">kind</span>: <span class="hljs-string">&quot;dog&quot;</span>; <span class="hljs-title function_">bark</span>(): <span class="hljs-built_in">void</span> };

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isCat</span>(<span class="hljs-params"><span class="hljs-attr">p</span>: <span class="hljs-title class_">Pet</span></span>): p is <span class="hljs-title class_">Cat</span> {
  <span class="hljs-keyword">return</span> p.<span class="hljs-property">kind</span> === <span class="hljs-string">&quot;cat&quot;</span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="26" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%94%80-discriminated-unions"><img class="emoji" draggable="false" alt="üîÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f500.svg" data-marp-twemoji=""/> <strong>Discriminated unions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">LoadState</span> =
  | { <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;idle&quot;</span> }
  | { <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;loading&quot;</span> }
  | { <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;success&quot;</span>; <span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span>[] }
  | { <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;error&quot;</span>; <span class="hljs-attr">error</span>: <span class="hljs-title class_">Error</span> };
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">view</span>(<span class="hljs-params"><span class="hljs-attr">s</span>: <span class="hljs-title class_">LoadState</span></span>) {
  <span class="hljs-keyword">switch</span> (s.<span class="hljs-property">status</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;idle&quot;</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;‚Ä¶&quot;</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;loading&quot;</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Chargement&quot;</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;success&quot;</span>: <span class="hljs-keyword">return</span> s.<span class="hljs-property">data</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;, &quot;</span>);
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;error&quot;</span>: <span class="hljs-keyword">return</span> s.<span class="hljs-property">error</span>.<span class="hljs-property">message</span>;
  }
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> Switch <strong>exhaustif</strong> ‚Üí moins d'√©tats zombies</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="27" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-utility-types"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Utility types</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">User</span> = { <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">email</span>?: <span class="hljs-built_in">string</span> };
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserDraft</span> = <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">User</span>&gt;;        <span class="hljs-comment">// tous optionnels</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UserStrict</span> = <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">User</span>&gt;;      <span class="hljs-comment">// tous requis</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UserPublic</span> = <span class="hljs-title class_">Pick</span>&lt;<span class="hljs-title class_">User</span>, <span class="hljs-string">&quot;id&quot;</span> | <span class="hljs-string">&quot;name&quot;</span>&gt;;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">WithoutEmail</span> = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">User</span>, <span class="hljs-string">&quot;email&quot;</span>&gt;;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Flags</span> = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-string">&quot;canEdit&quot;</span> | <span class="hljs-string">&quot;canView&quot;</span>, <span class="hljs-built_in">boolean</span>&gt;;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="28" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%E2%9A%9B%EF%B8%8F-react--typescript--composants"><img class="emoji" draggable="false" alt="‚öõÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/269b.svg" data-marp-twemoji=""/> <strong>React + TypeScript : composants</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ButtonProps</span> {
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
  <span class="hljs-attr">onClick</span>?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">variant</span>?: <span class="hljs-string">&quot;primary&quot;</span> | <span class="hljs-string">&quot;ghost&quot;</span>;
  <span class="hljs-attr">disabled</span>?: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{
  children, onClick, variant = <span class="hljs-string">&quot;primary&quot;</span>, disabled
}: <span class="hljs-title class_">ButtonProps</span></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span> <span class="hljs-attr">data-variant</span>=<span class="hljs-string">{variant}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{disabled}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="29" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%8E%A3-react--typescript--%C3%A9v%C3%A9nements--hooks"><img class="emoji" draggable="false" alt="üé£" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a3.svg" data-marp-twemoji=""/> <strong>React + TypeScript : √©v√©nements &amp; hooks</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Search</span>(<span class="hljs-params">{ onChange }: { onChange: (q: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handle</span> = (<span class="hljs-params"><span class="hljs-attr">e</span>: <span class="hljs-title class_">React</span>.<span class="hljs-title class_">ChangeEvent</span>&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt;</span>) =&gt;
    <span class="hljs-title function_">onChange</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handle}</span> /&gt;</span></span>;
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title class_">React</span>.<span class="hljs-property">useState</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>);

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Action</span> = { <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;inc&quot;</span> } | { <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;add&quot;</span>; <span class="hljs-attr">by</span>: <span class="hljs-built_in">number</span> };
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params"><span class="hljs-attr">state</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">action</span>: <span class="hljs-title class_">Action</span></span>) {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;inc&quot;</span>: <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;add&quot;</span>: <span class="hljs-keyword">return</span> state + action.<span class="hljs-property">by</span>;
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="30" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%94%8D-react-query-typ%C3%A9"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>React Query (typ√©)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span> { <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span> }
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-keyword">const</span> { data, error, isLoading } = <span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&quot;todos&quot;</span>],
  <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> jsonFetch&lt;<span class="hljs-title class_">Todo</span>[]&gt;(<span class="hljs-string">&quot;/api/todos&quot;</span>)
});
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <code>useQuery&lt;Todo[]&gt;</code> inf√®re le type de <code>data</code> ‚Üí autocompl√©tion</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="31" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%E2%9C%85-validation-runtime-avec-zod"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Validation runtime avec Zod</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;zod&quot;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">TodoSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">id</span>: z.<span class="hljs-title function_">number</span>(),
  <span class="hljs-attr">title</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">completed</span>: z.<span class="hljs-title function_">boolean</span>()
});

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Todo</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">TodoSchema</span>&gt;;
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getTodos</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Todo</span>[]&gt; {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> jsonFetch&lt;<span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-string">&quot;/api/todos&quot;</span>);
  <span class="hljs-keyword">return</span> z.<span class="hljs-title function_">array</span>(<span class="hljs-title class_">TodoSchema</span>).<span class="hljs-title function_">parse</span>(data);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="32" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%8E%AF-pi%C3%A8ges-courants--checklists"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Pi√®ges courants &amp; checklists</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">√âvitez <code>any</code> ‚Üí pr√©f√©rez <code>unknown</code> + narrowing</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Typage des <code>useState</code> avec valeurs initiales <code>null</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">√âv√©nements React : <strong>toujours</strong> typer <code>ChangeEvent</code>, <code>MouseEvent</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Pas d'<code>enum</code> par d√©faut ‚Üí pr√©f√©rez <strong>unions de litt√©raux</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5">Utilisez <strong>path aliases</strong> pour √©viter <code>../../../</code></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="33" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;TypeScript avanc√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">TypeScript avanc√©</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>TypeScript Handbook</strong> (docs officielles)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>React TypeScript Cheatsheets</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Zod</strong> (validation runtime)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="34" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>

<h1 id="%F0%9F%9A%80-initialiser-un-projet-nextjs"><img class="emoji" draggable="false" alt="üöÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg" data-marp-twemoji=""/> <strong>Initialiser un projet Next.js</strong></h1>
<h2 id="architecture-app-router"><strong>Architecture App Router</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Cr√©er un projet Next.js solide avec TypeScript, ESLint et Tailwind</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>App Router</strong> &gt; Pages Router ‚Äî structure moderne server-first</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="35" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Cr√©er un projet Next.js avec <strong>TypeScript</strong>, ESLint/Prettier et Tailwind</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Comprendre et organiser l'<strong>architecture App Router</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Mettre en place des <strong>alias d'import</strong> et scripts NPM propres</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">G√©rer les <strong>variables d'environnement</strong> (serveur vs client)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="36" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%93%9D-app-router-vs-pages-router"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>App Router vs Pages Router</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="pourquoi-app-router">Pourquoi App Router ?</h3>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="1">Composants <strong>server-first</strong> (meilleures performances)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="2"><strong>Layouts imbriqu√©s</strong>, <strong>streaming</strong>, <strong>data fetching</strong> optimis√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="3"><strong>Route Handlers</strong> dans <code>/app/api</code></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="37" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-cr%C3%A9ation-du-projet"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Cr√©ation du projet</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npx create-next-app@latest mon-projet \
  --typescript \
  --eslint \
  --tailwind \
  --app \
  --src-dir \
  --import-alias <span class="hljs-string">&quot;@/*&quot;</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="options-cl%C3%A9s">Options cl√©s</h3>
<ul>
<li data-marpit-fragment="1"><code>--app</code> : active <strong>App Router</strong></li>
<li data-marpit-fragment="2"><code>--typescript</code> : config TS + types React/Node</li>
<li data-marpit-fragment="3"><code>--src-dir</code> : code dans <code>src/</code></li>
<li data-marpit-fragment="4"><code>--import-alias</code> : <code>@/</code> ‚Üí <code>src/</code></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="38" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%93%82-arborescence-de-r%C3%A9f%C3%A9rence"><img class="emoji" draggable="false" alt="üìÇ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c2.svg" data-marp-twemoji=""/> <strong>Arborescence de r√©f√©rence</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code>src/
  app/
    layout.tsx          # layout racine
    page.tsx            # page d'accueil
    globals.css         # styles globaux
    blog/
      page.tsx
      [slug]/
        page.tsx        # route dynamique
    api/
      hello/route.ts    # route handler
  components/
    ui/
    layout/
  lib/
  types/
public/
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="39" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%8E%A8-layout-racine"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Layout racine</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// src/app/layout.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
  children
}: {
  children: React.ReactNode
}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;fr&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;antialiased&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>Mon Header<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>Mon Footer<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="40" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%94%A7-path-aliases--imports"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Path aliases &amp; imports</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="configuration-tsconfigjson">Configuration tsconfig.json</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;@/components/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/components/*&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;@/lib/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/lib/*&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;@/types/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/types/*&quot;</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-comment">// Au lieu de : import { Button } from &#x27;../../../components/ui/Button&#x27;</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/ui/Button&#x27;</span>;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="41" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%8C%90-variables-denvironnement"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>Variables d'environnement</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="fichiers-envlocal">Fichiers <code>.env.local</code></h3>
<pre><code class="language-bash">DATABASE_URL=postgresql://...        <span class="hljs-comment"># Serveur uniquement</span>
NEXT_PUBLIC_API_URL=https://api...  <span class="hljs-comment"># Client &amp; Serveur</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="usage">Usage</h3>
<pre><code class="language-ts"><span class="hljs-comment">// Serveur</span>
<span class="hljs-keyword">const</span> dbUrl = process.<span class="hljs-property">env</span>.<span class="hljs-property">DATABASE_URL</span>;

<span class="hljs-comment">// Client</span>
<span class="hljs-keyword">const</span> apiUrl = process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_API_URL</span>;
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Pr√©fixe <code>NEXT_PUBLIC_</code> pour exposer au client</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="42" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-scripts-npm-essentiels"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Scripts NPM essentiels</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;dev&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;next dev&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;next build&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;next start&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;lint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;next lint&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;prettier --write .&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="commandes">Commandes</h3>
<ul>
<li data-marpit-fragment="1"><code>npm run dev</code> ‚Äî Mode d√©veloppement</li>
<li data-marpit-fragment="2"><code>npm run build</code> ‚Äî Build de production</li>
<li data-marpit-fragment="3"><code>npm run lint</code> ‚Äî V√©rification ESLint</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="43" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%93%9D-configuration-eslint--prettier"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Configuration ESLint &amp; Prettier</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="eslintrcjson">.eslintrc.json</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;next/core-web-vitals&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;prettier&quot;</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="prettierrc">.prettierrc</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;semi&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;singleQuote&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tabWidth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;trailingComma&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;es5&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="44" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%8E%A8-tailwind-css"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Tailwind CSS</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="configuration-tailwindconfigts">Configuration tailwind.config.ts</h3>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Config</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;tailwindcss&#x27;</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Config</span> = {
  <span class="hljs-attr">content</span>: [
    <span class="hljs-string">&#x27;./src/pages/**/*.{js,ts,jsx,tsx,mdx}&#x27;</span>,
    <span class="hljs-string">&#x27;./src/components/**/*.{js,ts,jsx,tsx,mdx}&#x27;</span>,
    <span class="hljs-string">&#x27;./src/app/**/*.{js,ts,jsx,tsx,mdx}&#x27;</span>,
  ],
  <span class="hljs-attr">theme</span>: {
    <span class="hljs-attr">extend</span>: {},
  },
  <span class="hljs-attr">plugins</span>: [],
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="45" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%97%82%EF%B8%8F-organisation-du-code"><img class="emoji" draggable="false" alt="üóÇÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5c2.svg" data-marp-twemoji=""/> <strong>Organisation du code</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="conventions-recommand%C3%A9es">Conventions recommand√©es</h3>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="1"><code>components/ui/</code> ‚Äî Composants UI r√©utilisables</li>
<li data-marpit-fragment="2"><code>components/layout/</code> ‚Äî Header, Footer, Nav</li>
<li data-marpit-fragment="3"><code>lib/</code> ‚Äî Utilitaires et helpers</li>
<li data-marpit-fragment="4"><code>types/</code> ‚Äî Types TypeScript partag√©s</li>
<li data-marpit-fragment="5"><code>app/</code> ‚Äî Routes et layouts</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="46" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%E2%9C%85-checklist-de-d%C3%A9marrage"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist de d√©marrage</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Projet cr√©√© avec les bonnes options</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">TypeScript configur√© avec <code>strict: true</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Path aliases fonctionnels (<code>@/</code>)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">ESLint + Prettier configur√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5">Variables d'environnement bien s√©par√©es</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="47" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%A4%96-utiliser-lia"><img class="emoji" draggable="false" alt="ü§ñ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f916.svg" data-marp-twemoji=""/> <strong>Utiliser l'IA</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="prompts-utiles">Prompts utiles</h3>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="1">¬´ R√©sume les diff√©rences App Router vs Pages Router ¬ª</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="2">¬´ V√©rifie ma commande create-next-app selon mon OS ¬ª</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="3">¬´ Propose une structure de dossiers pour mon projet Next.js ¬ª</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="48" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Initialiser un projet Next.js &amp; architecture&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Initialiser un projet Next.js &amp; architecture</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Documentation Next.js</strong> ‚Äî nextjs.org/docs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Tailwind CSS</strong> ‚Äî tailwindcss.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>TypeScript</strong> ‚Äî typescriptlang.org</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="49" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>

<h1 id="%F0%9F%A7%AD-routing--navigation"><img class="emoji" draggable="false" alt="üß≠" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9ed.svg" data-marp-twemoji=""/> <strong>Routing &amp; navigation</strong></h1>
<h2 id="app-router-nextjs"><strong>App Router Next.js</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Ma√Ætriser le routing et la navigation avec l'App Router de Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Un dossier = un segment d'URL</strong>, <code>page.tsx</code> rend la page</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="50" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Cr√©er des routes <strong>statiques/dynamiques</strong>, catch-all, groupes</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Construire une <strong>navigation accessible</strong> et r√©active</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser la navigation <strong>programmative</strong> (useRouter, usePathname)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Mettre en place des <strong>redirections</strong> avec <code>middleware.ts</code></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="51" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%94%97-composant-link"><img class="emoji" draggable="false" alt="üîó" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f517.svg" data-marp-twemoji=""/> <strong>Composant Link</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/link&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Nav</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Navigation principale&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex gap-4&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>Accueil<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/blog&quot;</span>&gt;</span>Blog<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://example.com&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span> 
             <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;noreferrer noopener&quot;</span>&gt;</span>
            Externe
          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="52" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%8E%A8-%C3%A9tat-actif-current"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>√âtat actif (current)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/link&#x27;</span>;
<span class="hljs-keyword">import</span> { usePathname } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;

<span class="hljs-keyword">const</span> items = [
  { <span class="hljs-attr">href</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Accueil&#x27;</span> },
  { <span class="hljs-attr">href</span>: <span class="hljs-string">&#x27;/blog&#x27;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Blog&#x27;</span> },
];

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MainNav</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> pathname = <span class="hljs-title function_">usePathname</span>();
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex gap-4&quot;</span>&gt;</span>
        {items.map((it) =&gt; {
          const active = pathname === it.href;
          return (
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{it.href}</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{it.href}</span>
                <span class="hljs-attr">aria-current</span>=<span class="hljs-string">{active</span> ? &#x27;<span class="hljs-attr">page</span>&#x27; <span class="hljs-attr">:</span> <span class="hljs-attr">undefined</span>}
                <span class="hljs-attr">className</span>=<span class="hljs-string">{active</span> ? &#x27;<span class="hljs-attr">font-bold</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">opacity-80</span>&#x27;}&gt;</span>
                {it.label}
              <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          );
        })}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="53" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%94%A2-routes-dynamiques"><img class="emoji" draggable="false" alt="üî¢" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f522.svg" data-marp-twemoji=""/> <strong>Routes dynamiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="structure-des-dossiers">Structure des dossiers</h3>
<pre><code>app/
  blog/
    page.tsx              # /blog
    [slug]/
      page.tsx            # /blog/mon-article
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="r%C3%A9cup%C3%A9rer-le-param%C3%A8tre">R√©cup√©rer le param√®tre</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogPost</span>(<span class="hljs-params">{
  params
}: {
  params: { slug: <span class="hljs-built_in">string</span> }
}</span>) {
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Article : {params.slug}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="54" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%8C%9F-routes-catch-all"><img class="emoji" draggable="false" alt="üåü" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f31f.svg" data-marp-twemoji=""/> <strong>Routes catch-all</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="slug--optionnel">[...slug] ‚Äî optionnel</h3>
<pre><code>app/
  docs/
    [[...slug]]/
      page.tsx
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-comment">// Capture : /docs, /docs/intro, /docs/api/auth</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DocsPage</span>(<span class="hljs-params">{
  params
}: {
  params: { slug?: <span class="hljs-built_in">string</span>[] }
}</span>) {
  <span class="hljs-keyword">const</span> path = params.<span class="hljs-property">slug</span>?.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;/&#x27;</span>) || <span class="hljs-string">&#x27;index&#x27;</span>;
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Docs: {path}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="55" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%94%80-groupes-de-routes"><img class="emoji" draggable="false" alt="üîÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f500.svg" data-marp-twemoji=""/> <strong>Groupes de routes</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="structure">Structure</h3>
<pre><code>app/
  (marketing)/
    about/
      page.tsx          # /about (pas /marketing/about)
    contact/
      page.tsx          # /contact
  (shop)/
    products/
      page.tsx          # /products
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> Les parenth√®ses n'apparaissent <strong>pas</strong> dans l'URL</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="56" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%8E%AF-navigation-programmative"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Navigation programmative</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginButton</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-comment">// ... logique de connexion</span>
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/dashboard&#x27;</span>);
    <span class="hljs-comment">// ou router.replace(&#x27;/dashboard&#x27;); // sans historique</span>
  };

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogin}</span>&gt;</span>Se connecter<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="57" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%94%8D-query-string--param%C3%A8tres"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Query string &amp; param√®tres</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> { useSearchParams } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchResults</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> searchParams = <span class="hljs-title function_">useSearchParams</span>();
  <span class="hljs-keyword">const</span> query = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;q&#x27;</span>);
  <span class="hljs-keyword">const</span> page = <span class="hljs-title class_">Number</span>(searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;page&#x27;</span>)) || <span class="hljs-number">1</span>;

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Recherche : {query}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Page {page}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="58" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-middleware--redirections"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>Middleware &amp; redirections</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// middleware.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/server&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">NextRequest</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/server&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">NextRequest</span></span>) {
  <span class="hljs-keyword">const</span> token = request.<span class="hljs-property">cookies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;token&#x27;</span>);
  
  <span class="hljs-keyword">if</span> (!token &amp;&amp; request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;/dashboard&#x27;</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">redirect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&#x27;/login&#x27;</span>, request.<span class="hljs-property">url</span>));
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">matcher</span>: <span class="hljs-string">&#x27;/dashboard/:path*&#x27;</span>,
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="59" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%8E%A8-breadcrumbs"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Breadcrumbs</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> { usePathname } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/link&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Breadcrumb</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> pathname = <span class="hljs-title function_">usePathname</span>();
  <span class="hljs-keyword">const</span> segments = pathname.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;/&#x27;</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Fil d&#x27;Ariane&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ol</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex gap-2&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>Accueil<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        {segments.map((segment, i) =&gt; {
          const href = &#x27;/&#x27; + segments.slice(0, i + 1).join(&#x27;/&#x27;);
          return (
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{href}</span>&gt;</span>
              / <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{href}</span>&gt;</span>{segment}<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          );
        })}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="60" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Utilisez <code>&lt;Link&gt;</code> pour les routes internes (pr√©chargement)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Ajoutez <code>aria-current=&quot;page&quot;</code> sur le lien actif</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Typez les <code>params</code> avec TypeScript</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Utilisez <code>middleware.ts</code> pour les redirections auth</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5">Pr√©f√©rez <code>router.replace()</code> pour les redirections sans historique</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="61" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Routing &amp; navigation&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Routing &amp; navigation</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Documentation Next.js</strong> ‚Äî Routing</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>App Router</strong> ‚Äî Layouts et pages</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Middleware</strong> ‚Äî Redirections et auth</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="62" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>

<h1 id="%F0%9F%93%8A-data-fetching"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Data Fetching</strong></h1>
<h2 id="ssr-ssg-isr-avec-app-router"><strong>SSR, SSG, ISR avec App Router</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Ma√Ætriser les diff√©rentes strat√©gies de r√©cup√©ration de donn√©es dans Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Choisir le bon mode</strong> selon SEO, fra√Æcheur, performance et co√ªt</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="63" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%8E%AF-d%C3%A9finitions-essentielles"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>D√©finitions essentielles</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>SSR</strong> ‚Äî Server-Side Rendering : HTML √† chaque requ√™te
<ul>
<li data-marpit-fragment="2"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> Fra√Æcheur/SEO <img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> Co√ªt serveur &amp; latence</li>
</ul>
</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="3"><strong>SSG</strong> ‚Äî Static Site Generation : HTML au build
<ul>
<li data-marpit-fragment="4"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> Tr√®s rapide via CDN <img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> Contenu potentiellement p√©rim√©</li>
</ul>
</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="5"><strong>ISR</strong> ‚Äî Incremental Static Regeneration : SSG + revalidation
<ul>
<li data-marpit-fragment="6"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> Excellent compromis perfs/fra√Æcheur</li>
</ul>
</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="64" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Choisir le <strong>bon mode de rendu</strong> selon le besoin</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">R√©cup√©rer des donn√©es c√¥t√© <strong>Server Components</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Configurer le <strong>cache</strong> avec <code>fetch()</code> et Route Segment Config</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Mettre en place le <strong>streaming</strong> avec Suspense</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="65" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%97%BA%EF%B8%8F-panorama--quand-choisir-quoi"><img class="emoji" draggable="false" alt="üó∫Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5fa.svg" data-marp-twemoji=""/> <strong>Panorama : Quand choisir quoi ?</strong></h1>
<div class="fragment fade-in-up delay-1">
<table>
<thead>
<tr>
<th>Besoin</th>
<th>SEO</th>
<th>Fra√Æcheur</th>
<th>Co√ªt</th>
<th>Recommandation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Page marketing</td>
<td><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/></td>
<td>Faible</td>
<td><img class="emoji" draggable="false" alt="üí≤" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b2.svg" data-marp-twemoji=""/> faible</td>
<td><strong>SSG</strong></td>
</tr>
<tr>
<td>Blog, catalogue</td>
<td><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/></td>
<td>Moyenne</td>
<td><img class="emoji" draggable="false" alt="üí≤" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b2.svg" data-marp-twemoji=""/> faible</td>
<td><strong>ISR</strong></td>
</tr>
<tr>
<td>Dashboard live</td>
<td>Moyen</td>
<td><strong>√âlev√©e</strong></td>
<td><img class="emoji" draggable="false" alt="üí≤" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b2.svg" data-marp-twemoji=""/><img class="emoji" draggable="false" alt="üí≤" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b2.svg" data-marp-twemoji=""/> moyen</td>
<td><strong>SSR</strong></td>
</tr>
<tr>
<td>UI interactive</td>
<td><img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/></td>
<td><strong>√âlev√©e</strong></td>
<td><img class="emoji" draggable="false" alt="üí≤" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b2.svg" data-marp-twemoji=""/> faible</td>
<td><strong>CSR</strong></td>
</tr>
</tbody>
</table>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="66" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%94%A7-data-fetching-c%C3%B4t%C3%A9-serveur"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Data fetching c√¥t√© serveur</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="avec-cache-isr">Avec cache (ISR)</h3>
<pre><code class="language-tsx"><span class="hljs-comment">// src/app/products/page.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revalidate = <span class="hljs-number">3600</span>; <span class="hljs-comment">// 1h</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductsPage</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;https://api.example.com/products&#x27;</span>, {
    <span class="hljs-attr">next</span>: { <span class="hljs-attr">tags</span>: [<span class="hljs-string">&#x27;products&#x27;</span>] }
  });
  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Failed to load&#x27;</span>);
  <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ProductList</span> <span class="hljs-attr">products</span>=<span class="hljs-string">{products}</span> /&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="67" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%94%A5-ssr-strict-no-store"><img class="emoji" draggable="false" alt="üî•" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f525.svg" data-marp-twemoji=""/> <strong>SSR strict (no-store)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DashboardPage</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;https://api.example.com/dashboard&#x27;</span>, {
    <span class="hljs-attr">cache</span>: <span class="hljs-string">&#x27;no-store&#x27;</span>  <span class="hljs-comment">// Toujours frais</span>
  });
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Dashboard</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>;
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Requ√™te serveur √† <strong>chaque</strong> visite</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="68" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-route-segment-config"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Route Segment Config</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// src/app/blog/page.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revalidate = <span class="hljs-number">600</span>;           <span class="hljs-comment">// ISR : 10 min</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">&#x27;force-static&#x27;</span>;   <span class="hljs-comment">// Force SSG</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> runtime = <span class="hljs-string">&#x27;edge&#x27;</span>;           <span class="hljs-comment">// Edge runtime</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="options-cl%C3%A9s">Options cl√©s</h3>
<ul>
<li data-marpit-fragment="1"><code>revalidate</code> ‚Äî Dur√©e de cache (ISR)</li>
<li data-marpit-fragment="2"><code>dynamic</code> ‚Äî Force SSG ou SSR</li>
<li data-marpit-fragment="3"><code>runtime</code> ‚Äî Node.js ou Edge</li>
<li data-marpit-fragment="4"><code>fetchCache</code> ‚Äî Strat√©gie de cache globale</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="69" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%8F%B7%EF%B8%8F-revalidation-par-tags"><img class="emoji" draggable="false" alt="üè∑Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3f7.svg" data-marp-twemoji=""/> <strong>Revalidation par tags</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="marquage-lors-du-fetch">Marquage lors du fetch</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;https://api.example.com/products&#x27;</span>, {
  <span class="hljs-attr">next</span>: { <span class="hljs-attr">tags</span>: [<span class="hljs-string">&#x27;products&#x27;</span>] }
});
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="invalidation-via-api-route">Invalidation via API Route</h3>
<pre><code class="language-ts"><span class="hljs-comment">// app/api/revalidate/route.ts</span>
<span class="hljs-keyword">import</span> { revalidateTag } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/cache&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title function_">revalidateTag</span>(<span class="hljs-string">&#x27;products&#x27;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">revalidated</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="70" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%8C%8A-streaming-avec-suspense"><img class="emoji" draggable="false" alt="üåä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f30a.svg" data-marp-twemoji=""/> <strong>Streaming avec Suspense</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Ma page<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">SlowComponent</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SlowComponent</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;...&#x27;</span>); <span class="hljs-comment">// Lent</span>
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="71" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%E2%9A%A1-loading-ui"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Loading UI</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="fichier-loadingtsx">Fichier loading.tsx</h3>
<pre><code class="language-tsx"><span class="hljs-comment">// app/blog/loading.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Loading</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;animate-pulse&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;h-8 bg-gray-200 rounded w-1/2 mb-4&quot;</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;h-4 bg-gray-200 rounded w-full mb-2&quot;</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;h-4 bg-gray-200 rounded w-3/4&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> Affich√© automatiquement pendant le chargement</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="72" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%E2%9D%8C-gestion-derreurs"><img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> <strong>Gestion d'erreurs</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/blog/error.tsx</span>
<span class="hljs-string">&quot;use client&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Error</span>(<span class="hljs-params">{
  error,
  reset
}: {
  error: <span class="hljs-built_in">Error</span>;
  reset: () =&gt; <span class="hljs-built_in">void</span>;
}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Une erreur est survenue<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{error.message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{reset}</span>&gt;</span>R√©essayer<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="73" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%94%8D-react-query-c%C3%B4t%C3%A9-client"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>React Query c√¥t√© client</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> { useQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tanstack/react-query&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { data, isLoading, error } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;todos&#x27;</span>],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-title function_">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/todos&#x27;</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
    }
  });

  <span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Chargement...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Erreur<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>{data.map(todo =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>&gt;</span>{todo.title}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>)}<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="74" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%8E%AF-generatestaticparams-ssg"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>generateStaticParams (SSG)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/blog/[slug]/page.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateStaticParams</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;https://api.example.com/posts&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>());
  
  <span class="hljs-keyword">return</span> posts.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span> ({
    <span class="hljs-attr">slug</span>: post.<span class="hljs-property">slug</span>,
  }));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogPost</span>(<span class="hljs-params">{
  params
}: {
  params: { slug: <span class="hljs-built_in">string</span> }
}</span>) {
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{params.slug}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="75" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Utilisez <strong>ISR</strong> par d√©faut pour les contenus publics</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>SSR</strong> uniquement pour les donn√©es temps r√©el</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Ajoutez des <strong>tags</strong> pour l'invalidation cibl√©e</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Utilisez <strong>Suspense</strong> pour le streaming</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5">Combinez <strong>Server Components</strong> + <strong>React Query</strong> pour l'interactivit√©</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="76" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Data Fetching : SSR, SSG, ISR&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Data Fetching : SSR, SSG, ISR</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Documentation Next.js</strong> ‚Äî Data Fetching</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>React Query</strong> ‚Äî TanStack Query</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>App Router</strong> ‚Äî Caching &amp; Revalidation</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="77" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>

<h1 id="%F0%9F%94%84-gestion-d%C3%A9tat"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Gestion d'√©tat</strong></h1>
<h2 id="synchronisation-des-donn%C3%A9es"><strong>&amp; Synchronisation des donn√©es</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Ma√Ætriser la gestion d'√©tat avec Zustand et React Query</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Distinguer</strong> √©tat local UI, global client et serveur</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="78" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Distinguer <strong>√©tat local UI</strong>, <strong>√©tat global client</strong> et <strong>√©tat serveur</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Mettre en place un <strong>store global</strong> (Zustand) typ√© et performant</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer l'<strong>√©tat serveur</strong> avec <strong>React Query</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">√âviter les anti-patterns (double fetch, props drilling)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="79" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%97%BA%EF%B8%8F-guide-de-d%C3%A9cision"><img class="emoji" draggable="false" alt="üó∫Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5fa.svg" data-marp-twemoji=""/> <strong>Guide de d√©cision</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong><code>useState</code>/<code>useReducer</code></strong> : √âtats <strong>locaux</strong>, encapsul√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Contexte React</strong> : DI l√©g√®re (th√®me, i18n)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Zustand (global)</strong> : √âtats <strong>m√©tier client</strong> (panier, filtres)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>React Query (server)</strong> : Donn√©es <strong>distantes</strong> (cache, revalidation)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Ne mettez pas d'&quot;√©tat serveur&quot; dans un store global</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="80" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%8F%AA-store-global-avec-zustand"><img class="emoji" draggable="false" alt="üè™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ea.svg" data-marp-twemoji=""/> <strong>Store global avec Zustand</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="installation">Installation</h3>
<pre><code class="language-bash">npm i zustand
npm i -D immer
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="store-typ%C3%A9-minimal">Store typ√© minimal</h3>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { create } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zustand&#x27;</span>;
<span class="hljs-keyword">import</span> { immer } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zustand/middleware/immer&#x27;</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">CartItem</span> = { <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">qty</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span> };

<span class="hljs-keyword">type</span> <span class="hljs-title class_">CartState</span> = {
  <span class="hljs-attr">items</span>: <span class="hljs-title class_">CartItem</span>[];
  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">item</span>: <span class="hljs-title class_">CartItem</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">remove</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">clear</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">total</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span>;
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="81" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%8F%AA-store-global-avec-zustand-suite"><img class="emoji" draggable="false" alt="üè™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ea.svg" data-marp-twemoji=""/> <strong>Store global avec Zustand (suite)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCart = create&lt;<span class="hljs-title class_">CartState</span>&gt;()(
  <span class="hljs-title function_">immer</span>(<span class="hljs-function">(<span class="hljs-params">set, get</span>) =&gt;</span> ({
    <span class="hljs-attr">items</span>: [],
    <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> i = s.<span class="hljs-property">items</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">id</span> === item.<span class="hljs-property">id</span>);
      i ? i.<span class="hljs-property">qty</span> += item.<span class="hljs-property">qty</span> : s.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(item);
    }),
    <span class="hljs-attr">remove</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> {
      s.<span class="hljs-property">items</span> = s.<span class="hljs-property">items</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">id</span> !== id);
    }),
    <span class="hljs-attr">clear</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">items</span>: [] }),
    <span class="hljs-attr">total</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">get</span>().<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, i</span>) =&gt;</span> sum + i.<span class="hljs-property">price</span> * i.<span class="hljs-property">qty</span>, <span class="hljs-number">0</span>)
  }))
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="82" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%8E%AF-s%C3%A9lecteurs"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>S√©lecteurs</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { useCart } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/cart&#x27;</span>;
<span class="hljs-keyword">import</span> shallow <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zustand/shallow&#x27;</span>;

<span class="hljs-keyword">const</span> { total, count } = <span class="hljs-title function_">useCart</span>(<span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> ({
  <span class="hljs-attr">total</span>: s.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, i</span>) =&gt;</span> sum + i.<span class="hljs-property">price</span> * i.<span class="hljs-property">qty</span>, <span class="hljs-number">0</span>),
  <span class="hljs-attr">count</span>: s.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">n, i</span>) =&gt;</span> n + i.<span class="hljs-property">qty</span>, <span class="hljs-number">0</span>)
}), shallow);
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> S√©lectionnez <strong>la plus petite</strong> forme utile pour limiter les re-renders</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="83" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%92%BE-persistance"><img class="emoji" draggable="false" alt="üíæ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4be.svg" data-marp-twemoji=""/> <strong>Persistance</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { persist, createJSONStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zustand/middleware&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> usePrefs = <span class="hljs-title function_">create</span>(<span class="hljs-title function_">persist</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">theme</span>: <span class="hljs-string">&#x27;system&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;system&#x27;</span> | <span class="hljs-string">&#x27;dark&#x27;</span> | <span class="hljs-string">&#x27;light&#x27;</span>,
  <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">t</span>: <span class="hljs-string">&#x27;system&#x27;</span> | <span class="hljs-string">&#x27;dark&#x27;</span> | <span class="hljs-string">&#x27;light&#x27;</span></span>) =&gt;</span> <span class="hljs-title function_">set</span>({ <span class="hljs-attr">theme</span>: t })
}), {
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;prefs&#x27;</span>,
  <span class="hljs-attr">storage</span>: <span class="hljs-title function_">createJSONStorage</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">localStorage</span>)
}));
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Ne persistez <strong>jamais</strong> des tokens/secrets</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="84" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%8C%90-react-query--setup"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>React Query : Setup</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// src/app/providers.tsx</span>
<span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">QueryClient</span>, <span class="hljs-title class_">QueryClientProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tanstack/react-query&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ReactNode</span>, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Providers</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-keyword">const</span> [client] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryClient</span>({
    <span class="hljs-attr">defaultOptions</span>: {
      <span class="hljs-attr">queries</span>: {
        <span class="hljs-attr">staleTime</span>: <span class="hljs-number">60_000</span>,      <span class="hljs-comment">// 1 min</span>
        <span class="hljs-attr">gcTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60_000</span>,     <span class="hljs-comment">// 5 min</span>
      }
    }
  }));
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">QueryClientProvider</span> <span class="hljs-attr">client</span>=<span class="hljs-string">{client}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">QueryClientProvider</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="85" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%93%8A-queries"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Queries</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { useQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tanstack/react-query&#x27;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useProducts</span>(<span class="hljs-params"><span class="hljs-attr">page</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">q</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;products&#x27;</span>, { page, q }],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-title function_">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/products?page=<span class="hljs-subst">${page}</span>&amp;q=<span class="hljs-subst">${q}</span>`</span>);
      <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Failed to fetch&#x27;</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
    },
    <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60_000</span>,  <span class="hljs-comment">// 5 min</span>
    <span class="hljs-attr">gcTime</span>: <span class="hljs-number">10</span> * <span class="hljs-number">60_000</span>,    <span class="hljs-comment">// 10 min</span>
  });
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> La <strong>cl√©</strong> d√©termine le cache ‚Äî changez page/q ‚Üí nouvelle entr√©e</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="86" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%E2%9C%8F%EF%B8%8F-mutations"><img class="emoji" draggable="false" alt="‚úèÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/270f.svg" data-marp-twemoji=""/> <strong>Mutations</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { useMutation, useQueryClient } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tanstack/react-query&#x27;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useCreateProduct</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> queryClient = <span class="hljs-title function_">useQueryClient</span>();
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useMutation</span>({
    <span class="hljs-attr">mutationFn</span>: <span class="hljs-title function_">async</span> (<span class="hljs-attr">data</span>: <span class="hljs-title class_">ProductData</span>) =&gt; {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/products&#x27;</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data),
      });
      <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Failed to create&#x27;</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
    },
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
      queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;products&#x27;</span>] });
    }
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="87" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%E2%9A%A1-optimistic-updates"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Optimistic Updates</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">const</span> mutation = <span class="hljs-title function_">useMutation</span>({
  <span class="hljs-attr">mutationFn</span>: updateTodo,
  <span class="hljs-attr">onMutate</span>: <span class="hljs-title function_">async</span> (newTodo) =&gt; {
    <span class="hljs-keyword">await</span> queryClient.<span class="hljs-title function_">cancelQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;todos&#x27;</span>] });
    <span class="hljs-keyword">const</span> previous = queryClient.<span class="hljs-title function_">getQueryData</span>([<span class="hljs-string">&#x27;todos&#x27;</span>]);
    queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">&#x27;todos&#x27;</span>], <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">old</span>: <span class="hljs-title class_">Todo</span>[]</span>) =&gt;</span> 
      [...old, newTodo]
    );
    <span class="hljs-keyword">return</span> { previous };
  },
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err, newTodo, context</span>) =&gt;</span> {
    queryClient.<span class="hljs-title function_">setQueryData</span>([<span class="hljs-string">&#x27;todos&#x27;</span>], context.<span class="hljs-property">previous</span>);
  },
  <span class="hljs-attr">onSettled</span>: <span class="hljs-function">() =&gt;</span> {
    queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;todos&#x27;</span>] });
  }
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="88" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%94%84-pagination-infinie"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Pagination infinie</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { useInfiniteQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tanstack/react-query&#x27;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useProductsInfinite</span>(<span class="hljs-params"><span class="hljs-attr">q</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useInfiniteQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;products&#x27;</span>, <span class="hljs-string">&#x27;infinite&#x27;</span>, { q }],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-title function_">async</span> ({ pageParam = <span class="hljs-number">1</span> }) =&gt; {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/products?page=<span class="hljs-subst">${pageParam}</span>&amp;q=<span class="hljs-subst">${q}</span>`</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
    },
    <span class="hljs-attr">getNextPageParam</span>: <span class="hljs-function">(<span class="hljs-params">lastPage</span>) =&gt;</span> lastPage.<span class="hljs-property">nextPage</span>,
    <span class="hljs-attr">initialPageParam</span>: <span class="hljs-number">1</span>,
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="89" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%8C%90-synchronisation-avec-lurl"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>Synchronisation avec l'URL</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> { useSearchParams, useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> searchParams = <span class="hljs-title function_">useSearchParams</span>();
  <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();
  <span class="hljs-keyword">const</span> page = <span class="hljs-title class_">Number</span>(searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;page&#x27;</span>)) || <span class="hljs-number">1</span>;

  <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;products&#x27;</span>, { page }],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchProducts</span>(page)
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setPage</span> = (<span class="hljs-params"><span class="hljs-attr">p</span>: <span class="hljs-built_in">number</span></span>) =&gt; {
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">`/products?page=<span class="hljs-subst">${p}</span>`</span>);
  };
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="90" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Utilisez <strong>Zustand</strong> pour l'√©tat client (panier, prefs)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Utilisez <strong>React Query</strong> pour les donn√©es serveur</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Cl√©s de cache</strong> coh√©rentes et descriptives</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Invalidation</strong> apr√®s mutations</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Optimistic updates</strong> pour une UX r√©active</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Gestion d'√©tat &amp; synchronisation&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="91" style="--paginate:true;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Gestion d'√©tat &amp; synchronisation</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Zustand</strong> ‚Äî Documentation officielle</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>React Query (TanStack Query)</strong> ‚Äî tanstack.com/query</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>State Management Best Practices</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="92" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>

<h1 id="%E2%99%BF-accessibilit%C3%A9-a11y--pwa"><img class="emoji" draggable="false" alt="‚ôø" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/267f.svg" data-marp-twemoji=""/> <strong>Accessibilit√© (A11y) &amp; PWA</strong></h1>
<h2 id="interfaces-accessibles-et-progressives"><strong>Interfaces accessibles et progressives</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Construire des interfaces accessibles et transformer son app en PWA</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Accessibilit√©</strong> = utilisable par <strong>toutes</strong> et <strong>tous</strong></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="93" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Construire des interfaces <strong>accessibles</strong> (s√©mantique, clavier, lecteurs d'√©cran)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Tester avec <strong>Lighthouse</strong>, <strong>axe-core</strong>, <strong>jest-axe</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Transformer une app Next.js en <strong>PWA</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Mettre en place <strong>offline</strong>, Service Worker et strat√©gies de cache</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="94" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%8F%9B%EF%B8%8F-s%C3%A9mantique--structure"><img class="emoji" draggable="false" alt="üèõÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3db.svg" data-marp-twemoji=""/> <strong>S√©mantique &amp; structure</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/layout.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;fr&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#contenu&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;sr-only focus:not-sr-only&quot;</span>&gt;</span>
          Aller au contenu
        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;banner&quot;</span>&gt;</span>{/* logo, nav */}<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;Navigation principale&quot;</span>&gt;</span>{/* liens */}<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;contenu&quot;</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>¬© Mon app<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="95" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%E2%8C%A8%EF%B8%8F-navigation-clavier--focus"><img class="emoji" draggable="false" alt="‚å®Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2328.svg" data-marp-twemoji=""/> <strong>Navigation clavier &amp; focus</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="focus-visible">Focus visible</h3>
<pre><code class="language-css"><span class="hljs-selector-pseudo">:focus</span> { <span class="hljs-attribute">outline</span>: <span class="hljs-number">2px</span> solid; <span class="hljs-attribute">outline-offset</span>: <span class="hljs-number">2px</span>; }
<span class="hljs-selector-pseudo">:focus-visible</span> { <span class="hljs-attribute">outline</span>: <span class="hljs-number">3px</span> solid; }
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx">&lt;button className=<span class="hljs-string">&quot;focus:outline-none focus-visible:outline&quot;</span>&gt;
  <span class="hljs-title class_">Action</span>
&lt;/button&gt;
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> Testez <strong>tout au clavier</strong> (Tab, Entr√©e, √âchap)</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="96" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%8E%A8-contrastes--lisibilit%C3%A9"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Contrastes &amp; lisibilit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="ratios-wcag">Ratios WCAG</h3>
<ul>
<li data-marpit-fragment="1"><strong>AA</strong> : 4.5:1 (texte normal), 3:1 (texte large)</li>
<li data-marpit-fragment="2"><strong>AAA</strong> : 7:1 (texte normal), 4.5:1 (texte large)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="outils">Outils</h3>
<ul>
<li data-marpit-fragment="3"><strong>Lighthouse</strong> (DevTools)</li>
<li data-marpit-fragment="4"><strong>axe DevTools</strong> (extension)</li>
<li data-marpit-fragment="5"><strong>Contrast Checker</strong> en ligne</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="97" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%94%8D-tests-daccessibilit%C3%A9"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Tests d'accessibilit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="avec-jest-axe">Avec jest-axe</h3>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
<span class="hljs-keyword">import</span> { axe } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jest-axe&#x27;</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;no a11y violations&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> { container } = <span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span></span>);
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title function_">axe</span>(container);
  <span class="hljs-title function_">expect</span>(results).<span class="hljs-title function_">toHaveNoViolations</span>();
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="98" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%93%B1-pwa--manifest"><img class="emoji" draggable="false" alt="üì±" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4f1.svg" data-marp-twemoji=""/> <strong>PWA : Manifest</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-json"><span class="hljs-comment">// public/manifest.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mon Application&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;short_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MonApp&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Description de mon app&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;start_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;display&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;standalone&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;background_color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#ffffff&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;theme_color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#000000&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;icons&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;src&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/icons/icon-192.png&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;sizes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192x192&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;image/png&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;src&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/icons/icon-512.png&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;sizes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;512x512&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;image/png&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="99" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-service-worker"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Service Worker</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="installation-avec-next-pwa">Installation avec next-pwa</h3>
<pre><code class="language-bash">npm i next-pwa
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>
<span class="hljs-keyword">const</span> withPWA = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;next-pwa&#x27;</span>)({
  <span class="hljs-attr">dest</span>: <span class="hljs-string">&#x27;public&#x27;</span>,
  <span class="hljs-attr">disable</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;development&#x27;</span>,
});

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">withPWA</span>({
  <span class="hljs-comment">// votre config Next.js</span>
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="100" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%92%BE-strat%C3%A9gies-de-cache"><img class="emoji" draggable="false" alt="üíæ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4be.svg" data-marp-twemoji=""/> <strong>Strat√©gies de cache</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Cache First</strong> : Cache d'abord, r√©seau si absent (assets statiques)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Network First</strong> : R√©seau d'abord, cache si √©chec (donn√©es fra√Æches)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Stale While Revalidate</strong> : Cache imm√©diat + mise √† jour en arri√®re-plan</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="101" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%93%B4-mode-offline"><img class="emoji" draggable="false" alt="üì¥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4f4.svg" data-marp-twemoji=""/> <strong>Mode offline</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&quot;use client&quot;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">OfflineIndicator</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [isOnline, setIsOnline] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsOnline</span>(navigator.<span class="hljs-property">onLine</span>);
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleOnline</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setIsOnline</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleOffline</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setIsOnline</span>(<span class="hljs-literal">false</span>);
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;online&#x27;</span>, handleOnline);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;offline&#x27;</span>, handleOffline);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;online&#x27;</span>, handleOnline);
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;offline&#x27;</span>, handleOffline);
    };
  }, []);

  <span class="hljs-keyword">if</span> (isOnline) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-yellow-500 p-2&quot;</span>&gt;</span>Mode hors ligne<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="102" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%E2%9C%85-checklist-a11y--pwa"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist A11y &amp; PWA</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">HTML s√©mantique (landmarks, headings)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Navigation clavier compl√®te</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Contrastes conformes WCAG AA</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Manifest.json configur√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5">Service Worker actif</li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6">Mode offline fonctionnel</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="103" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Accessibilit√© &amp; PWA&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Accessibilit√© &amp; PWA</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>WCAG</strong> ‚Äî Web Content Accessibility Guidelines</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>axe DevTools</strong> ‚Äî Extension navigateur</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>next-pwa</strong> ‚Äî Documentation</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="104" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>

<h1 id="%F0%9F%93%9D-formulaires--validation"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Formulaires &amp; validation</strong></h1>
<h2 id="react-hook-form--zod--nextjs"><strong>React Hook Form + Zod + Next.js</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Ma√Ætriser les formulaires accessibles avec validation c√¥t√© client et serveur</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Client-side</strong> pour l'UX, <strong>Server-side</strong> pour la s√©curit√©</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="105" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Construire des <strong>formulaires accessibles</strong> avec <strong>React Hook Form</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Valider avec <strong>Zod</strong> (client et serveur)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer <strong>erreurs</strong>, <strong>√©tats</strong> et <strong>fichiers</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Utiliser les <strong>Server Actions</strong> de Next.js</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="106" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-installation"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Installation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i react-hook-form zod @hookform/resolvers
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="107" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%93%8B-formulaire-simple-rhf--zod"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Formulaire simple (RHF + Zod)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-hook-form&#x27;</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;
<span class="hljs-keyword">import</span> { zodResolver } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hookform/resolvers/zod&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">SignupSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">email</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">email</span>(<span class="hljs-string">&#x27;Email invalide&#x27;</span>),
  <span class="hljs-attr">password</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;8 caract√®res minimum&#x27;</span>),
  <span class="hljs-attr">newsletter</span>: z.<span class="hljs-title function_">boolean</span>().<span class="hljs-title function_">optional</span>()
});

<span class="hljs-keyword">type</span> <span class="hljs-title class_">SignupForm</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">SignupSchema</span>&gt;;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="108" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%93%8B-formulaire-simple-suite"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Formulaire simple (suite)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SignupForm</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { register, handleSubmit, <span class="hljs-attr">formState</span>: { errors, isSubmitting } } = 
    useForm&lt;<span class="hljs-title class_">SignupForm</span>&gt;({
      <span class="hljs-attr">resolver</span>: <span class="hljs-title function_">zodResolver</span>(<span class="hljs-title class_">SignupSchema</span>)
    });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-title class_">SignupForm</span></span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit(onSubmit)}</span> <span class="hljs-attr">noValidate</span>&gt;</span>
      {/* champs */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="109" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%8E%A8-champ-avec-erreur"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Champ avec erreur</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx">&lt;div&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span>Email<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
    <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;email&quot;</span> 
    <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> 
    {<span class="hljs-attr">...register</span>(&#x27;<span class="hljs-attr">email</span>&#x27;)} 
    <span class="hljs-attr">aria-invalid</span>=<span class="hljs-string">{!!errors.email}</span>
    <span class="hljs-attr">aria-describedby</span>=<span class="hljs-string">&quot;email-error&quot;</span>
  /&gt;</span></span>
  {errors.<span class="hljs-property">email</span> &amp;&amp; (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;email-error&quot;</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;alert&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-red-600 text-sm&quot;</span>&gt;</span>
      {errors.email.message}
    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  )}
&lt;/div&gt;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="110" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%E2%9A%A1-server-actions"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Server Actions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/actions/signup.ts</span>
<span class="hljs-string">&#x27;use server&#x27;</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">SignupSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">email</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">email</span>(),
  <span class="hljs-attr">password</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">8</span>)
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">signup</span>(<span class="hljs-params"><span class="hljs-attr">formData</span>: <span class="hljs-title class_">FormData</span></span>) {
  <span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">SignupSchema</span>.<span class="hljs-title function_">parse</span>({
    <span class="hljs-attr">email</span>: formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;email&#x27;</span>),
    <span class="hljs-attr">password</span>: formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;password&#x27;</span>)
  });
  
  <span class="hljs-comment">// logique m√©tier</span>
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> };
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="111" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%E2%9A%A1-server-actions-usage"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Server Actions (usage)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { signup } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/app/actions/signup&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SignupForm</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-title class_">SignupForm</span></span>) =&gt; {
    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;email&#x27;</span>, data.<span class="hljs-property">email</span>);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;password&#x27;</span>, data.<span class="hljs-property">password</span>);
    
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">signup</span>(formData);
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">success</span>) {
      <span class="hljs-comment">// Redirection ou message</span>
    }
  };
  
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit(onSubmit)}</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="112" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%93%A4-upload-de-fichiers"><img class="emoji" draggable="false" alt="üì§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e4.svg" data-marp-twemoji=""/> <strong>Upload de fichiers</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">FileSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">avatar</span>: z.<span class="hljs-title function_">instanceof</span>(<span class="hljs-title class_">FileList</span>).<span class="hljs-title function_">refine</span>(<span class="hljs-function"><span class="hljs-params">files</span> =&gt;</span> files.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>)
});

<span class="hljs-comment">// Dans le formulaire</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
  <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> 
  {<span class="hljs-attr">...register</span>(&#x27;<span class="hljs-attr">avatar</span>&#x27;)} 
  <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/*&quot;</span>
/&gt;</span></span>

<span class="hljs-comment">// Traitement</span>
<span class="hljs-keyword">const</span> file = data.<span class="hljs-property">avatar</span>[<span class="hljs-number">0</span>];
<span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;file&#x27;</span>, file);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="113" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%94%84-formulaire-multi-%C3%A9tapes"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Formulaire multi-√©tapes</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> [step, setStep] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">if</span> (step &lt; <span class="hljs-number">3</span>) {
    <span class="hljs-title function_">setStep</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s + <span class="hljs-number">1</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Envoi final</span>
  }
};

<span class="hljs-keyword">return</span> (
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    {step === 1 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Step1Fields</span> <span class="hljs-attr">register</span>=<span class="hljs-string">{register}</span> /&gt;</span>}
    {step === 2 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Step2Fields</span> <span class="hljs-attr">register</span>=<span class="hljs-string">{register}</span> /&gt;</span>}
    {step === 3 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Step3Fields</span> <span class="hljs-attr">register</span>=<span class="hljs-string">{register}</span> /&gt;</span>}
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="114" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Toujours <strong>valider c√¥t√© serveur</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>noValidate</strong> sur le form (validation React Hook Form)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>aria-invalid</strong> et <strong>aria-describedby</strong> pour l'accessibilit√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Messages d'erreur <strong>clairs et actionnables</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Disabled</strong> state pendant la soumission</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="115" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Formulaires &amp; validation avanc√©e&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Formulaires &amp; validation avanc√©e</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>React Hook Form</strong> ‚Äî Documentation officielle</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Zod</strong> ‚Äî Schema validation</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Next.js Server Actions</strong> ‚Äî Documentation</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="116" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>

<h1 id="%F0%9F%94%90-authentification--s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Authentification &amp; s√©curit√©</strong></h1>
<h2 id="sessions-oauth-rbac-et-protection"><strong>Sessions, OAuth, RBAC et protection</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
S√©curiser son application Next.js avec Auth.js et bonnes pratiques</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Authentification</strong> (qui ?) vs <strong>Autorisation</strong> (quoi ?)</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="117" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Choisir entre <strong>sessions cookies</strong> et <strong>tokens JWT</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Configurer <strong>Auth.js (NextAuth)</strong> avec l'App Router</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Prot√©ger routes et mutations (<strong>CSRF</strong>, <strong>rate-limit</strong>)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Impl√©menter <strong>OAuth</strong>, <strong>RBAC</strong>, et <strong>hash</strong> de mots de passe</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="118" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%97%BA%EF%B8%8F-sessions-vs-jwt"><img class="emoji" draggable="false" alt="üó∫Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5fa.svg" data-marp-twemoji=""/> <strong>Sessions vs JWT</strong></h1>
<div class="fragment fade-in-up delay-1">
<table>
<thead>
<tr>
<th>Crit√®re</th>
<th>Session cookie</th>
<th>JWT</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web (m√™me domaine)</td>
<td><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> Simplicit√©, HttpOnly</td>
<td><img class="emoji" draggable="false" alt="‚ö™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26aa.svg" data-marp-twemoji=""/> OK (en cookie)</td>
</tr>
<tr>
<td>R√©vocation</td>
<td><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> Facile (DB)</td>
<td><img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> Difficile</td>
</tr>
<tr>
<td>Multi-clients</td>
<td><img class="emoji" draggable="false" alt="‚ö™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26aa.svg" data-marp-twemoji=""/> Moins pratique</td>
<td><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> Tr√®s pratique</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Recommandation</strong> : cookie-session pour le Web, JWT si multi-clients</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="119" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-authjs--installation"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Auth.js : Installation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i next-auth
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="configuration">Configuration</h3>
<pre><code class="language-ts"><span class="hljs-comment">// src/auth.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">NextAuth</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-auth&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">GitHub</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-auth/providers/github&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { handlers, auth, signIn, signOut } = <span class="hljs-title class_">NextAuth</span>({
  <span class="hljs-attr">providers</span>: [
    <span class="hljs-title class_">GitHub</span>({
      <span class="hljs-attr">clientId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GITHUB_ID</span>,
      <span class="hljs-attr">clientSecret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GITHUB_SECRET</span>
    })
  ]
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="120" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%94%91-route-handlers"><img class="emoji" draggable="false" alt="üîë" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f511.svg" data-marp-twemoji=""/> <strong>Route handlers</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/auth/[...nextauth]/route.ts</span>
<span class="hljs-keyword">import</span> { handlers } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/auth&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">GET</span>, <span class="hljs-variable constant_">POST</span> } = handlers;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="121" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-prot%C3%A9ger-une-route"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>Prot√©ger une route</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="avec-middleware">Avec middleware</h3>
<pre><code class="language-ts"><span class="hljs-comment">// middleware.ts</span>
<span class="hljs-keyword">import</span> { auth } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/auth&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">auth</span>(<span class="hljs-function">(<span class="hljs-params">req</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (!req.<span class="hljs-property">auth</span> &amp;&amp; req.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;/dashboard&#x27;</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">redirect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&#x27;/login&#x27;</span>, req.<span class="hljs-property">url</span>));
  }
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">matcher</span>: [<span class="hljs-string">&#x27;/dashboard/:path*&#x27;</span>]
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="122" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%91%A4-login-par-identifiants"><img class="emoji" draggable="false" alt="üë§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f464.svg" data-marp-twemoji=""/> <strong>Login par identifiants</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Credentials</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-auth/providers/credentials&#x27;</span>;
<span class="hljs-keyword">import</span> bcrypt <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bcryptjs&#x27;</span>;

<span class="hljs-title class_">Credentials</span>({
  <span class="hljs-attr">authorize</span>: <span class="hljs-title function_">async</span> (credentials) =&gt; {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findUnique</span>({
      <span class="hljs-attr">where</span>: { <span class="hljs-attr">email</span>: credentials.<span class="hljs-property">email</span> }
    });
    
    <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">const</span> valid = <span class="hljs-keyword">await</span> bcrypt.<span class="hljs-title function_">compare</span>(
      credentials.<span class="hljs-property">password</span>,
      user.<span class="hljs-property">password</span>
    );
    
    <span class="hljs-keyword">if</span> (!valid) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">id</span>: user.<span class="hljs-property">id</span>, <span class="hljs-attr">email</span>: user.<span class="hljs-property">email</span> };
  }
})
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="123" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%8E%AD-rbac-contr%C3%B4le-par-r%C3%B4les"><img class="emoji" draggable="false" alt="üé≠" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ad.svg" data-marp-twemoji=""/> <strong>RBAC (contr√¥le par r√¥les)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// auth.ts</span>
<span class="hljs-attr">callbacks</span>: {
  <span class="hljs-attr">session</span>: <span class="hljs-title function_">async</span> ({ session, token }) =&gt; {
    session.<span class="hljs-property">user</span>.<span class="hljs-property">role</span> = token.<span class="hljs-property">role</span>;
    <span class="hljs-keyword">return</span> session;
  },
  <span class="hljs-attr">jwt</span>: <span class="hljs-title function_">async</span> ({ token, user }) =&gt; {
    <span class="hljs-keyword">if</span> (user) token.<span class="hljs-property">role</span> = user.<span class="hljs-property">role</span>;
    <span class="hljs-keyword">return</span> token;
  }
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-comment">// Dans un composant</span>
<span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">auth</span>();
<span class="hljs-keyword">if</span> (session?.<span class="hljs-property">user</span>?.<span class="hljs-property">role</span> !== <span class="hljs-string">&#x27;admin&#x27;</span>) {
  <span class="hljs-title function_">redirect</span>(<span class="hljs-string">&#x27;/unauthorized&#x27;</span>);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="124" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%94%92-hash-de-mots-de-passe"><img class="emoji" draggable="false" alt="üîí" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f512.svg" data-marp-twemoji=""/> <strong>Hash de mots de passe</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> bcrypt <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bcryptjs&#x27;</span>;

<span class="hljs-comment">// Lors de l&#x27;inscription</span>
<span class="hljs-keyword">const</span> hashedPassword = <span class="hljs-keyword">await</span> bcrypt.<span class="hljs-title function_">hash</span>(password, <span class="hljs-number">12</span>);
<span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">data</span>: { email, <span class="hljs-attr">password</span>: hashedPassword }
});

<span class="hljs-comment">// Lors de la connexion</span>
<span class="hljs-keyword">const</span> valid = <span class="hljs-keyword">await</span> bcrypt.<span class="hljs-title function_">compare</span>(password, user.<span class="hljs-property">password</span>);
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Jamais stocker de mots de passe en clair</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-marpit-fragments="2" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="125" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-protection-csrf"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>Protection CSRF</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="authjs-g%C3%A8re-automatiquement-csrf">Auth.js g√®re automatiquement CSRF</h3>
<ul>
<li data-marpit-fragment="1">Token CSRF dans les cookies</li>
<li data-marpit-fragment="2">V√©rification automatique</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="pour-les-server-actions">Pour les Server Actions</h3>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { headers } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/headers&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">myAction</span>(<span class="hljs-params"></span>) {
  <span class="hljs-string">&#x27;use server&#x27;</span>;
  <span class="hljs-keyword">const</span> headersList = <span class="hljs-title function_">headers</span>();
  <span class="hljs-keyword">const</span> origin = headersList.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;origin&#x27;</span>);
  <span class="hljs-comment">// V√©rifier l&#x27;origin</span>
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="126" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%8C%90-headers-de-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>Headers de s√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">headers</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">source</span>: <span class="hljs-string">&#x27;/:path*&#x27;</span>,
        <span class="hljs-attr">headers</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;X-Frame-Options&#x27;</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;DENY&#x27;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;X-Content-Type-Options&#x27;</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;nosniff&#x27;</span>
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;Referrer-Policy&#x27;</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;strict-origin-when-cross-origin&#x27;</span>
          }
        ]
      }
    ];
  }
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="127" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%E2%9C%85-checklist-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist s√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Mots de passe <strong>hash√©s</strong> (bcrypt/argon2)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>HTTPS</strong> en production</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Cookies <strong>HttpOnly</strong> et <strong>Secure</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Protection <strong>CSRF</strong> active</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Rate limiting</strong> sur les endpoints sensibles</li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6">Validation <strong>serveur</strong> syst√©matique</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="128" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Authentification &amp; s√©curit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Authentification &amp; s√©curit√©</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Auth.js</strong> ‚Äî next-auth.js.org</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>OWASP</strong> ‚Äî S√©curit√© web</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>bcryptjs</strong> ‚Äî Hash de mots de passe</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="129" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>

<h1 id="%E2%9A%A1-performance--optimisations"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Performance &amp; optimisations</strong></h1>
<h2 id="web-vitals-images-bundles-et-cache"><strong>Web Vitals, images, bundles et cache</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Mesurer et optimiser les performances de son application Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Mesurer</strong> (pas deviner) ‚Üí <strong>Optimiser</strong> ‚Üí <strong>Mesurer</strong> √† nouveau</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="130" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Mesurer</strong> la performance : Web Vitals (LCP, CLS, INP, TTFB)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Optimiser <strong>images</strong>, <strong>polices</strong> et <strong>bundles</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">R√©duire le <strong>JS c√¥t√© client</strong> (RSC, dynamic imports)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Acc√©l√©rer le <strong>data fetching</strong> (cache, ISR, Edge)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="131" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%93%8A-web-vitals"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Web Vitals</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>LCP</strong> (Largest Contentful Paint) : Affichage du contenu principal
<ul>
<li data-marpit-fragment="2"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> &lt; 2.5s</li>
</ul>
</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="3"><strong>CLS</strong> (Cumulative Layout Shift) : Stabilit√© visuelle
<ul>
<li data-marpit-fragment="4"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> &lt; 0.1</li>
</ul>
</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="5"><strong>INP</strong> (Interaction to Next Paint) : R√©activit√©
<ul>
<li data-marpit-fragment="6"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> &lt; 200ms</li>
</ul>
</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="7"><strong>TTFB</strong> (Time to First Byte) : Temps serveur
<ul>
<li data-marpit-fragment="8"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> &lt; 600ms</li>
</ul>
</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="132" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%94%8D-outils-de-mesure"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Outils de mesure</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="lighthouse-devtools">Lighthouse (DevTools)</h3>
<ul>
<li data-marpit-fragment="1">Audit complet (performance, SEO, a11y)</li>
<li data-marpit-fragment="2">Mode Mobile recommand√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="react-profiler">React Profiler</h3>
<ul>
<li data-marpit-fragment="3">Rep√©rer les re-renders inutiles</li>
<li data-marpit-fragment="4">Analyser les composants lents</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<h3 id="webpagetest">WebPageTest</h3>
<ul>
<li data-marpit-fragment="5">Tests multi-r√©gions</li>
<li data-marpit-fragment="6">M√©triques d√©taill√©es</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="133" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%96%BC%EF%B8%8F-optimisation-des-images"><img class="emoji" draggable="false" alt="üñºÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5bc.svg" data-marp-twemoji=""/> <strong>Optimisation des images</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/image&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Hero</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/images/hero.jpg&quot;</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Vue du produit&quot;</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{1600}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{900}</span>
      <span class="hljs-attr">priority</span>              // <span class="hljs-attr">Pour</span> <span class="hljs-attr">l</span>&#x27;<span class="hljs-attr">image</span> <span class="hljs-attr">hero</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;blur&quot;</span>
      <span class="hljs-attr">blurDataURL</span>=<span class="hljs-string">&quot;data:image/jpeg;base64,...&quot;</span>
      <span class="hljs-attr">sizes</span>=<span class="hljs-string">&quot;(max-width: 768px) 100vw, 50vw&quot;</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;rounded-2xl&quot;</span>
    /&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="134" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%96%BC%EF%B8%8F-images--bonnes-pratiques"><img class="emoji" draggable="false" alt="üñºÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5bc.svg" data-marp-twemoji=""/> <strong>Images : bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Dimensions</strong> connues ‚Üí pas de CLS</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><code>priority</code> sur <strong>UNE</strong> image (hero)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><code>sizes</code> pour le responsive</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Format <strong>WebP/AVIF</strong> automatique</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><code>loading=&quot;lazy&quot;</code> par d√©faut</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="135" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%94%A4-optimisation-des-polices"><img class="emoji" draggable="false" alt="üî§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f524.svg" data-marp-twemoji=""/> <strong>Optimisation des polices</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/layout.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Inter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/font/google&#x27;</span>;

<span class="hljs-keyword">const</span> inter = <span class="hljs-title class_">Inter</span>({ 
  <span class="hljs-attr">subsets</span>: [<span class="hljs-string">&#x27;latin&#x27;</span>],
  <span class="hljs-attr">display</span>: <span class="hljs-string">&#x27;swap&#x27;</span>,
  <span class="hljs-attr">variable</span>: <span class="hljs-string">&#x27;--font-inter&#x27;</span>
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;fr&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{inter.variable}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="136" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%93%A6-r%C3%A9duction-du-js-client"><img class="emoji" draggable="false" alt="üì¶" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e6.svg" data-marp-twemoji=""/> <strong>R√©duction du JS client</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="server-components-par-d%C3%A9faut">Server Components (par d√©faut)</h3>
<pre><code class="language-tsx"><span class="hljs-comment">// Pas de JS c√¥t√© client</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProducts</span>();
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{products.map(p =&gt; ...)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="dynamic-imports">Dynamic imports</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> dynamic <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/dynamic&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">HeavyChart</span> = <span class="hljs-title function_">dynamic</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/components/Chart&#x27;</span>), {
  <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">loading</span>: <span class="hljs-function">() =&gt;</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Skeleton</span> /&gt;</span></span>
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="137" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%8E%AF-code-splitting"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Code splitting</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="route-based-splitting-automatique">Route-based splitting (automatique)</h3>
<pre><code>app/
  page.tsx          # Bundle 1
  blog/
    page.tsx        # Bundle 2
  dashboard/
    page.tsx        # Bundle 3
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="component-based-splitting">Component-based splitting</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Modal</span> = <span class="hljs-title function_">dynamic</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/components/Modal&#x27;</span>));
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="138" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%92%BE-strat%C3%A9gies-de-cache"><img class="emoji" draggable="false" alt="üíæ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4be.svg" data-marp-twemoji=""/> <strong>Strat√©gies de cache</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="isr-incremental-static-regeneration">ISR (Incremental Static Regeneration)</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revalidate = <span class="hljs-number">3600</span>; <span class="hljs-comment">// 1h</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;...&#x27;</span>, {
    <span class="hljs-attr">next</span>: { <span class="hljs-attr">tags</span>: [<span class="hljs-string">&#x27;products&#x27;</span>] }
  });
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="headers-http">Headers HTTP</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">&#x27;force-static&#x27;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revalidate = <span class="hljs-number">600</span>;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="139" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%8C%90-edge-runtime"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>Edge Runtime</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> runtime = <span class="hljs-string">&#x27;edge&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// Code ex√©cut√© sur Edge</span>
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Ultra rapide <img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="avantages">Avantages</h3>
<ul>
<li data-marpit-fragment="1"><strong>Latence tr√®s basse</strong> (proche de l'utilisateur)</li>
<li data-marpit-fragment="2"><strong>Scalabilit√©</strong> automatique</li>
<li data-marpit-fragment="3"><strong>Cold starts</strong> quasi inexistants</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="140" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%94%84-m%C3%A9mo%C3%AFsation"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>M√©mo√Øsation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { cache } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">const</span> getUser = <span class="hljs-title function_">cache</span>(<span class="hljs-title function_">async</span> (<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>) =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/users/<span class="hljs-subst">${id}</span>`</span>);
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
});

<span class="hljs-comment">// M√™me requ√™te d√©dupliqu√©e</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-string">&#x27;123&#x27;</span>);
  <span class="hljs-keyword">const</span> sameUser = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-string">&#x27;123&#x27;</span>); <span class="hljs-comment">// Cache hit</span>
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="141" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%E2%9C%85-checklist-performance"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist performance</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Images</strong> optimis√©es (<code>&lt;Image&gt;</code>, formats modernes)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Polices</strong> auto-h√©berg√©es avec <code>next/font</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Server Components</strong> par d√©faut</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Dynamic imports</strong> pour les composants lourds</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>ISR</strong> pour les contenus publics</li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6"><strong>Edge Runtime</strong> pour la latence critique</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="142" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Performance &amp; optimisations&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Performance &amp; optimisations</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Web Vitals</strong> ‚Äî web.dev/vitals</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Lighthouse</strong> ‚Äî Chrome DevTools</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Next.js Performance</strong> ‚Äî Documentation officielle</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="143" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>

<h1 id="%F0%9F%A7%AA-tests--qualit%C3%A9"><img class="emoji" draggable="false" alt="üß™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9ea.svg" data-marp-twemoji=""/> <strong>Tests &amp; qualit√©</strong></h1>
<h2 id="unitaires-int%C3%A9gration-e2e"><strong>Unitaires, int√©gration, E2E</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Mettre en place une strat√©gie de tests compl√®te et automatis√©e</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Pyramide de tests</strong> : beaucoup d'unitaires, moins d'int√©gration, peu d'E2E</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="144" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Choisir les <strong>bons types de tests</strong> (unitaires, int√©gration, E2E)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Tester des <strong>Server/Client Components</strong> Next.js</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser <strong>Vitest/Jest</strong>, <strong>RTL</strong>, <strong>MSW</strong> et <strong>Playwright</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Mettre en place des <strong>mocks</strong> fiables et une strat√©gie de fixtures</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="145" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%93%8A-types-de-tests"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Types de tests</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="unitaire">Unitaire</h3>
<ul>
<li data-marpit-fragment="1">Teste <strong>une unit√©</strong> isol√©e (fonction, hook)</li>
<li data-marpit-fragment="2">Rapide ‚áí d√©tecte les r√©gressions logiques</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="int%C3%A9gration">Int√©gration</h3>
<ul>
<li data-marpit-fragment="3">Teste <strong>plusieurs pi√®ces ensemble</strong></li>
<li data-marpit-fragment="4">Plus lent, plus r√©aliste</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<h3 id="e2e">E2E</h3>
<ul>
<li data-marpit-fragment="5">Teste le <strong>parcours utilisateur</strong> complet</li>
<li data-marpit-fragment="6">Lents ‚áí peu nombreux mais critiques</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="146" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-stack-de-test-recommand%C3%A9e"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Stack de test recommand√©e</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash"><span class="hljs-comment"># Unit/Int√©gration</span>
npm i -D vitest @testing-library/react @testing-library/jest-dom jsdom msw

<span class="hljs-comment"># E2E</span>
npm i -D @playwright/test
npx playwright install
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="scripts-packagejson">Scripts package.json</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vitest --coverage&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;test:e2e&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;playwright test&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;qa&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm run lint &amp;&amp; npm run typecheck &amp;&amp; npm run test&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="147" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-configuration-vitest"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Configuration Vitest</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// vitest.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vitest/config&#x27;</span>;
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vitejs/plugin-react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">environment</span>: <span class="hljs-string">&#x27;jsdom&#x27;</span>,
    <span class="hljs-attr">setupFiles</span>: [<span class="hljs-string">&#x27;./tests/setup.ts&#x27;</span>],
    <span class="hljs-attr">coverage</span>: {
      <span class="hljs-attr">provider</span>: <span class="hljs-string">&#x27;v8&#x27;</span>,
      <span class="hljs-attr">reporter</span>: [<span class="hljs-string">&#x27;text&#x27;</span>, <span class="hljs-string">&#x27;html&#x27;</span>]
    }
  }
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="148" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%A7%AA-test-unitaire-fonction"><img class="emoji" draggable="false" alt="üß™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9ea.svg" data-marp-twemoji=""/> <strong>Test unitaire (fonction)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/utils.test.ts</span>
<span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vitest&#x27;</span>;
<span class="hljs-keyword">import</span> { formatPrice } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./utils&#x27;</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;formatPrice&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;formats price correctly&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatPrice</span>(<span class="hljs-number">1234.56</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&#x27;1 234,56 ‚Ç¨&#x27;</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;handles zero&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatPrice</span>(<span class="hljs-number">0</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&#x27;0,00 ‚Ç¨&#x27;</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;rounds to 2 decimals&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">formatPrice</span>(<span class="hljs-number">10.999</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&#x27;11,00 ‚Ç¨&#x27;</span>);
  });
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="149" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%E2%9A%9B%EF%B8%8F-test-de-composant-rtl"><img class="emoji" draggable="false" alt="‚öõÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/269b.svg" data-marp-twemoji=""/> <strong>Test de composant (RTL)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// components/Button.test.tsx</span>
<span class="hljs-keyword">import</span> { render, screen, fireEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@testing-library/react&#x27;</span>;
<span class="hljs-keyword">import</span> { describe, it, expect, vi } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vitest&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Button&#x27;</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Button&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;renders children&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Click me<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>);
    <span class="hljs-title function_">expect</span>(screen.<span class="hljs-title function_">getByText</span>(<span class="hljs-string">&#x27;Click me&#x27;</span>)).<span class="hljs-title function_">toBeInTheDocument</span>();
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;calls onClick when clicked&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> handleClick = vi.<span class="hljs-title function_">fn</span>();
    <span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>Click<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>);
    fireEvent.<span class="hljs-title function_">click</span>(screen.<span class="hljs-title function_">getByText</span>(<span class="hljs-string">&#x27;Click&#x27;</span>));
    <span class="hljs-title function_">expect</span>(handleClick).<span class="hljs-title function_">toHaveBeenCalledOnce</span>();
  });
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="150" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%8C%90-mock-r%C3%A9seau-msw"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>Mock r√©seau (MSW)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// tests/mocks/handlers.ts</span>
<span class="hljs-keyword">import</span> { http, <span class="hljs-title class_">HttpResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;msw&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> handlers = [
  http.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/products&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">HttpResponse</span>.<span class="hljs-title function_">json</span>([
      { <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Product 1&#x27;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">100</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Product 2&#x27;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">200</span> }
    ]);
  }),

  http.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/api/products&#x27;</span>, <span class="hljs-title function_">async</span> ({ request }) =&gt; {
    <span class="hljs-keyword">const</span> product = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">HttpResponse</span>.<span class="hljs-title function_">json</span>({ ...product, <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;3&#x27;</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">201</span> });
  })
];
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="151" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%8C%90-mock-r%C3%A9seau-setup"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>Mock r√©seau (setup)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// tests/setup.ts</span>
<span class="hljs-keyword">import</span> { beforeAll, afterEach, afterAll } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vitest&#x27;</span>;
<span class="hljs-keyword">import</span> { setupServer } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;msw/node&#x27;</span>;
<span class="hljs-keyword">import</span> { handlers } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./mocks/handlers&#x27;</span>;

<span class="hljs-keyword">const</span> server = <span class="hljs-title function_">setupServer</span>(...handlers);

<span class="hljs-title function_">beforeAll</span>(<span class="hljs-function">() =&gt;</span> server.<span class="hljs-title function_">listen</span>());
<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">() =&gt;</span> server.<span class="hljs-title function_">resetHandlers</span>());
<span class="hljs-title function_">afterAll</span>(<span class="hljs-function">() =&gt;</span> server.<span class="hljs-title function_">close</span>());
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="152" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%8E%AD-test-e2e-playwright"><img class="emoji" draggable="false" alt="üé≠" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ad.svg" data-marp-twemoji=""/> <strong>Test E2E (Playwright)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// tests/e2e/auth.spec.ts</span>
<span class="hljs-keyword">import</span> { test, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@playwright/test&#x27;</span>;

test.<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Authentication&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;user can login&#x27;</span>, <span class="hljs-title function_">async</span> ({ page }) =&gt; {
    <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">&#x27;/login&#x27;</span>);
    
    <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">fill</span>(<span class="hljs-string">&#x27;[name=&quot;email&quot;]&#x27;</span>, <span class="hljs-string">&#x27;user@example.com&#x27;</span>);
    <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">fill</span>(<span class="hljs-string">&#x27;[name=&quot;password&quot;]&#x27;</span>, <span class="hljs-string">&#x27;password123&#x27;</span>);
    <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">click</span>(<span class="hljs-string">&#x27;button[type=&quot;submit&quot;]&#x27;</span>);
    
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(page).<span class="hljs-title function_">toHaveURL</span>(<span class="hljs-string">&#x27;/dashboard&#x27;</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(page.<span class="hljs-title function_">locator</span>(<span class="hljs-string">&#x27;h1&#x27;</span>)).<span class="hljs-title function_">toContainText</span>(<span class="hljs-string">&#x27;Dashboard&#x27;</span>);
  });
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="153" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%93%B8-visual-regression-playwright"><img class="emoji" draggable="false" alt="üì∏" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4f8.svg" data-marp-twemoji=""/> <strong>Visual regression (Playwright)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;homepage looks correct&#x27;</span>, <span class="hljs-title function_">async</span> ({ page }) =&gt; {
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">&#x27;/&#x27;</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(page).<span class="hljs-title function_">toHaveScreenshot</span>(<span class="hljs-string">&#x27;homepage.png&#x27;</span>);
});
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> Les screenshots sont compar√©s automatiquement</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="154" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%94%8D-couverture-de-code"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Couverture de code</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm run <span class="hljs-built_in">test</span> -- --coverage
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="m%C3%A9triques">M√©triques</h3>
<ul>
<li data-marpit-fragment="1"><strong>Statements</strong> : % de lignes ex√©cut√©es</li>
<li data-marpit-fragment="2"><strong>Branches</strong> : % de branches (if/else) test√©es</li>
<li data-marpit-fragment="3"><strong>Functions</strong> : % de fonctions appel√©es</li>
<li data-marpit-fragment="4"><strong>Lines</strong> : % de lignes couvertes</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Un chiffre √©lev√© ne garantit pas la qualit√©</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="155" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Tester le <strong>comportement</strong>, pas l'impl√©mentation</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Queries RTL</strong> par r√¥le/texte (pas par classe)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Mocks</strong> r√©alistes avec MSW</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>E2E</strong> pour les parcours critiques uniquement</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>CI</strong> qui bloque si les tests √©chouent</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="156" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Tests &amp; qualit√©&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Tests &amp; qualit√©</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Vitest</strong> ‚Äî vitest.dev</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>React Testing Library</strong> ‚Äî testing-library.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Playwright</strong> ‚Äî playwright.dev</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>MSW</strong> ‚Äî mswjs.io</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="157" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>

<h1 id="%F0%9F%9A%80-cicd--d%C3%A9ploiement"><img class="emoji" draggable="false" alt="üöÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg" data-marp-twemoji=""/> <strong>CI/CD &amp; d√©ploiement</strong></h1>
<h2 id="automatisation-et-livraison-continue"><strong>Automatisation et livraison continue</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Mettre en place une cha√Æne CI/CD compl√®te pour Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Du push √† la prod</strong> : automatiser lint, tests, build et d√©ploiement</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="158" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Concevoir une <strong>cha√Æne CI/CD</strong> compl√®te</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">D√©ployer sur <strong>Vercel</strong> et via <strong>Docker</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer <strong>secrets</strong>, <strong>migrations</strong> et <strong>pr√©views</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">S√©curiser la pipeline (audit, SAST)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="159" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%93%8A-vue-densemble"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Vue d'ensemble</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="du-push-%C3%A0-la-production">Du push √† la production</h3>
<ol>
<li><strong>Push/PR</strong> ‚Üí CI : lint + tests + build</li>
<li><strong>Artefacts</strong> conserv√©s (build, coverage)</li>
<li><strong>D√©ploiement</strong> :
<ul>
<li>PR ‚Üí Preview (Vercel)</li>
<li><code>main</code> ‚Üí Production</li>
</ul>
</li>
<li><strong>Migrations</strong> DB automatiques</li>
<li><strong>Observation</strong> : Web Vitals, logs</li>
</ol>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-marpit-fragments="2" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="160" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%8C%BF-strat%C3%A9gie-git"><img class="emoji" draggable="false" alt="üåø" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f33f.svg" data-marp-twemoji=""/> <strong>Strat√©gie Git</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="trunk-based-development">Trunk-based development</h3>
<ul>
<li data-marpit-fragment="1">Petites PR fr√©quentes vers <code>main</code></li>
<li data-marpit-fragment="2">Branches <code>feat/&lt;sujet&gt;</code>, <code>fix/&lt;ticket&gt;</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="conventional-commits">Conventional Commits</h3>
<pre><code>feat: ajout du syst√®me de paiement
fix: correction du bug de panier
chore: mise √† jour des d√©pendances
docs: am√©lioration du README
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="161" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-github-actions--pipeline-standard"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>GitHub Actions : Pipeline standard</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-yaml"><span class="hljs-comment"># .github/workflows/ci.yml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">CI</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span> { <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>] }
  <span class="hljs-attr">pull_request:</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">checks:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
        <span class="hljs-attr">with:</span> { <span class="hljs-attr">node-version:</span> <span class="hljs-number">20</span>, <span class="hljs-attr">cache:</span> <span class="hljs-string">&#x27;npm&#x27;</span> }
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">lint</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">typecheck</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">test</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="162" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%A7%AA-tests-e2e-dans-la-ci"><img class="emoji" draggable="false" alt="üß™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9ea.svg" data-marp-twemoji=""/> <strong>Tests E2E dans la CI</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-yaml">  <span class="hljs-attr">e2e:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npx</span> <span class="hljs-string">playwright</span> <span class="hljs-string">install</span> <span class="hljs-string">--with-deps</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">build</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">test:e2e</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-artifact@v3</span>
        <span class="hljs-attr">if:</span> <span class="hljs-string">always()</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">playwright-report</span>
          <span class="hljs-attr">path:</span> <span class="hljs-string">playwright-report/</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="163" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%93%A6-cache-et-artefacts"><img class="emoji" draggable="false" alt="üì¶" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e6.svg" data-marp-twemoji=""/> <strong>Cache et artefacts</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="cache-des-d%C3%A9pendances">Cache des d√©pendances</h3>
<pre><code class="language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">node-version:</span> <span class="hljs-number">20</span>
    <span class="hljs-attr">cache:</span> <span class="hljs-string">&#x27;npm&#x27;</span>  <span class="hljs-comment"># Cache automatique</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="sauvegarder-le-build">Sauvegarder le build</h3>
<pre><code class="language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-artifact@v3</span>
  <span class="hljs-attr">with:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">nextjs-build</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">.next/</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="164" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%8C%90-d%C3%A9ploiement-vercel"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>D√©ploiement Vercel</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="installation">Installation</h3>
<pre><code class="language-bash">npm i -g vercel
vercel login
vercel
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="automatique-via-github">Automatique via GitHub</h3>
<ul>
<li data-marpit-fragment="1"><strong>PR</strong> ‚Üí Preview automatique</li>
<li data-marpit-fragment="2"><strong>main</strong> ‚Üí Production automatique</li>
<li data-marpit-fragment="3"><strong>Secrets</strong> g√©r√©s dans Vercel Dashboard</li>
<li data-marpit-fragment="4"><strong>Environnements</strong> (dev, preview, production)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="165" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%90%B3-d%C3%A9ploiement-docker"><img class="emoji" draggable="false" alt="üê≥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f433.svg" data-marp-twemoji=""/> <strong>D√©ploiement Docker</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-dockerfile"><span class="hljs-comment"># Dockerfile</span>
<span class="hljs-keyword">FROM</span> node:<span class="hljs-number">20</span>-alpine AS builder
<span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /app</span>
<span class="hljs-keyword">COPY</span><span class="language-bash"> package*.json ./</span>
<span class="hljs-keyword">RUN</span><span class="language-bash"> npm ci</span>
<span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span>
<span class="hljs-keyword">RUN</span><span class="language-bash"> npm run build</span>

<span class="hljs-keyword">FROM</span> node:<span class="hljs-number">20</span>-alpine AS runner
<span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /app</span>
<span class="hljs-keyword">ENV</span> NODE_ENV=production
<span class="hljs-keyword">COPY</span><span class="language-bash"> --from=builder /app/public ./public</span>
<span class="hljs-keyword">COPY</span><span class="language-bash"> --from=builder /app/.next/standalone ./</span>
<span class="hljs-keyword">COPY</span><span class="language-bash"> --from=builder /app/.next/static ./.next/static</span>

<span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">3000</span>
<span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;node&quot;</span>, <span class="hljs-string">&quot;server.js&quot;</span>]</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-marpit-fragments="2" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="166" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%94%90-gestion-des-secrets"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Gestion des secrets</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="github-secrets">GitHub Secrets</h3>
<ul>
<li data-marpit-fragment="1">Settings ‚Üí Secrets and variables ‚Üí Actions</li>
<li data-marpit-fragment="2">Nommer en <code>SCREAMING_CASE</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="usage-dans-le-workflow">Usage dans le workflow</h3>
<pre><code class="language-yaml"><span class="hljs-attr">env:</span>
  <span class="hljs-attr">DATABASE_URL:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.DATABASE_URL</span> <span class="hljs-string">}}</span>
  <span class="hljs-attr">API_KEY:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.API_KEY</span> <span class="hljs-string">}}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="167" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%94%84-migrations-automatiques"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Migrations automatiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="prisma-migrations">Prisma migrations</h3>
<pre><code class="language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">migrations</span>
  <span class="hljs-attr">run:</span> <span class="hljs-string">npx</span> <span class="hljs-string">prisma</span> <span class="hljs-string">migrate</span> <span class="hljs-string">deploy</span>
  <span class="hljs-attr">env:</span>
    <span class="hljs-attr">DATABASE_URL:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.DATABASE_URL</span> <span class="hljs-string">}}</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> Toujours en mode <strong>deploy</strong> (pas generate) en production</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="168" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-s%C3%A9curit%C3%A9-de-la-pipeline"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>S√©curit√© de la pipeline</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="audit-des-d%C3%A9pendances">Audit des d√©pendances</h3>
<pre><code class="language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">audit</span> <span class="hljs-string">--production</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="sast-analyse-statique">SAST (analyse statique)</h3>
<pre><code class="language-yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">CodeQL</span>
  <span class="hljs-attr">uses:</span> <span class="hljs-string">github/codeql-action/analyze@v2</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="169" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%93%8A-strat%C3%A9gies-de-d%C3%A9ploiement"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Strat√©gies de d√©ploiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="preview-deployments">Preview deployments</h3>
<ul>
<li data-marpit-fragment="1">Un par PR</li>
<li data-marpit-fragment="2">URL unique g√©n√©r√©e</li>
<li data-marpit-fragment="3">Commentaire automatique sur la PR</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="blue-green">Blue-Green</h3>
<ul>
<li data-marpit-fragment="4">Deux environnements identiques</li>
<li data-marpit-fragment="5">Switch instantan√©</li>
<li data-marpit-fragment="6">Rollback facile</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="170" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%E2%9C%85-checklist-cicd"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist CI/CD</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Lint</strong> + <strong>typecheck</strong> automatiques</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Tests <strong>unitaires</strong> + <strong>E2E</strong> dans la pipeline</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Artifacts</strong> sauvegard√©s (build, rapports)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Secrets</strong> g√©r√©s de mani√®re s√©curis√©e</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Preview</strong> automatique sur les PR</li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6"><strong>Migrations</strong> DB automatis√©es</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="171" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Next.js&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Next.js</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>GitHub Actions</strong> ‚Äî Documentation officielle</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Vercel</strong> ‚Äî vercel.com/docs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Docker</strong> ‚Äî Next.js avec Docker</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="172" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>

<h1 id="%F0%9F%93%8A-observabilit%C3%A9--monitoring"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Observabilit√© &amp; monitoring</strong></h1>
<h2 id="web-vitals-logs-traces-erreurs"><strong>Web Vitals, logs, traces, erreurs</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Mettre en place une observabilit√© compl√®te de son application Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Logs, m√©triques, traces</strong> : comprendre l'√©tat interne de l'app</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="173" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Mettre en place un <strong>RUM</strong> (Real User Monitoring) des Web Vitals</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Centraliser des <strong>logs structur√©s</strong> (JSON)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Capturer et suivre les <strong>erreurs</strong> (Sentry)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">D√©finir des <strong>SLI/SLO</strong> et alertes</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="174" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%93%88-web-vitals"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>Web Vitals</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="m%C3%A9triques-cl%C3%A9s">M√©triques cl√©s</h3>
<ul>
<li data-marpit-fragment="1"><strong>LCP</strong> (Largest Contentful Paint) : Plus gros contenu</li>
<li data-marpit-fragment="2"><strong>CLS</strong> (Cumulative Layout Shift) : Sauts de layout</li>
<li data-marpit-fragment="3"><strong>INP</strong> (Interaction to Next Paint) : R√©activit√©</li>
<li data-marpit-fragment="4"><strong>FCP</strong> (First Contentful Paint) : Premier contenu</li>
<li data-marpit-fragment="5"><strong>TTFB</strong> (Time To First Byte) : Temps serveur</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="175" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%93%8A-rum--collecte-c%C3%B4t%C3%A9-client"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>RUM : Collecte c√¥t√© client</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// src/app/rum/WebVitals.tsx</span>
<span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { onCLS, onFCP, onINP, onLCP, onTTFB } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;web-vitals&#x27;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">metric</span>) {
  <span class="hljs-keyword">const</span> body = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    <span class="hljs-attr">name</span>: metric.<span class="hljs-property">name</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(metric.<span class="hljs-property">value</span>),
    <span class="hljs-attr">rating</span>: metric.<span class="hljs-property">rating</span>
  });
  
  navigator.<span class="hljs-property">sendBeacon</span>?.(<span class="hljs-string">&#x27;/api/rum&#x27;</span>, body) ||
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/rum&#x27;</span>, { <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>, body, <span class="hljs-attr">keepalive</span>: <span class="hljs-literal">true</span> });
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WebVitals</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">onLCP</span>(send);
    <span class="hljs-title function_">onCLS</span>(send);
    <span class="hljs-title function_">onINP</span>(send);
  }, []);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="176" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%93%8A-rum--route-handler"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>RUM : Route handler</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/rum/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">req</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> metric = <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-comment">// Envoyer √† un service d&#x27;analytics</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;https://analytics.example.com/vitals&#x27;</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(metric)
  });
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="177" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%93%9D-logs-structur%C3%A9s"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Logs structur√©s</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/logger.ts</span>
<span class="hljs-keyword">import</span> pino <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pino&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> logger = <span class="hljs-title function_">pino</span>({
  <span class="hljs-attr">level</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">LOG_LEVEL</span> || <span class="hljs-string">&#x27;info&#x27;</span>,
  <span class="hljs-attr">formatters</span>: {
    <span class="hljs-attr">level</span>: <span class="hljs-function">(<span class="hljs-params">label</span>) =&gt;</span> ({ <span class="hljs-attr">level</span>: label })
  }
});

<span class="hljs-comment">// Usage</span>
logger.<span class="hljs-title function_">info</span>({ <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;123&#x27;</span>, <span class="hljs-attr">action</span>: <span class="hljs-string">&#x27;login&#x27;</span> }, <span class="hljs-string">&#x27;User logged in&#x27;</span>);
logger.<span class="hljs-title function_">error</span>({ err, requestId }, <span class="hljs-string">&#x27;Request failed&#x27;</span>);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="178" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%94%8D-corr%C3%A9lation-avec-request-id"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Corr√©lation avec Request-Id</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// middleware.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/server&#x27;</span>;
<span class="hljs-keyword">import</span> { nanoid } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;nanoid&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params">request</span>) {
  <span class="hljs-keyword">const</span> requestId = <span class="hljs-title function_">nanoid</span>();
  <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
  
  response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;X-Request-Id&#x27;</span>, requestId);
  
  <span class="hljs-keyword">return</span> response;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="179" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%90%9B-gestion-derreurs-avec-sentry"><img class="emoji" draggable="false" alt="üêõ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f41b.svg" data-marp-twemoji=""/> <strong>Gestion d'erreurs avec Sentry</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i @sentry/nextjs
npx @sentry/wizard -i nextjs
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-comment">// app/error.tsx</span>
<span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Sentry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@sentry/nextjs&#x27;</span>;
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Error</span>(<span class="hljs-params">{ error, reset }</span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">captureException</span>(error);
  }, [error]);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Une erreur est survenue<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{reset}</span>&gt;</span>R√©essayer<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="180" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%93%8A-m%C3%A9triques-prometheus"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>M√©triques Prometheus</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/metrics/route.ts</span>
<span class="hljs-keyword">import</span> { register } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;prom-client&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> metrics = <span class="hljs-keyword">await</span> register.<span class="hljs-title function_">metrics</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(metrics, {
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: register.<span class="hljs-property">contentType</span> }
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="181" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%8E%AF-slislo"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>SLI/SLO</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="service-level-indicators-sli">Service Level Indicators (SLI)</h3>
<ul>
<li data-marpit-fragment="1">Latence P95 &lt; 200ms</li>
<li data-marpit-fragment="2">Disponibilit√© &gt; 99.9%</li>
<li data-marpit-fragment="3">Taux d'erreur &lt; 1%</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="service-level-objectives-slo">Service Level Objectives (SLO)</h3>
<ul>
<li data-marpit-fragment="4">LCP &lt; 2.5s pour 95% des utilisateurs</li>
<li data-marpit-fragment="5">INP &lt; 200ms pour 90% des interactions</li>
<li data-marpit-fragment="6">Uptime &gt; 99.5% par mois</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="182" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%9A%A8-alertes"><img class="emoji" draggable="false" alt="üö®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6a8.svg" data-marp-twemoji=""/> <strong>Alertes</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="webhook-simple">Webhook simple</h3>
<pre><code class="language-ts"><span class="hljs-comment">// lib/alerts.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendAlert</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">SLACK_WEBHOOK_URL</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">text</span>: message })
  });
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">if</span> (errorRate &gt; <span class="hljs-number">0.05</span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendAlert</span>(<span class="hljs-string">&#x27;<img class="emoji" draggable="false" alt="üö®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6a8.svg" data-marp-twemoji=""/> Taux d&#x27;</span>erreur √©lev√©: <span class="hljs-string">&#x27; + errorRate);
}
</span></code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="183" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%E2%9C%85-checklist-observabilit%C3%A9"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist observabilit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Web Vitals</strong> collect√©s en production</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Logs</strong> structur√©s (JSON) avec Request-Id</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Erreurs</strong> captur√©es (Sentry)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Sourcemaps</strong> upload√©s pour le debug</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>SLI/SLO</strong> d√©finis</li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6"><strong>Alertes</strong> configur√©es</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="184" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√© &amp; monitoring&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√© &amp; monitoring</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Sentry</strong> ‚Äî sentry.io/for/nextjs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Web Vitals</strong> ‚Äî web.dev/vitals</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Pino</strong> ‚Äî getpino.io</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="185" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>

<h1 id="%F0%9F%8C%8D-internationalisation-i18n"><img class="emoji" draggable="false" alt="üåç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f30d.svg" data-marp-twemoji=""/> <strong>Internationalisation (i18n)</strong></h1>
<h2 id="applications-multi-langues-avec-nextjs"><strong>Applications multi-langues avec Next.js</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Cr√©er des applications Next.js multi-langues accessibles</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Locale</strong> = langue + conventions r√©gionales (fr-FR, en-US)</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="186" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Structurer un projet <strong>multi-langue</strong> (App Router)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Charger des <strong>traductions</strong> c√¥t√© serveur et client</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer <strong>pluriels</strong>, <strong>formatage</strong> (dates/nombres) et <strong>RTL</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">D√©tecter la locale et g√©rer le <strong>switcher</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="187" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%8F%97%EF%B8%8F-architecture-recommand%C3%A9e"><img class="emoji" draggable="false" alt="üèóÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3d7.svg" data-marp-twemoji=""/> <strong>Architecture recommand√©e</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code>src/
  app/
    [locale]/
      layout.tsx
      page.tsx
    api/
  messages/
    fr.json
    en.json
  i18n/
    locales.ts
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="188" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%93%81-fichiers-de-traductions"><img class="emoji" draggable="false" alt="üìÅ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c1.svg" data-marp-twemoji=""/> <strong>Fichiers de traductions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-json"><span class="hljs-comment">// messages/fr.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;nav&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;home&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Accueil&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;about&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;√Ä propos&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;contact&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Contact&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;greeting&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Bonjour {name}!&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;items&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;zero&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Aucun article&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;one&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1 article&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;other&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;{count} articles&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="189" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%94%A7-configuration-avec-next-intl"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Configuration avec next-intl</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i next-intl
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// i18n/request.ts</span>
<span class="hljs-keyword">import</span> { getRequestConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl/server&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">getRequestConfig</span>(<span class="hljs-title function_">async</span> ({ locale }) =&gt; ({
  <span class="hljs-attr">messages</span>: (<span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">`../messages/<span class="hljs-subst">${locale}</span>.json`</span>)).<span class="hljs-property">default</span>
}));
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="190" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%8C%90-layout-avec-locale"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>Layout avec locale</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/[locale]/layout.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextIntlClientProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl&#x27;</span>;
<span class="hljs-keyword">import</span> { getMessages } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl/server&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">LocaleLayout</span>(<span class="hljs-params">{ children, params: { locale } }</span>) {
  <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getMessages</span>();

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">{locale}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">NextIntlClientProvider</span> <span class="hljs-attr">messages</span>=<span class="hljs-string">{messages}</span>&gt;</span>
          {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">NextIntlClientProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="191" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%93%9D-utilisation-des-traductions"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Utilisation des traductions</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="server-component">Server Component</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { useTranslations } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HomePage</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> t = <span class="hljs-title function_">useTranslations</span>(<span class="hljs-string">&#x27;nav&#x27;</span>);
  
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{t(&#x27;home&#x27;)}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="avec-variables">Avec variables</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> t = <span class="hljs-title function_">useTranslations</span>();
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{t(&#x27;greeting&#x27;, { name: &#x27;Alice&#x27; })}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="192" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%94%A2-pluralisation"><img class="emoji" draggable="false" alt="üî¢" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f522.svg" data-marp-twemoji=""/> <strong>Pluralisation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> t = <span class="hljs-title function_">useTranslations</span>();

<span class="hljs-comment">// Automatique selon la locale</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{t(&#x27;items&#x27;, { count: 0 })}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>  <span class="hljs-comment">// &quot;Aucun article&quot;</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{t(&#x27;items&#x27;, { count: 1 })}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>  <span class="hljs-comment">// &quot;1 article&quot;</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{t(&#x27;items&#x27;, { count: 5 })}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>  <span class="hljs-comment">// &quot;5 articles&quot;</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="193" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%93%85-formatage-dates--nombres"><img class="emoji" draggable="false" alt="üìÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c5.svg" data-marp-twemoji=""/> <strong>Formatage dates &amp; nombres</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { useFormatter } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductCard</span>(<span class="hljs-params">{ price, date }</span>) {
  <span class="hljs-keyword">const</span> format = <span class="hljs-title function_">useFormatter</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{format.number(price, { style: &#x27;currency&#x27;, currency: &#x27;EUR&#x27; })}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{format.dateTime(date, { dateStyle: &#x27;long&#x27; })}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="194" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%94%84-switcher-de-langue"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Switcher de langue</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { usePathname, useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;
<span class="hljs-keyword">import</span> { useLocale } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">LanguageSwitcher</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> locale = <span class="hljs-title function_">useLocale</span>();
  <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();
  <span class="hljs-keyword">const</span> pathname = <span class="hljs-title function_">usePathname</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">switchLocale</span> = (<span class="hljs-params"><span class="hljs-attr">newLocale</span>: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">const</span> newPath = pathname.<span class="hljs-title function_">replace</span>(<span class="hljs-string">`/<span class="hljs-subst">${locale}</span>`</span>, <span class="hljs-string">`/<span class="hljs-subst">${newLocale}</span>`</span>);
    router.<span class="hljs-title function_">push</span>(newPath);
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{locale}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> switchLocale(e.target.value)}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;fr&quot;</span>&gt;</span><img class="emoji" draggable="false" alt="üá´" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f1eb.svg" data-marp-twemoji=""/> Fran√ßais<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><img class="emoji" draggable="false" alt="üá¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f1ec.svg" data-marp-twemoji=""/> English<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="195" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%8C%8D-middleware-de-d%C3%A9tection"><img class="emoji" draggable="false" alt="üåç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f30d.svg" data-marp-twemoji=""/> <strong>Middleware de d√©tection</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// middleware.ts</span>
<span class="hljs-keyword">import</span> createMiddleware <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl/middleware&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">createMiddleware</span>({
  <span class="hljs-attr">locales</span>: [<span class="hljs-string">&#x27;fr&#x27;</span>, <span class="hljs-string">&#x27;en&#x27;</span>],
  <span class="hljs-attr">defaultLocale</span>: <span class="hljs-string">&#x27;fr&#x27;</span>,
  <span class="hljs-attr">localePrefix</span>: <span class="hljs-string">&#x27;always&#x27;</span>
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">matcher</span>: [<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-string">&#x27;/(fr|en)/:path*&#x27;</span>]
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="196" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%94%8D-seo--hreflang"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>SEO : hreflang</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/[locale]/layout.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateMetadata</span>(<span class="hljs-params">{ params: { locale } }</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">alternates</span>: {
      <span class="hljs-attr">languages</span>: {
        <span class="hljs-string">&#x27;fr&#x27;</span>: <span class="hljs-string">&#x27;/fr&#x27;</span>,
        <span class="hljs-string">&#x27;en&#x27;</span>: <span class="hljs-string">&#x27;/en&#x27;</span>
      }
    }
  };
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="197" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%E2%86%94%EF%B8%8F-support-rtl-arabe-h%C3%A9breu"><img class="emoji" draggable="false" alt="‚ÜîÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2194.svg" data-marp-twemoji=""/> <strong>Support RTL (arabe, h√©breu)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> rtlLocales = [<span class="hljs-string">&#x27;ar&#x27;</span>, <span class="hljs-string">&#x27;he&#x27;</span>];
<span class="hljs-keyword">const</span> dir = rtlLocales.<span class="hljs-title function_">includes</span>(locale) ? <span class="hljs-string">&#x27;rtl&#x27;</span> : <span class="hljs-string">&#x27;ltr&#x27;</span>;

<span class="hljs-keyword">return</span> (
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">{locale}</span> <span class="hljs-attr">dir</span>=<span class="hljs-string">{dir}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="198" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Cl√©s</strong> descriptives et structur√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Fallback</strong> vers langue par d√©faut</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>TypeScript</strong> pour les cl√©s de traduction</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Formatage</strong> adapt√© √† chaque locale</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>SEO</strong> avec hreflang</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="199" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Internationalisation (i18n)&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Internationalisation (i18n)</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>next-intl</strong> ‚Äî next-intl-docs.vercel.app</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Format.js</strong> ‚Äî formatjs.io</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Unicode CLDR</strong> ‚Äî cldr.unicode.org</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="200" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>

<h1 id="%F0%9F%93%B0-contenu--cms-headless"><img class="emoji" draggable="false" alt="üì∞" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4f0.svg" data-marp-twemoji=""/> <strong>Contenu &amp; CMS headless</strong></h1>
<h2 id="gestion-de-contenu-d%C3%A9coupl%C3%A9e"><strong>Gestion de contenu d√©coupl√©e</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Int√©grer un CMS headless avec Next.js pour g√©rer le contenu dynamiquement</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Headless CMS</strong> = API de contenu sans interface de rendu</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="201" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Comprendre l'architecture <strong>CMS headless</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Int√©grer <strong>Contentful</strong>, <strong>Strapi</strong> ou <strong>Sanity</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser <strong>ISR</strong> pour la performance</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">G√©rer les <strong>webhooks</strong> de revalidation</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="202" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%8F%97%EF%B8%8F-cms-headless--avantages"><img class="emoji" draggable="false" alt="üèóÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3d7.svg" data-marp-twemoji=""/> <strong>CMS headless : avantages</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="d%C3%A9couplage-complet">D√©couplage complet</h3>
<ul>
<li data-marpit-fragment="1"><strong>Frontend</strong> : Next.js, React, Vue, mobile...</li>
<li data-marpit-fragment="2"><strong>Backend</strong> : API pure (REST/GraphQL)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="avantages">Avantages</h3>
<ul>
<li data-marpit-fragment="3"><strong>Flexibilit√©</strong> totale du frontend</li>
<li data-marpit-fragment="4"><strong>√âvolutivit√©</strong> ind√©pendante</li>
<li data-marpit-fragment="5"><strong>Multi-canal</strong> (web, mobile, IoT)</li>
<li data-marpit-fragment="6"><strong>Performance</strong> optimale</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-marpit-fragments="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="203" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-solutions-populaires"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Solutions populaires</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="contentful">Contentful</h3>
<ul>
<li data-marpit-fragment="1">API GraphQL/REST</li>
<li data-marpit-fragment="2">Interface intuitive</li>
<li data-marpit-fragment="3">CDN int√©gr√©</li>
<li data-marpit-fragment="4">Webhooks</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="strapi">Strapi</h3>
<ul>
<li data-marpit-fragment="5">Open source</li>
<li data-marpit-fragment="6">Self-hosted</li>
<li data-marpit-fragment="7">REST/GraphQL</li>
<li data-marpit-fragment="8">Personnalisable</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<h3 id="sanity">Sanity</h3>
<ul>
<li data-marpit-fragment="9">Temps r√©el</li>
<li data-marpit-fragment="10">Portable Text</li>
<li data-marpit-fragment="11">Studio personnalisable</li>
<li data-marpit-fragment="12">GROQ queries</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="204" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%94%A7-int%C3%A9gration-contentful"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Int√©gration Contentful</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i contentful
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/contentful.ts</span>
<span class="hljs-keyword">import</span> { createClient } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;contentful&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> client = <span class="hljs-title function_">createClient</span>({
  <span class="hljs-attr">space</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CONTENTFUL_SPACE_ID</span>!,
  <span class="hljs-attr">accessToken</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CONTENTFUL_ACCESS_TOKEN</span>!,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPosts</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">getEntries</span>({
    <span class="hljs-attr">content_type</span>: <span class="hljs-string">&#x27;blogPost&#x27;</span>,
    <span class="hljs-attr">order</span>: [<span class="hljs-string">&#x27;-fields.publishedDate&#x27;</span>]
  });
  <span class="hljs-keyword">return</span> response.<span class="hljs-property">items</span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="205" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%93%84-page-avec-isr"><img class="emoji" draggable="false" alt="üìÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c4.svg" data-marp-twemoji=""/> <strong>Page avec ISR</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/blog/page.tsx</span>
<span class="hljs-keyword">import</span> { getPosts } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/contentful&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revalidate = <span class="hljs-number">3600</span>; <span class="hljs-comment">// 1h</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BlogPage</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPosts</span>();

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Blog<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {posts.map(post =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{post.sys.id}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{post.fields.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{post.fields.excerpt}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="206" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%8E%AF-generatestaticparams"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>generateStaticParams</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/blog/[slug]/page.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateStaticParams</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPosts</span>();
  
  <span class="hljs-keyword">return</span> posts.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span> ({
    <span class="hljs-attr">slug</span>: post.<span class="hljs-property">fields</span>.<span class="hljs-property">slug</span>,
  }));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PostPage</span>(<span class="hljs-params">{ params }</span>) {
  <span class="hljs-keyword">const</span> post = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPostBySlug</span>(params.<span class="hljs-property">slug</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{post.fields.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">post.fields.content</span> }} /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="207" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%94%84-webhooks-de-revalidation"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Webhooks de revalidation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/revalidate/route.ts</span>
<span class="hljs-keyword">import</span> { revalidatePath } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/cache&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> secret = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;x-webhook-secret&#x27;</span>);
  
  <span class="hljs-keyword">if</span> (secret !== process.<span class="hljs-property">env</span>.<span class="hljs-property">WEBHOOK_SECRET</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Invalid secret&#x27;</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">401</span> });
  }

  <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">const</span> slug = body.<span class="hljs-property">fields</span>?.<span class="hljs-property">slug</span>;

  <span class="hljs-keyword">if</span> (slug) {
    <span class="hljs-title function_">revalidatePath</span>(<span class="hljs-string">`/blog/<span class="hljs-subst">${slug}</span>`</span>);
    <span class="hljs-title function_">revalidatePath</span>(<span class="hljs-string">&#x27;/blog&#x27;</span>);
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">revalidated</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="208" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%93%9D-rich-text-avec-contentful"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Rich Text avec Contentful</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { documentToReactComponents } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@contentful/rich-text-react-renderer&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">BLOCKS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@contentful/rich-text-types&#x27;</span>;

<span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">renderNode</span>: {
    [<span class="hljs-variable constant_">BLOCKS</span>.<span class="hljs-property">PARAGRAPH</span>]: <span class="hljs-function">(<span class="hljs-params">node, children</span>) =&gt;</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;my-4&quot;</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
    ),
    [<span class="hljs-variable constant_">BLOCKS</span>.<span class="hljs-property">HEADING_2</span>]: <span class="hljs-function">(<span class="hljs-params">node, children</span>) =&gt;</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-2xl font-bold mt-8 mb-4&quot;</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
    ),
  },
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RichTextContent</span>(<span class="hljs-params">{ content }</span>) {
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{documentToReactComponents(content, options)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="209" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%96%BC%EF%B8%8F-images-optimis%C3%A9es"><img class="emoji" draggable="false" alt="üñºÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5bc.svg" data-marp-twemoji=""/> <strong>Images optimis√©es</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/image&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ContentfulImage</span>(<span class="hljs-params">{ asset }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">https:</span>${<span class="hljs-attr">asset.fields.file.url</span>}`}
      <span class="hljs-attr">alt</span>=<span class="hljs-string">{asset.fields.title}</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">{asset.fields.file.details.image.width}</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{asset.fields.file.details.image.height}</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;blur&quot;</span>
      <span class="hljs-attr">blurDataURL</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">https:</span>${<span class="hljs-attr">asset.fields.file.url</span>}?<span class="hljs-attr">w</span>=<span class="hljs-string">10&amp;q</span>=<span class="hljs-string">10</span>`}
    /&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="210" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%94%8D-preview-mode"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Preview Mode</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/preview/route.ts</span>
<span class="hljs-keyword">import</span> { draftMode } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/headers&#x27;</span>;
<span class="hljs-keyword">import</span> { redirect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { searchParams } = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);
  <span class="hljs-keyword">const</span> secret = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;secret&#x27;</span>);
  <span class="hljs-keyword">const</span> slug = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;slug&#x27;</span>);

  <span class="hljs-keyword">if</span> (secret !== process.<span class="hljs-property">env</span>.<span class="hljs-property">PREVIEW_SECRET</span> || !slug) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Invalid&#x27;</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">401</span> });
  }

  <span class="hljs-title function_">draftMode</span>().<span class="hljs-title function_">enable</span>();
  <span class="hljs-title function_">redirect</span>(<span class="hljs-string">`/blog/<span class="hljs-subst">${slug}</span>`</span>);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="211" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%93%8A-typescript-avec-contentful"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>TypeScript avec Contentful</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// types/contentful.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Entry</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;contentful&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BlogPostFields</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">slug</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">excerpt</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">content</span>: <span class="hljs-title class_">Document</span>;
  <span class="hljs-attr">publishedDate</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">author</span>: <span class="hljs-title class_">Entry</span>&lt;<span class="hljs-title class_">AuthorFields</span>&gt;;
  <span class="hljs-attr">coverImage</span>: <span class="hljs-title class_">Asset</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">BlogPost</span> = <span class="hljs-title class_">Entry</span>&lt;<span class="hljs-title class_">BlogPostFields</span>&gt;;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="212" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Utiliser <strong>ISR</strong> pour la performance</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Webhooks</strong> pour l'invalidation cibl√©e</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>TypeScript</strong> pour typer le contenu</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Preview Mode</strong> pour les brouillons</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Images</strong> optimis√©es avec Next.js Image</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="213" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Contenu &amp; CMS headless&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Contenu &amp; CMS headless</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Contentful</strong> ‚Äî contentful.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Strapi</strong> ‚Äî strapi.io</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Sanity</strong> ‚Äî sanity.io</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="214" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>

<h1 id="%F0%9F%94%97-graphql--apis-externes"><img class="emoji" draggable="false" alt="üîó" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f517.svg" data-marp-twemoji=""/> <strong>GraphQL &amp; APIs externes</strong></h1>
<h2 id="consommer-des-apis-modernes"><strong>Consommer des APIs modernes</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Int√©grer GraphQL et APIs externes avec Next.js et React Query</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>GraphQL</strong> = Requ√™tes pr√©cises, un seul endpoint</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="215" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Comprendre <strong>GraphQL</strong> vs REST</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Utiliser <strong>Apollo Client</strong> ou <strong>urql</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©n√©rer des <strong>types TypeScript</strong> depuis le sch√©ma</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">G√©rer <strong>cache</strong>, <strong>pagination</strong> et <strong>optimistic updates</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="216" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%86%9A-graphql-vs-rest"><img class="emoji" draggable="false" alt="üÜö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f19a.svg" data-marp-twemoji=""/> <strong>GraphQL vs REST</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="rest">REST</h3>
<ul>
<li data-marpit-fragment="1">Multiples endpoints (<code>/users</code>, <code>/posts</code>)</li>
<li data-marpit-fragment="2">Over-fetching / Under-fetching</li>
<li data-marpit-fragment="3">Plusieurs requ√™tes pour donn√©es li√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="graphql">GraphQL</h3>
<ul>
<li data-marpit-fragment="4"><strong>Un seul endpoint</strong> <code>/graphql</code></li>
<li data-marpit-fragment="5"><strong>Requ√™tes pr√©cises</strong> (seulement les champs n√©cessaires)</li>
<li data-marpit-fragment="6"><strong>Relations</strong> en une requ√™te</li>
<li data-marpit-fragment="7"><strong>Typage fort</strong> avec sch√©ma</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="217" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-installation-apollo-client"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Installation Apollo Client</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i @apollo/client graphql
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-comment">// lib/apollo-client.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApolloClient</span>, <span class="hljs-title class_">InMemoryCache</span>, <span class="hljs-title class_">HttpLink</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@apollo/client&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloClient</span>({
  <span class="hljs-attr">link</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpLink</span>({
    <span class="hljs-attr">uri</span>: <span class="hljs-string">&#x27;https://api.example.com/graphql&#x27;</span>,
  }),
  <span class="hljs-attr">cache</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryCache</span>(),
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="218" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%94%A7-provider-apollo"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Provider Apollo</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/providers.tsx</span>
<span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApolloProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@apollo/client&#x27;</span>;
<span class="hljs-keyword">import</span> { client } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/apollo-client&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Providers</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ApolloProvider</span> <span class="hljs-attr">client</span>=<span class="hljs-string">{client}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ApolloProvider</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="219" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%93%9D-requ%C3%AAte-simple"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Requ√™te simple</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useQuery, gql } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@apollo/client&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GET_USERS</span> = gql`<span class="language-graphql">
  <span class="hljs-keyword">query</span> GetUsers <span class="hljs-punctuation">{</span>
    users <span class="hljs-punctuation">{</span>
      id
      name
      email
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
`</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { data, loading, error } = <span class="hljs-title function_">useQuery</span>(<span class="hljs-variable constant_">GET_USERS</span>);

  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Chargement...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Erreur: {error.message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {data.users.map(user =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="220" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%94%8D-requ%C3%AAte-avec-variables"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Requ√™te avec variables</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GET_USER</span> = gql`<span class="language-graphql">
  <span class="hljs-keyword">query</span> GetUser<span class="hljs-punctuation">(</span><span class="hljs-variable">$id</span>: ID<span class="hljs-punctuation">!</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    user<span class="hljs-punctuation">(</span><span class="hljs-symbol">id</span><span class="hljs-punctuation">:</span> <span class="hljs-variable">$id</span>) <span class="hljs-punctuation">{</span>
      id
      name
      email
      posts <span class="hljs-punctuation">{</span>
        id
        title
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
`</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useQuery</span>(<span class="hljs-variable constant_">GET_USER</span>, {
    <span class="hljs-attr">variables</span>: { <span class="hljs-attr">id</span>: userId }
  });

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data?.user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="221" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%E2%9C%8F%EF%B8%8F-mutations"><img class="emoji" draggable="false" alt="‚úèÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/270f.svg" data-marp-twemoji=""/> <strong>Mutations</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CREATE_POST</span> = gql`<span class="language-graphql">
  <span class="hljs-keyword">mutation</span> CreatePost<span class="hljs-punctuation">(</span><span class="hljs-variable">$input</span>: CreatePostInput<span class="hljs-punctuation">!</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    createPost<span class="hljs-punctuation">(</span><span class="hljs-symbol">input</span><span class="hljs-punctuation">:</span> <span class="hljs-variable">$input</span>) <span class="hljs-punctuation">{</span>
      id
      title
      content
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
`</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePostForm</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [createPost, { loading }] = <span class="hljs-title function_">useMutation</span>(<span class="hljs-variable constant_">CREATE_POST</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">createPost</span>({
      <span class="hljs-attr">variables</span>: {
        <span class="hljs-attr">input</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Mon article&#x27;</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">&#x27;...&#x27;</span> }
      }
    });
  };

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="222" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%94%84-refetch-et-cache-update"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Refetch et cache update</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> [createPost] = <span class="hljs-title function_">useMutation</span>(<span class="hljs-variable constant_">CREATE_POST</span>, {
  <span class="hljs-attr">refetchQueries</span>: [{ <span class="hljs-attr">query</span>: <span class="hljs-variable constant_">GET_POSTS</span> }],
  <span class="hljs-comment">// Ou mise √† jour manuelle du cache</span>
  <span class="hljs-title function_">update</span>(<span class="hljs-params">cache, { data: { createPost } }</span>) {
    cache.<span class="hljs-title function_">modify</span>({
      <span class="hljs-attr">fields</span>: {
        <span class="hljs-title function_">posts</span>(<span class="hljs-params">existingPosts = []</span>) {
          <span class="hljs-keyword">const</span> newPostRef = cache.<span class="hljs-title function_">writeFragment</span>({
            <span class="hljs-attr">data</span>: createPost,
            <span class="hljs-attr">fragment</span>: gql`<span class="language-graphql">
              <span class="hljs-keyword">fragment</span> NewPost <span class="hljs-keyword">on</span> Post <span class="hljs-punctuation">{</span>
                id
                title
              <span class="hljs-punctuation">}</span>
            `</span>
          });
          <span class="hljs-keyword">return</span> [...existingPosts, newPostRef];
        }
      }
    });
  }
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="223" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%93%84-pagination"><img class="emoji" draggable="false" alt="üìÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c4.svg" data-marp-twemoji=""/> <strong>Pagination</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GET_POSTS</span> = gql`<span class="language-graphql">
  <span class="hljs-keyword">query</span> GetPosts<span class="hljs-punctuation">(</span><span class="hljs-variable">$offset</span>: Int<span class="hljs-punctuation">!</span>, <span class="hljs-variable">$limit</span>: Int<span class="hljs-punctuation">!</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span>
    posts<span class="hljs-punctuation">(</span><span class="hljs-symbol">offset</span><span class="hljs-punctuation">:</span> <span class="hljs-variable">$offset</span>, <span class="hljs-symbol">limit</span><span class="hljs-punctuation">:</span> <span class="hljs-variable">$limit</span>) <span class="hljs-punctuation">{</span>
      id
      title
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
`</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PostList</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { data, fetchMore } = <span class="hljs-title function_">useQuery</span>(<span class="hljs-variable constant_">GET_POSTS</span>, {
    <span class="hljs-attr">variables</span>: { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">limit</span>: <span class="hljs-number">10</span> }
  });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadMore</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">fetchMore</span>({
      <span class="hljs-attr">variables</span>: { <span class="hljs-attr">offset</span>: data.<span class="hljs-property">posts</span>.<span class="hljs-property">length</span> }
    });
  };

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="224" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%8E%A8-g%C3%A9n%C3%A9ration-de-types"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>G√©n√©ration de types</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i -D @graphql-codegen/cli @graphql-codegen/typescript
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-yaml"><span class="hljs-comment"># codegen.yml</span>
<span class="hljs-attr">schema:</span> <span class="hljs-string">https://api.example.com/graphql</span>
<span class="hljs-attr">documents:</span> <span class="hljs-string">&#x27;src/**/*.graphql&#x27;</span>
<span class="hljs-attr">generates:</span>
  <span class="hljs-attr">src/types/graphql.ts:</span>
    <span class="hljs-attr">plugins:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">typescript</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">typescript-operations</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">typescript-react-apollo</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-3">
<pre><code class="language-bash">npx graphql-codegen
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="225" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%94%90-authentification"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Authentification</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { setContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@apollo/client/link/context&#x27;</span>;

<span class="hljs-keyword">const</span> authLink = <span class="hljs-title function_">setContext</span>(<span class="hljs-function">(<span class="hljs-params">_, { headers }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;token&#x27;</span>);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">headers</span>: {
      ...headers,
      <span class="hljs-attr">authorization</span>: token ? <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span> : <span class="hljs-string">&#x27;&#x27;</span>,
    }
  };
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloClient</span>({
  <span class="hljs-attr">link</span>: authLink.<span class="hljs-title function_">concat</span>(httpLink),
  <span class="hljs-attr">cache</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryCache</span>(),
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="226" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%8C%90-api-rest-avec-fetch"><img class="emoji" draggable="false" alt="üåê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f310.svg" data-marp-twemoji=""/> <strong>API REST avec fetch</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/api.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> fetcher&lt;T&gt;(
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">options</span>?: <span class="hljs-title class_">RequestInit</span>
): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${process.env.NEXT_PUBLIC_API_URL}</span><span class="hljs-subst">${url}</span>`</span>, {
    ...options,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
      ...options?.<span class="hljs-property">headers</span>,
    },
  });

  <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`API Error: <span class="hljs-subst">${res.status}</span>`</span>);
  }

  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="227" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%94%84-avec-react-query"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Avec React Query</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { useQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tanstack/react-query&#x27;</span>;
<span class="hljs-keyword">import</span> { fetcher } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/api&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useUsers</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;users&#x27;</span>],
    <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> fetcher&lt;<span class="hljs-title class_">User</span>[]&gt;(<span class="hljs-string">&#x27;/users&#x27;</span>)
  });
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { data, isLoading } = <span class="hljs-title function_">useUsers</span>();
  
  <span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Chargement...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>{data?.map(user =&gt; ...)}<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="228" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Fragments</strong> pour r√©utiliser les champs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Types g√©n√©r√©s</strong> pour la s√©curit√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Cache</strong> bien configur√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Error boundaries</strong> pour les erreurs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Pagination</strong> pour les grandes listes</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="229" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;GraphQL &amp; APIs externes&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">GraphQL &amp; APIs externes</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Apollo Client</strong> ‚Äî apollographql.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>GraphQL Code Generator</strong> ‚Äî the-guild.dev/graphql/codegen</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>urql</strong> ‚Äî formidable.com/open-source/urql</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="230" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>

<h1 id="%E2%9A%A1-temps-r%C3%A9el--websockets"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Temps r√©el &amp; WebSockets</strong></h1>
<h2 id="communication-bidirectionnelle"><strong>Communication bidirectionnelle</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Impl√©menter la communication temps r√©el avec WebSockets et Socket.IO</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>WebSocket</strong> = Canal bidirectionnel persistant</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="231" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Comprendre <strong>WebSockets</strong> vs HTTP polling</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Impl√©menter <strong>Socket.IO</strong> avec Next.js</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer <strong>reconnexion</strong> et <strong>√©tat de connexion</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Construire un <strong>chat</strong> ou syst√®me de <strong>notifications</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="232" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%86%9A-websocket-vs-http"><img class="emoji" draggable="false" alt="üÜö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f19a.svg" data-marp-twemoji=""/> <strong>WebSocket vs HTTP</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="http-polling">HTTP (polling)</h3>
<ul>
<li data-marpit-fragment="1">Requ√™te/r√©ponse classique</li>
<li data-marpit-fragment="2">Client interroge r√©guli√®rement</li>
<li data-marpit-fragment="3">Inefficace pour le temps r√©el</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="websocket">WebSocket</h3>
<ul>
<li data-marpit-fragment="4"><strong>Connexion persistante</strong> bidirectionnelle</li>
<li data-marpit-fragment="5"><strong>Push</strong> depuis le serveur</li>
<li data-marpit-fragment="6"><strong>Faible latence</strong></li>
<li data-marpit-fragment="7">Id√©al pour chat, notifications, jeux</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="233" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-installation-socketio"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Installation Socket.IO</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i socket.io socket.io-client
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="234" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%94%A7-serveur-socketio"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Serveur Socket.IO</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/socket/route.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Server</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;socket.io&#x27;</span>;

<span class="hljs-keyword">let</span> <span class="hljs-attr">io</span>: <span class="hljs-title class_">Server</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"><span class="hljs-attr">req</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">if</span> (!io) {
    <span class="hljs-keyword">const</span> httpServer = (req <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">socket</span>.<span class="hljs-property">server</span>;
    io = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>(httpServer, {
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/api/socket&#x27;</span>,
      <span class="hljs-attr">cors</span>: { <span class="hljs-attr">origin</span>: <span class="hljs-string">&#x27;*&#x27;</span> }
    });

    io.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Client connect√©:&#x27;</span>, socket.<span class="hljs-property">id</span>);

      socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        io.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;message&#x27;</span>, data);
      });

      socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;disconnect&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Client d√©connect√©:&#x27;</span>, socket.<span class="hljs-property">id</span>);
      });
    });
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="235" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%93%B1-client-socketio"><img class="emoji" draggable="false" alt="üì±" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4f1.svg" data-marp-twemoji=""/> <strong>Client Socket.IO</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// hooks/useSocket.ts</span>
<span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { io, <span class="hljs-title class_">Socket</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;socket.io-client&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useSocket</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [socket, setSocket] = useState&lt;<span class="hljs-title class_">Socket</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isConnected, setIsConnected] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> socketInstance = <span class="hljs-title function_">io</span>({
      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/api/socket&#x27;</span>,
    });

    socketInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connect&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setIsConnected</span>(<span class="hljs-literal">true</span>);
    });

    socketInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;disconnect&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setIsConnected</span>(<span class="hljs-literal">false</span>);
    });

    <span class="hljs-title function_">setSocket</span>(socketInstance);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      socketInstance.<span class="hljs-title function_">disconnect</span>();
    };
  }, []);

  <span class="hljs-keyword">return</span> { socket, isConnected };
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="236" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%92%AC-chat-simple"><img class="emoji" draggable="false" alt="üí¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ac.svg" data-marp-twemoji=""/> <strong>Chat simple</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { useSocket } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/hooks/useSocket&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Chat</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { socket, isConnected } = <span class="hljs-title function_">useSocket</span>();
  <span class="hljs-keyword">const</span> [messages, setMessages] = useState&lt;<span class="hljs-built_in">string</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [input, setInput] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;&#x27;</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!socket) <span class="hljs-keyword">return</span>;

    socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
      <span class="hljs-title function_">setMessages</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [...prev, msg]);
    });

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      socket.<span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;message&#x27;</span>);
    };
  }, [socket]);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">if</span> (socket &amp;&amp; input.<span class="hljs-title function_">trim</span>()) {
      socket.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;message&#x27;</span>, input);
      <span class="hljs-title function_">setInput</span>(<span class="hljs-string">&#x27;&#x27;</span>);
    }
  };
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="237" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%92%AC-chat-simple-suite"><img class="emoji" draggable="false" alt="üí¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ac.svg" data-marp-twemoji=""/> <strong>Chat simple (suite)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx">  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{isConnected ? &#x27;<img class="emoji" draggable="false" alt="üü¢" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f7e2.svg" data-marp-twemoji=""/> Connect√©&#x27; : &#x27;<img class="emoji" draggable="false" alt="üî¥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f534.svg" data-marp-twemoji=""/> D√©connect√©&#x27;}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;messages&quot;</span>&gt;</span>
        {messages.map((msg, i) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{msg}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{input}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setInput(e.target.value)}
        onKeyPress={(e) =&gt; e.key === &#x27;Enter&#x27; &amp;&amp; sendMessage()}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{sendMessage}</span>&gt;</span>Envoyer<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="238" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%8F%A0-rooms-salles"><img class="emoji" draggable="false" alt="üè†" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3e0.svg" data-marp-twemoji=""/> <strong>Rooms (salles)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Serveur</span>
io.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> {
  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;join-room&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">roomId</span>) =&gt;</span> {
    socket.<span class="hljs-title function_">join</span>(roomId);
    io.<span class="hljs-title function_">to</span>(roomId).<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;user-joined&#x27;</span>, socket.<span class="hljs-property">id</span>);
  });

  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;room-message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">{ roomId, message }</span>) =&gt;</span> {
    io.<span class="hljs-title function_">to</span>(roomId).<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;message&#x27;</span>, message);
  });

  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;leave-room&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">roomId</span>) =&gt;</span> {
    socket.<span class="hljs-title function_">leave</span>(roomId);
    io.<span class="hljs-title function_">to</span>(roomId).<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;user-left&#x27;</span>, socket.<span class="hljs-property">id</span>);
  });
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="239" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%94%94-notifications-temps-r%C3%A9el"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Notifications temps r√©el</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { useSocket } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/hooks/useSocket&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Notifications</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { socket } = <span class="hljs-title function_">useSocket</span>();
  <span class="hljs-keyword">const</span> [notifications, setNotifications] = useState&lt;<span class="hljs-title class_">Notification</span>[]&gt;([]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!socket) <span class="hljs-keyword">return</span>;

    socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;notification&#x27;</span>, <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">notif</span>: <span class="hljs-title class_">Notification</span></span>) =&gt;</span> {
      <span class="hljs-title function_">setNotifications</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [notif, ...prev]);
      
      <span class="hljs-comment">// Notification navigateur</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-string">&#x27;Notification&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span> &amp;&amp; <span class="hljs-title class_">Notification</span>.<span class="hljs-property">permission</span> === <span class="hljs-string">&#x27;granted&#x27;</span>) {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Notification</span>(notif.<span class="hljs-property">title</span>, {
          <span class="hljs-attr">body</span>: notif.<span class="hljs-property">message</span>
        });
      }
    });
  }, [socket]);

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="240" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%94%84-reconnexion-automatique"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Reconnexion automatique</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">const</span> socketInstance = <span class="hljs-title function_">io</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/api/socket&#x27;</span>,
  <span class="hljs-attr">reconnection</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">reconnectionDelay</span>: <span class="hljs-number">1000</span>,
  <span class="hljs-attr">reconnectionDelayMax</span>: <span class="hljs-number">5000</span>,
  <span class="hljs-attr">reconnectionAttempts</span>: <span class="hljs-number">5</span>,
});

socketInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;reconnect&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">attemptNumber</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Reconnect√© apr√®s&#x27;</span>, attemptNumber, <span class="hljs-string">&#x27;tentatives&#x27;</span>);
});

socketInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;reconnect_error&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Erreur de reconnexion:&#x27;</span>, error);
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="241" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%94%90-authentification"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Authentification</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Serveur</span>
io.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">socket, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> token = socket.<span class="hljs-property">handshake</span>.<span class="hljs-property">auth</span>.<span class="hljs-property">token</span>;
  
  <span class="hljs-keyword">if</span> (!token) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Authentication error&#x27;</span>));
  }
  
  <span class="hljs-comment">// V√©rifier le token</span>
  <span class="hljs-title function_">verifyToken</span>(token)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> {
      socket.<span class="hljs-property">data</span>.<span class="hljs-property">user</span> = user;
      <span class="hljs-title function_">next</span>();
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-title function_">next</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Invalid token&#x27;</span>)));
});
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// Client</span>
<span class="hljs-keyword">const</span> socket = <span class="hljs-title function_">io</span>({
  <span class="hljs-attr">auth</span>: {
    <span class="hljs-attr">token</span>: <span class="hljs-string">&#x27;votre-token&#x27;</span>
  }
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="242" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%93%8A-pr%C3%A9sence-utilisateurs"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Pr√©sence utilisateurs</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Serveur</span>
<span class="hljs-keyword">const</span> onlineUsers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

io.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> userId = socket.<span class="hljs-property">data</span>.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>;
  onlineUsers.<span class="hljs-title function_">set</span>(userId, socket.<span class="hljs-property">id</span>);
  
  io.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;users-online&#x27;</span>, <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(onlineUsers.<span class="hljs-title function_">keys</span>()));

  socket.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;disconnect&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    onlineUsers.<span class="hljs-title function_">delete</span>(userId);
    io.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;users-online&#x27;</span>, <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(onlineUsers.<span class="hljs-title function_">keys</span>()));
  });
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="243" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%E2%9A%A1-optimisations"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Optimisations</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="throttling">Throttling</h3>
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { throttle } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash&#x27;</span>;

<span class="hljs-keyword">const</span> sendPosition = <span class="hljs-title function_">throttle</span>(<span class="hljs-function">(<span class="hljs-params">pos</span>) =&gt;</span> {
  socket.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;position&#x27;</span>, pos);
}, <span class="hljs-number">100</span>); <span class="hljs-comment">// Max 10 fois par seconde</span>
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="binary-data">Binary data</h3>
<pre><code class="language-ts"><span class="hljs-comment">// Envoyer des donn√©es binaires (images, fichiers)</span>
socket.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;file&#x27;</span>, buffer);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="244" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Reconnexion</strong> automatique configur√©e</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Authentification</strong> des connexions</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Throttling</strong> pour limiter la fr√©quence</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Rooms</strong> pour isoler les messages</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Nettoyage</strong> des listeners au d√©montage</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="245" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Temps r√©el &amp; WebSockets&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Temps r√©el &amp; WebSockets</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Socket.IO</strong> ‚Äî socket.io</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>WebSocket API</strong> ‚Äî MDN Web Docs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Pusher</strong> ‚Äî Alternative h√©berg√©e</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="246" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>

<h1 id="%F0%9F%93%A4-upload-de-fichiers"><img class="emoji" draggable="false" alt="üì§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e4.svg" data-marp-twemoji=""/> <strong>Upload de fichiers</strong></h1>
<h2 id="optimisation-m%C3%A9dia"><strong>&amp; Optimisation m√©dia</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
G√©rer l'upload de fichiers et optimiser les m√©dias dans Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Upload s√©curis√©</strong> + <strong>Optimisation</strong> = Meilleure UX</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="247" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Impl√©menter l'<strong>upload de fichiers</strong> s√©curis√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Valider <strong>type</strong>, <strong>taille</strong> et <strong>contenu</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser <strong>Cloudinary</strong> ou <strong>S3</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Optimiser <strong>images</strong> et <strong>vid√©os</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="248" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%93%8B-formulaire-dupload"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Formulaire d'upload</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">FileUpload</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [file, setFile] = useState&lt;<span class="hljs-title class_">File</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [uploading, setUploading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleUpload</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">e</span>: <span class="hljs-title class_">React</span>.<span class="hljs-title class_">FormEvent</span></span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">if</span> (!file) <span class="hljs-keyword">return</span>;

    <span class="hljs-title function_">setUploading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;file&#x27;</span>, file);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/upload&#x27;</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
        <span class="hljs-attr">body</span>: formData,
      });
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Uploaded:&#x27;</span>, data.<span class="hljs-property">url</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setUploading</span>(<span class="hljs-literal">false</span>);
    }
  };
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="249" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%93%8B-formulaire-dupload-suite"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Formulaire d'upload (suite)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx">  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleUpload}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span>
        <span class="hljs-attr">accept</span>=<span class="hljs-string">&quot;image/*&quot;</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setFile(e.target.files?.[0] || null)}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!file</span> || <span class="hljs-attr">uploading</span>}&gt;</span>
        {uploading ? &#x27;Upload...&#x27; : &#x27;Envoyer&#x27;}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="250" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%94%A7-route-handler"><img class="emoji" draggable="false" alt="üîß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f527.svg" data-marp-twemoji=""/> <strong>Route handler</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/upload/route.ts</span>
<span class="hljs-keyword">import</span> { writeFile } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs/promises&#x27;</span>;
<span class="hljs-keyword">import</span> { join } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">formData</span>();
  <span class="hljs-keyword">const</span> file = data.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;file&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">File</span>;

  <span class="hljs-keyword">if</span> (!file) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;No file&#x27;</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">400</span> });
  }

  <span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">arrayBuffer</span>();
  <span class="hljs-keyword">const</span> buffer = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(bytes);

  <span class="hljs-keyword">const</span> path = <span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">&#x27;public/uploads&#x27;</span>, file.<span class="hljs-property">name</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">writeFile</span>(path, buffer);

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`/uploads/<span class="hljs-subst">${file.name}</span>`</span>,
    <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="251" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%E2%9C%85-validation"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Validation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_SIZE</span> = <span class="hljs-number">5</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 5MB</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ALLOWED_TYPES</span> = [<span class="hljs-string">&#x27;image/jpeg&#x27;</span>, <span class="hljs-string">&#x27;image/png&#x27;</span>, <span class="hljs-string">&#x27;image/webp&#x27;</span>];

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">formData</span>();
  <span class="hljs-keyword">const</span> file = data.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;file&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">File</span>;

  <span class="hljs-comment">// V√©rifier le type</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">ALLOWED_TYPES</span>.<span class="hljs-title function_">includes</span>(file.<span class="hljs-property">type</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>(
      { <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Type de fichier non autoris√©&#x27;</span> },
      { <span class="hljs-attr">status</span>: <span class="hljs-number">400</span> }
    );
  }

  <span class="hljs-comment">// V√©rifier la taille</span>
  <span class="hljs-keyword">if</span> (file.<span class="hljs-property">size</span> &gt; <span class="hljs-variable constant_">MAX_SIZE</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>(
      { <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Fichier trop volumineux&#x27;</span> },
      { <span class="hljs-attr">status</span>: <span class="hljs-number">400</span> }
    );
  }

  <span class="hljs-comment">// Upload...</span>
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="252" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%E2%98%81%EF%B8%8F-upload-vers-cloudinary"><img class="emoji" draggable="false" alt="‚òÅÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2601.svg" data-marp-twemoji=""/> <strong>Upload vers Cloudinary</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i cloudinary
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { v2 <span class="hljs-keyword">as</span> cloudinary } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;cloudinary&#x27;</span>;

cloudinary.<span class="hljs-title function_">config</span>({
  <span class="hljs-attr">cloud_name</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CLOUDINARY_CLOUD_NAME</span>,
  <span class="hljs-attr">api_key</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CLOUDINARY_API_KEY</span>,
  <span class="hljs-attr">api_secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">CLOUDINARY_API_SECRET</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">formData</span>();
  <span class="hljs-keyword">const</span> file = data.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;file&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">File</span>;

  <span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">await</span> file.<span class="hljs-title function_">arrayBuffer</span>();
  <span class="hljs-keyword">const</span> buffer = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(bytes);

  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    cloudinary.<span class="hljs-property">uploader</span>.<span class="hljs-title function_">upload_stream</span>({}, <span class="hljs-function">(<span class="hljs-params">error, result</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (error) <span class="hljs-title function_">reject</span>(error);
      <span class="hljs-keyword">else</span> <span class="hljs-title function_">resolve</span>(result);
    }).<span class="hljs-title function_">end</span>(buffer);
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">url</span>: result.<span class="hljs-property">secure_url</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="253" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%93%8A-barre-de-progression"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Barre de progression</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">FileUploadWithProgress</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [progress, setProgress] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleUpload</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">file</span>: <span class="hljs-title class_">File</span></span>) =&gt; {
    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();

    xhr.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;progress&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">lengthComputable</span>) {
        <span class="hljs-keyword">const</span> percent = (e.<span class="hljs-property">loaded</span> / e.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>;
        <span class="hljs-title function_">setProgress</span>(percent);
      }
    });

    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;file&#x27;</span>, file);

    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;/api/upload&#x27;</span>);
    xhr.<span class="hljs-title function_">send</span>(formData);
  };

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">progress</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{progress}</span> <span class="hljs-attr">max</span>=<span class="hljs-string">{100}</span> /&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="254" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%96%BC%EF%B8%8F-pr%C3%A9visualisation"><img class="emoji" draggable="false" alt="üñºÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5bc.svg" data-marp-twemoji=""/> <strong>Pr√©visualisation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> [preview, setPreview] = useState&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFileChange</span> = (<span class="hljs-params"><span class="hljs-attr">e</span>: <span class="hljs-title class_">React</span>.<span class="hljs-title class_">ChangeEvent</span>&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>?.[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file) <span class="hljs-keyword">return</span>;

  <span class="hljs-title function_">setFile</span>(file);

  <span class="hljs-comment">// Cr√©er une URL de pr√©visualisation</span>
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
  reader.<span class="hljs-property">onloadend</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setPreview</span>(reader.<span class="hljs-property">result</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>);
  };
  reader.<span class="hljs-title function_">readAsDataURL</span>(file);
};

<span class="hljs-keyword">return</span> (
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleFileChange}</span> /&gt;</span>
    {preview &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{preview}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Preview&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">{200}</span> /&gt;</span>}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="255" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%8E%AC-upload-de-vid%C3%A9os"><img class="emoji" draggable="false" alt="üé¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ac.svg" data-marp-twemoji=""/> <strong>Upload de vid√©os</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleVideoUpload</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">file</span>: <span class="hljs-title class_">File</span></span>) =&gt; {
  <span class="hljs-comment">// Upload vers un service de streaming</span>
  <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;video&#x27;</span>, file);

  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/video/upload&#x27;</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">body</span>: formData,
  });

  <span class="hljs-keyword">const</span> { playbackUrl } = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-keyword">return</span> playbackUrl;
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="256" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%94%84-upload-multiple"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Upload multiple</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> [files, setFiles] = useState&lt;<span class="hljs-title class_">File</span>[]&gt;([]);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMultipleUpload</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> uploads = files.<span class="hljs-title function_">map</span>(<span class="hljs-title function_">async</span> (file) =&gt; {
    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27;file&#x27;</span>, file);

    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/upload&#x27;</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
      <span class="hljs-attr">body</span>: formData,
    });

    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
  });

  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(uploads);
  <span class="hljs-keyword">return</span> results;
};

<span class="hljs-keyword">return</span> (
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span>
    <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span>
    <span class="hljs-attr">multiple</span>
    <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setFiles(Array.from(e.target.files || []))}
  /&gt;</span>
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="257" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%8E%A8-transformation-dimages"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Transformation d'images</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Avec sharp</span>
<span class="hljs-keyword">import</span> sharp <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;sharp&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">formData</span>();
  <span class="hljs-keyword">const</span> file = data.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;file&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">File</span>;

  <span class="hljs-keyword">const</span> buffer = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(<span class="hljs-keyword">await</span> file.<span class="hljs-title function_">arrayBuffer</span>());

  <span class="hljs-comment">// Redimensionner et optimiser</span>
  <span class="hljs-keyword">const</span> optimized = <span class="hljs-keyword">await</span> <span class="hljs-title function_">sharp</span>(buffer)
    .<span class="hljs-title function_">resize</span>(<span class="hljs-number">1200</span>, <span class="hljs-number">1200</span>, { <span class="hljs-attr">fit</span>: <span class="hljs-string">&#x27;inside&#x27;</span>, <span class="hljs-attr">withoutEnlargement</span>: <span class="hljs-literal">true</span> })
    .<span class="hljs-title function_">webp</span>({ <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span> })
    .<span class="hljs-title function_">toBuffer</span>();

  <span class="hljs-comment">// Sauvegarder ou upload</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="258" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%97%91%EF%B8%8F-suppression-de-fichiers"><img class="emoji" draggable="false" alt="üóëÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5d1.svg" data-marp-twemoji=""/> <strong>Suppression de fichiers</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/upload/[id]/route.ts</span>
<span class="hljs-keyword">import</span> { unlink } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs/promises&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DELETE</span>(<span class="hljs-params">
  <span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span>,
  { params }: { params: { id: <span class="hljs-built_in">string</span> } }
</span>) {
  <span class="hljs-keyword">const</span> filePath = <span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">&#x27;public/uploads&#x27;</span>, params.<span class="hljs-property">id</span>);

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">unlink</span>(filePath);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>(
      { <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;File not found&#x27;</span> },
      { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> }
    );
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="259" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Valider</strong> type, taille et contenu</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Noms de fichiers</strong> uniques (UUID)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Limiter la taille</strong> maximale</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Scanner</strong> les virus (ClamAV)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>CDN</strong> pour la distribution</li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6"><strong>Compression</strong> automatique</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="260" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Upload de fichiers &amp; optimisation m√©dia&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Upload de fichiers &amp; optimisation m√©dia</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Cloudinary</strong> ‚Äî cloudinary.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>AWS S3</strong> ‚Äî aws.amazon.com/s3</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>sharp</strong> ‚Äî sharp.pixelplumbing.com</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="261" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>

<h1 id="%F0%9F%8E%A8-design-system"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Design system</strong></h1>
<h2 id="ui-components"><strong>&amp; UI components</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Construire un design system coh√©rent et maintenable</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Design system</strong> = Biblioth√®que de composants + guidelines</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="262" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Comprendre l'architecture d'un <strong>design system</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Cr√©er des <strong>composants r√©utilisables</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser <strong>Tailwind</strong> ou <strong>CSS-in-JS</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Documenter avec <strong>Storybook</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="263" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%8F%97%EF%B8%8F-architecture-dun-design-system"><img class="emoji" draggable="false" alt="üèóÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3d7.svg" data-marp-twemoji=""/> <strong>Architecture d'un design system</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="couches">Couches</h3>
<ol>
<li><strong>Design tokens</strong> (couleurs, espacements, typo)</li>
<li><strong>Composants primitifs</strong> (Button, Input, Card)</li>
<li><strong>Composants compos√©s</strong> (Form, Modal, Navbar)</li>
<li><strong>Patterns</strong> (Login, Dashboard, List)</li>
</ol>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="264" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%8E%A8-design-tokens"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Design tokens</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// styles/tokens.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> colors = {
  <span class="hljs-attr">primary</span>: {
    <span class="hljs-number">50</span>: <span class="hljs-string">&#x27;#eff6ff&#x27;</span>,
    <span class="hljs-number">100</span>: <span class="hljs-string">&#x27;#dbeafe&#x27;</span>,
    <span class="hljs-comment">// ...</span>
    <span class="hljs-number">900</span>: <span class="hljs-string">&#x27;#1e3a8a&#x27;</span>,
  },
  <span class="hljs-attr">gray</span>: {
    <span class="hljs-comment">// ...</span>
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> spacing = {
  <span class="hljs-attr">xs</span>: <span class="hljs-string">&#x27;0.25rem&#x27;</span>,
  <span class="hljs-attr">sm</span>: <span class="hljs-string">&#x27;0.5rem&#x27;</span>,
  <span class="hljs-attr">md</span>: <span class="hljs-string">&#x27;1rem&#x27;</span>,
  <span class="hljs-attr">lg</span>: <span class="hljs-string">&#x27;1.5rem&#x27;</span>,
  <span class="hljs-attr">xl</span>: <span class="hljs-string">&#x27;2rem&#x27;</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> typography = {
  <span class="hljs-attr">fontFamily</span>: {
    <span class="hljs-attr">sans</span>: [<span class="hljs-string">&#x27;Inter&#x27;</span>, <span class="hljs-string">&#x27;system-ui&#x27;</span>, <span class="hljs-string">&#x27;sans-serif&#x27;</span>],
    <span class="hljs-attr">mono</span>: [<span class="hljs-string">&#x27;Fira Code&#x27;</span>, <span class="hljs-string">&#x27;monospace&#x27;</span>],
  },
  <span class="hljs-attr">fontSize</span>: {
    <span class="hljs-attr">xs</span>: <span class="hljs-string">&#x27;0.75rem&#x27;</span>,
    <span class="hljs-attr">sm</span>: <span class="hljs-string">&#x27;0.875rem&#x27;</span>,
    <span class="hljs-attr">base</span>: <span class="hljs-string">&#x27;1rem&#x27;</span>,
    <span class="hljs-attr">lg</span>: <span class="hljs-string">&#x27;1.125rem&#x27;</span>,
    <span class="hljs-attr">xl</span>: <span class="hljs-string">&#x27;1.25rem&#x27;</span>,
  }
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="265" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%94%98-composant-button"><img class="emoji" draggable="false" alt="üîò" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f518.svg" data-marp-twemoji=""/> <strong>Composant Button</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// components/ui/Button.tsx</span>
<span class="hljs-keyword">import</span> { forwardRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { cva, <span class="hljs-keyword">type</span> <span class="hljs-title class_">VariantProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;class-variance-authority&#x27;</span>;

<span class="hljs-keyword">const</span> buttonVariants = <span class="hljs-title function_">cva</span>(
  <span class="hljs-string">&#x27;inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none disabled:opacity-50&#x27;</span>,
  {
    <span class="hljs-attr">variants</span>: {
      <span class="hljs-attr">variant</span>: {
        <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;bg-primary text-white hover:bg-primary/90&#x27;</span>,
        <span class="hljs-attr">destructive</span>: <span class="hljs-string">&#x27;bg-red-500 text-white hover:bg-red-600&#x27;</span>,
        <span class="hljs-attr">outline</span>: <span class="hljs-string">&#x27;border border-gray-300 hover:bg-gray-100&#x27;</span>,
        <span class="hljs-attr">ghost</span>: <span class="hljs-string">&#x27;hover:bg-gray-100&#x27;</span>,
      },
      <span class="hljs-attr">size</span>: {
        <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;h-10 px-4 py-2&#x27;</span>,
        <span class="hljs-attr">sm</span>: <span class="hljs-string">&#x27;h-9 px-3&#x27;</span>,
        <span class="hljs-attr">lg</span>: <span class="hljs-string">&#x27;h-11 px-8&#x27;</span>,
      },
    },
    <span class="hljs-attr">defaultVariants</span>: {
      <span class="hljs-attr">variant</span>: <span class="hljs-string">&#x27;default&#x27;</span>,
      <span class="hljs-attr">size</span>: <span class="hljs-string">&#x27;default&#x27;</span>,
    },
  }
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="266" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%94%98-composant-button-suite"><img class="emoji" draggable="false" alt="üîò" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f518.svg" data-marp-twemoji=""/> <strong>Composant Button (suite)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ButtonProps</span>
  <span class="hljs-keyword">extends</span> <span class="hljs-title class_">React</span>.<span class="hljs-title class_">ButtonHTMLAttributes</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>&gt;,
    <span class="hljs-title class_">VariantProps</span>&lt;typeof buttonVariants&gt; {}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = forwardRef&lt;<span class="hljs-title class_">HTMLButtonElement</span>, <span class="hljs-title class_">ButtonProps</span>&gt;(
  <span class="hljs-function">(<span class="hljs-params">{ className, variant, size, ...props }, ref</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">{buttonVariants({</span> <span class="hljs-attr">variant</span>, <span class="hljs-attr">size</span>, <span class="hljs-attr">className</span> })}
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>
        {<span class="hljs-attr">...props</span>}
      /&gt;</span></span>
    );
  }
);

<span class="hljs-title class_">Button</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">&#x27;Button&#x27;</span>;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="267" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%93%9D-composant-input"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Composant Input</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// components/ui/Input.tsx</span>
<span class="hljs-keyword">import</span> { forwardRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">InputProps</span>
  <span class="hljs-keyword">extends</span> <span class="hljs-title class_">React</span>.<span class="hljs-title class_">InputHTMLAttributes</span>&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt; {
  <span class="hljs-attr">error</span>?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">label</span>?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Input</span> = forwardRef&lt;<span class="hljs-title class_">HTMLInputElement</span>, <span class="hljs-title class_">InputProps</span>&gt;(
  <span class="hljs-function">(<span class="hljs-params">{ className, error, label, ...props }, ref</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex flex-col gap-1&quot;</span>&gt;</span>
        {label &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm font-medium&quot;</span>&gt;</span>
            {label}
          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        )}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">flex</span> <span class="hljs-attr">h-10</span> <span class="hljs-attr">w-full</span> <span class="hljs-attr">rounded-md</span> <span class="hljs-attr">border</span> <span class="hljs-attr">px-3</span> <span class="hljs-attr">py-2</span> ${
            <span class="hljs-attr">error</span> ? &#x27;<span class="hljs-attr">border-red-500</span>&#x27; <span class="hljs-attr">:</span> &#x27;<span class="hljs-attr">border-gray-300</span>&#x27;
          } ${<span class="hljs-attr">className</span>}`}
          <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>
          {<span class="hljs-attr">...props</span>}
        /&gt;</span>
        {error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-sm text-red-500&quot;</span>&gt;</span>{error}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="268" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%83%8F-composant-card"><img class="emoji" draggable="false" alt="üÉè" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f0cf.svg" data-marp-twemoji=""/> <strong>Composant Card</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// components/ui/Card.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Card</span>(<span class="hljs-params">{ children, className = <span class="hljs-string">&#x27;&#x27;</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">rounded-lg</span> <span class="hljs-attr">border</span> <span class="hljs-attr">bg-white</span> <span class="hljs-attr">shadow-sm</span> ${<span class="hljs-attr">className</span>}`}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CardHeader</span>(<span class="hljs-params">{ children, className = <span class="hljs-string">&#x27;&#x27;</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">p-6</span> ${<span class="hljs-attr">className</span>}`}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CardContent</span>(<span class="hljs-params">{ children, className = <span class="hljs-string">&#x27;&#x27;</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">p-6</span> <span class="hljs-attr">pt-0</span> ${<span class="hljs-attr">className</span>}`}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CardFooter</span>(<span class="hljs-params">{ children, className = <span class="hljs-string">&#x27;&#x27;</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">flex</span> <span class="hljs-attr">items-center</span> <span class="hljs-attr">p-6</span> <span class="hljs-attr">pt-0</span> ${<span class="hljs-attr">className</span>}`}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="269" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%8E%AD-composant-modal"><img class="emoji" draggable="false" alt="üé≠" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ad.svg" data-marp-twemoji=""/> <strong>Composant Modal</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> { createPortal } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom&#x27;</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ModalProps</span> {
  <span class="hljs-attr">isOpen</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">onClose</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">{ isOpen, onClose, children }: <span class="hljs-title class_">ModalProps</span></span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (isOpen) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = <span class="hljs-string">&#x27;hidden&#x27;</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = <span class="hljs-string">&#x27;unset&#x27;</span>;
    };
  }, [isOpen]);

  <span class="hljs-keyword">if</span> (!isOpen) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="270" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%8E%AD-composant-modal-suite"><img class="emoji" draggable="false" alt="üé≠" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ad.svg" data-marp-twemoji=""/> <strong>Composant Modal (suite)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx">  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createPortal</span>(
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;fixed inset-0 z-50 flex items-center justify-center&quot;</span>&gt;</span>
      {/* Overlay */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;absolute inset-0 bg-black/50&quot;</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClose}</span>
      /&gt;</span>

      {/* Content */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;relative z-10 max-h-[90vh] max-w-lg overflow-auto rounded-lg bg-white p-6 shadow-xl&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClose}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;absolute right-4 top-4 text-gray-500 hover:text-gray-700&quot;</span>
        &gt;</span>
          ‚úï
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="271" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%93%9A-storybook"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Storybook</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npx storybook@latest init
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-comment">// components/ui/Button.stories.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Meta</span>, <span class="hljs-title class_">StoryObj</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@storybook/react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Button&#x27;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">meta</span>: <span class="hljs-title class_">Meta</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Button</span>&gt; = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;UI/Button&#x27;</span>,
  <span class="hljs-attr">component</span>: <span class="hljs-title class_">Button</span>,
  <span class="hljs-attr">tags</span>: [<span class="hljs-string">&#x27;autodocs&#x27;</span>],
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> meta;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Story</span> = <span class="hljs-title class_">StoryObj</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Button</span>&gt;;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Default</span>: <span class="hljs-title class_">Story</span> = {
  <span class="hljs-attr">args</span>: {
    <span class="hljs-attr">children</span>: <span class="hljs-string">&#x27;Button&#x27;</span>,
  },
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Destructive</span>: <span class="hljs-title class_">Story</span> = {
  <span class="hljs-attr">args</span>: {
    <span class="hljs-attr">variant</span>: <span class="hljs-string">&#x27;destructive&#x27;</span>,
    <span class="hljs-attr">children</span>: <span class="hljs-string">&#x27;Delete&#x27;</span>,
  },
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="272" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%8E%A8-th%C3%A8me-sombre"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Th√®me sombre</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/providers.tsx</span>
<span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-themes&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Providers</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span> <span class="hljs-attr">attribute</span>=<span class="hljs-string">&quot;class&quot;</span> <span class="hljs-attr">defaultTheme</span>=<span class="hljs-string">&quot;system&quot;</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-css"><span class="hljs-comment">/* globals.css */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--background</span>: <span class="hljs-number">0</span> <span class="hljs-number">0%</span> <span class="hljs-number">100%</span>;
  <span class="hljs-attr">--foreground</span>: <span class="hljs-number">222.2</span> <span class="hljs-number">84%</span> <span class="hljs-number">4.9%</span>;
}

<span class="hljs-selector-class">.dark</span> {
  <span class="hljs-attr">--background</span>: <span class="hljs-number">222.2</span> <span class="hljs-number">84%</span> <span class="hljs-number">4.9%</span>;
  <span class="hljs-attr">--foreground</span>: <span class="hljs-number">210</span> <span class="hljs-number">40%</span> <span class="hljs-number">98%</span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="273" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%8C%99-switcher-de-th%C3%A8me"><img class="emoji" draggable="false" alt="üåô" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f319.svg" data-marp-twemoji=""/> <strong>Switcher de th√®me</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-themes&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeToggle</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { theme, setTheme } = <span class="hljs-title function_">useTheme</span>();

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setTheme(theme === &#x27;dark&#x27; ? &#x27;light&#x27; : &#x27;dark&#x27;)}
      className=&quot;rounded-md p-2 hover:bg-gray-100 dark:hover:bg-gray-800&quot;
    &gt;
      {theme === &#x27;dark&#x27; ? &#x27;<img class="emoji" draggable="false" alt="üåû" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f31e.svg" data-marp-twemoji=""/>&#x27; : &#x27;<img class="emoji" draggable="false" alt="üåô" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f319.svg" data-marp-twemoji=""/>&#x27;}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="274" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-shadcnui"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>shadcn/ui</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="alternative-cl%C3%A9-en-main">Alternative cl√© en main</h3>
<pre><code class="language-bash">npx shadcn-ui@latest init
npx shadcn-ui@latest add button
npx shadcn-ui@latest add input
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="1"><strong>Composants</strong> copi√©s dans votre projet</li>
<li data-marpit-fragment="2"><strong>Personnalisables</strong> √† 100%</li>
<li data-marpit-fragment="3"><strong>Tailwind</strong> + <strong>Radix UI</strong></li>
<li data-marpit-fragment="4"><strong>Accessibles</strong> par d√©faut</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="275" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Tokens</strong> centralis√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Variants</strong> avec CVA</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>TypeScript</strong> strict</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Documentation</strong> Storybook</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Accessibilit√©</strong> d√®s la conception</li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6"><strong>Tests</strong> des composants</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="276" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Design system &amp; UI components&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Design system &amp; UI components</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>shadcn/ui</strong> ‚Äî ui.shadcn.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Radix UI</strong> ‚Äî radix-ui.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Storybook</strong> ‚Äî storybook.js.org</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>CVA</strong> ‚Äî cva.style</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="277" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>

<h1 id="%E2%9C%A8-animations"><img class="emoji" draggable="false" alt="‚ú®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2728.svg" data-marp-twemoji=""/> <strong>Animations</strong></h1>
<h2 id="micro-interactions"><strong>&amp; Micro-interactions</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Cr√©er des interfaces fluides et engageantes avec des animations</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>60fps</strong> = exp√©rience utilisateur fluide</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="278" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Ma√Ætriser <strong>CSS animations</strong> et <strong>transitions</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Utiliser <strong>Framer Motion</strong> pour React</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Cr√©er des <strong>micro-interactions</strong> engageantes</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Optimiser les <strong>performances</strong> des animations</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="279" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%8E%A8-css-transitions"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>CSS Transitions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3b82f6</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-selector-class">.button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2563eb</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.15</span>);
}
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="propri%C3%A9t%C3%A9s-animables-performantes">Propri√©t√©s animables performantes</h3>
<ul>
<li data-marpit-fragment="1"><code>transform</code> (translate, scale, rotate)</li>
<li data-marpit-fragment="2"><code>opacity</code></li>
<li data-marpit-fragment="3"><img class="emoji" draggable="false" alt="‚ö†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a0.svg" data-marp-twemoji=""/> √âviter <code>width</code>, <code>height</code>, <code>top</code>, <code>left</code></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="280" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%8E%AC-css-animations"><img class="emoji" draggable="false" alt="üé¨" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ac.svg" data-marp-twemoji=""/> <strong>CSS Animations</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-css"><span class="hljs-keyword">@keyframes</span> fadeInUp {
  <span class="hljs-selector-tag">from</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">20px</span>);
  }
  <span class="hljs-selector-tag">to</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">0</span>);
  }
}

<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">animation</span>: fadeInUp <span class="hljs-number">0.6s</span> ease-out;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="281" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%E2%9A%9B%EF%B8%8F-framer-motion--installation"><img class="emoji" draggable="false" alt="‚öõÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/269b.svg" data-marp-twemoji=""/> <strong>Framer Motion : Installation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i framer-motion
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="282" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%E2%9A%9B%EF%B8%8F-animation-simple"><img class="emoji" draggable="false" alt="‚öõÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/269b.svg" data-marp-twemoji=""/> <strong>Animation simple</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { motion } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;framer-motion&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">FadeIn</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
      <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span>, <span class="hljs-attr">y:</span> <span class="hljs-attr">20</span> }}
      <span class="hljs-attr">animate</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">y:</span> <span class="hljs-attr">0</span> }}
      <span class="hljs-attr">transition</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">duration:</span> <span class="hljs-attr">0.6</span> }}
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="283" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%8E%AF-variants"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Variants</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> variants = {
  <span class="hljs-attr">hidden</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">scale</span>: <span class="hljs-number">0.8</span> },
  <span class="hljs-attr">visible</span>: {
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">transition</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0.5</span> }
  },
  <span class="hljs-attr">exit</span>: {
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">scale</span>: <span class="hljs-number">0.8</span>,
    <span class="hljs-attr">transition</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">0.3</span> }
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Card</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
      <span class="hljs-attr">variants</span>=<span class="hljs-string">{variants}</span>
      <span class="hljs-attr">initial</span>=<span class="hljs-string">&quot;hidden&quot;</span>
      <span class="hljs-attr">animate</span>=<span class="hljs-string">&quot;visible&quot;</span>
      <span class="hljs-attr">exit</span>=<span class="hljs-string">&quot;exit&quot;</span>
    &gt;</span>
      Contenu
    <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="284" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%93%8B-liste-anim%C3%A9e"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Liste anim√©e</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> container = {
  <span class="hljs-attr">hidden</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span> },
  <span class="hljs-attr">show</span>: {
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">transition</span>: {
      <span class="hljs-attr">staggerChildren</span>: <span class="hljs-number">0.1</span>
    }
  }
};

<span class="hljs-keyword">const</span> item = {
  <span class="hljs-attr">hidden</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">x</span>: -<span class="hljs-number">20</span> },
  <span class="hljs-attr">show</span>: { <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span> }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">List</span>(<span class="hljs-params">{ items }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">motion.ul</span> <span class="hljs-attr">variants</span>=<span class="hljs-string">{container}</span> <span class="hljs-attr">initial</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">animate</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>
      {items.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">motion.li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span> <span class="hljs-attr">variants</span>=<span class="hljs-string">{item}</span>&gt;</span>
          {item.name}
        <span class="hljs-tag">&lt;/<span class="hljs-name">motion.li</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">motion.ul</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="285" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%96%B1%EF%B8%8F-hover--tap"><img class="emoji" draggable="false" alt="üñ±Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5b1.svg" data-marp-twemoji=""/> <strong>Hover &amp; Tap</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx">&lt;motion.<span class="hljs-property">button</span>
  whileHover={{ <span class="hljs-attr">scale</span>: <span class="hljs-number">1.05</span> }}
  whileTap={{ <span class="hljs-attr">scale</span>: <span class="hljs-number">0.95</span> }}
  transition={{ <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;spring&#x27;</span>, <span class="hljs-attr">stiffness</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">damping</span>: <span class="hljs-number">17</span> }}
&gt;
  <span class="hljs-title class_">Cliquez</span>-moi
&lt;/motion.<span class="hljs-property">button</span>&gt;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="286" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%93%8F-layout-animations"><img class="emoji" draggable="false" alt="üìè" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cf.svg" data-marp-twemoji=""/> <strong>Layout animations</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { motion } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;framer-motion&#x27;</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ExpandableCard</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [isExpanded, setIsExpanded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
      <span class="hljs-attr">layout</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsExpanded(!isExpanded)}
      className=&quot;bg-white rounded-lg p-4 cursor-pointer&quot;
    &gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">motion.h2</span> <span class="hljs-attr">layout</span>&gt;</span>Titre<span class="hljs-tag">&lt;/<span class="hljs-name">motion.h2</span>&gt;</span>
      {isExpanded &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
          <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span> }}
          <span class="hljs-attr">animate</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">1</span> }}
          <span class="hljs-attr">exit</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span> }}
        &gt;</span>
          Contenu √©tendu...
        <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="287" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%94%84-animatepresence"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>AnimatePresence</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimatePresence</span>, motion } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;framer-motion&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">{ isOpen, onClose, children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnimatePresence</span>&gt;</span>
      {isOpen &amp;&amp; (
        <span class="hljs-tag">&lt;&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
            <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span> }}
            <span class="hljs-attr">animate</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">1</span> }}
            <span class="hljs-attr">exit</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span> }}
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClose}</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;fixed inset-0 bg-black/50&quot;</span>
          /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
            <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span>, <span class="hljs-attr">scale:</span> <span class="hljs-attr">0.9</span> }}
            <span class="hljs-attr">animate</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">scale:</span> <span class="hljs-attr">1</span> }}
            <span class="hljs-attr">exit</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span>, <span class="hljs-attr">scale:</span> <span class="hljs-attr">0.9</span> }}
            <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;fixed inset-0 flex items-center justify-center&quot;</span>
          &gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-white rounded-lg p-6&quot;</span>&gt;</span>
              {children}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
      )}
    &lt;/<span class="hljs-title class_">AnimatePresence</span>&gt;
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="288" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%8E%A8-scroll-animations"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Scroll animations</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { motion, useScroll, useTransform } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;framer-motion&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ParallaxSection</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { scrollYProgress } = <span class="hljs-title function_">useScroll</span>();
  <span class="hljs-keyword">const</span> y = <span class="hljs-title function_">useTransform</span>(scrollYProgress, [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">&#x27;0%&#x27;</span>, <span class="hljs-string">&#x27;50%&#x27;</span>]);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;relative h-screen overflow-hidden&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">y</span> }}
        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;absolute inset-0&quot;</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/bg.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Background&quot;</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="289" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%93%8A-useinview"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>useInView</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> { motion, useInView } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;framer-motion&#x27;</span>;
<span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">FadeInWhenVisible</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> isInView = <span class="hljs-title function_">useInView</span>(ref, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>
      <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">opacity:</span> <span class="hljs-attr">0</span>, <span class="hljs-attr">y:</span> <span class="hljs-attr">50</span> }}
      <span class="hljs-attr">animate</span>=<span class="hljs-string">{isInView</span> ? { <span class="hljs-attr">opacity:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">y:</span> <span class="hljs-attr">0</span> } <span class="hljs-attr">:</span> {}}
      <span class="hljs-attr">transition</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">duration:</span> <span class="hljs-attr">0.6</span> }}
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">motion.div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="290" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%8E%AF-micro-interactions"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Micro-interactions</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="bouton-like">Bouton &quot;like&quot;</h3>
<pre><code class="language-tsx"><span class="hljs-keyword">const</span> [isLiked, setIsLiked] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">motion.button</span>
  <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsLiked(!isLiked)}
  animate={{
    scale: isLiked ? [1, 1.2, 1] : 1
  }}
  transition={{ duration: 0.3 }}
&gt;
  {isLiked ? &#x27;<img class="emoji" draggable="false" alt="‚ù§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2764.svg" data-marp-twemoji=""/>&#x27; : &#x27;<img class="emoji" draggable="false" alt="ü§ç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f90d.svg" data-marp-twemoji=""/>&#x27;}
<span class="hljs-tag">&lt;/<span class="hljs-name">motion.button</span>&gt;</span></span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="291" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-loading-spinner"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Loading spinner</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx">&lt;motion.<span class="hljs-property">div</span>
  animate={{ <span class="hljs-attr">rotate</span>: <span class="hljs-number">360</span> }}
  transition={{
    <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">repeat</span>: <span class="hljs-title class_">Infinity</span>,
    <span class="hljs-attr">ease</span>: <span class="hljs-string">&#x27;linear&#x27;</span>
  }}
  className=<span class="hljs-string">&quot;w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full&quot;</span>
/&gt;
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="292" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%93%88-progress-bar"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>Progress bar</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProgressBar</span>(<span class="hljs-params">{ progress }: { progress: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;w-full bg-gray-200 rounded-full h-2&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">motion.div</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-blue-500 h-2 rounded-full&quot;</span>
        <span class="hljs-attr">initial</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> <span class="hljs-attr">0</span> }}
        <span class="hljs-attr">animate</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> `${<span class="hljs-attr">progress</span>}%` }}
        <span class="hljs-attr">transition</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">duration:</span> <span class="hljs-attr">0.5</span>, <span class="hljs-attr">ease:</span> &#x27;<span class="hljs-attr">easeOut</span>&#x27; }}
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="293" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%E2%9A%A1-performances"><img class="emoji" draggable="false" alt="‚ö°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/26a1.svg" data-marp-twemoji=""/> <strong>Performances</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="bonnes-pratiques">Bonnes pratiques</h3>
<ul>
<li data-marpit-fragment="1">Animer <strong>transform</strong> et <strong>opacity</strong> uniquement</li>
<li data-marpit-fragment="2">Utiliser <code>will-change</code> avec parcimonie</li>
<li data-marpit-fragment="3"><strong>60fps</strong> comme objectif</li>
<li data-marpit-fragment="4">R√©duire les animations sur mobile faible</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-css"><span class="hljs-selector-class">.animated</span> {
  <span class="hljs-attribute">will-change</span>: transform;
}

<span class="hljs-comment">/* D√©sactiver sur mobile faible */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-reduced-motion</span>: reduce) {
  * {
    <span class="hljs-attribute">animation-duration</span>: <span class="hljs-number">0.01ms</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">transition-duration</span>: <span class="hljs-number">0.01ms</span> <span class="hljs-meta">!important</span>;
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="294" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Subtilit√©</strong> plut√¥t que spectaculaire</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Performance</strong> avant tout (transform + opacity)</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Accessibilit√©</strong> : respecter <code>prefers-reduced-motion</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Coh√©rence</strong> : m√™me dur√©e/easing partout</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Feedback</strong> : animations sur les interactions</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="19" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="295" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Animations &amp; micro-interactions&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Animations &amp; micro-interactions</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Framer Motion</strong> ‚Äî framer.com/motion</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>React Spring</strong> ‚Äî react-spring.dev</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Animate.css</strong> ‚Äî animate.style</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="296" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>

<h1 id="%F0%9F%94%8D-seo-analytics--ab-testing"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>SEO, Analytics &amp; A/B testing</strong></h1>
<h2 id="optimisation-et-mesure"><strong>Optimisation et mesure</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Optimiser le r√©f√©rencement et mesurer les performances business</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Mesurer</strong> pour <strong>optimiser</strong> pour <strong>convertir</strong></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="297" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Optimiser le <strong>SEO</strong> avec Next.js App Router</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Int√©grer <strong>Google Analytics 4</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Mettre en place l'<strong>A/B testing</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Mesurer les <strong>conversions</strong> et <strong>√©v√©nements</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="298" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%94%8D-seo--metadata"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>SEO : Metadata</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/layout.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Metadata</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">metadata</span>: <span class="hljs-title class_">Metadata</span> = {
  <span class="hljs-attr">title</span>: {
    <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;Mon Site&#x27;</span>,
    <span class="hljs-attr">template</span>: <span class="hljs-string">&#x27;%s | Mon Site&#x27;</span>
  },
  <span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;Description de mon site&#x27;</span>,
  <span class="hljs-attr">keywords</span>: [<span class="hljs-string">&#x27;next.js&#x27;</span>, <span class="hljs-string">&#x27;react&#x27;</span>, <span class="hljs-string">&#x27;typescript&#x27;</span>],
  <span class="hljs-attr">authors</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Votre Nom&#x27;</span> }],
  <span class="hljs-attr">openGraph</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;website&#x27;</span>,
    <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;fr_FR&#x27;</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;https://monsite.com&#x27;</span>,
    <span class="hljs-attr">siteName</span>: <span class="hljs-string">&#x27;Mon Site&#x27;</span>,
    <span class="hljs-attr">images</span>: [{ <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/og-image.jpg&#x27;</span> }]
  },
  <span class="hljs-attr">twitter</span>: {
    <span class="hljs-attr">card</span>: <span class="hljs-string">&#x27;summary_large_image&#x27;</span>,
    <span class="hljs-attr">creator</span>: <span class="hljs-string">&#x27;@username&#x27;</span>
  }
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="299" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%93%84-metadata-dynamiques"><img class="emoji" draggable="false" alt="üìÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c4.svg" data-marp-twemoji=""/> <strong>Metadata dynamiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/blog/[slug]/page.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateMetadata</span>(<span class="hljs-params">{ params }</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Metadata</span>&gt; {
  <span class="hljs-keyword">const</span> post = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPost</span>(params.<span class="hljs-property">slug</span>);

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">title</span>: post.<span class="hljs-property">title</span>,
    <span class="hljs-attr">description</span>: post.<span class="hljs-property">excerpt</span>,
    <span class="hljs-attr">openGraph</span>: {
      <span class="hljs-attr">title</span>: post.<span class="hljs-property">title</span>,
      <span class="hljs-attr">description</span>: post.<span class="hljs-property">excerpt</span>,
      <span class="hljs-attr">images</span>: [{ <span class="hljs-attr">url</span>: post.<span class="hljs-property">coverImage</span> }],
      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;article&#x27;</span>,
      <span class="hljs-attr">publishedTime</span>: post.<span class="hljs-property">publishedAt</span>,
    },
  };
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="300" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%97%BA%EF%B8%8F-sitemap"><img class="emoji" draggable="false" alt="üó∫Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5fa.svg" data-marp-twemoji=""/> <strong>Sitemap</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/sitemap.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MetadataRoute</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sitemap</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">MetadataRoute</span>.<span class="hljs-property">Sitemap</span>&gt; {
  <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getAllPosts</span>();

  <span class="hljs-keyword">const</span> postUrls = posts.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">post</span> =&gt;</span> ({
    <span class="hljs-attr">url</span>: <span class="hljs-string">`https://monsite.com/blog/<span class="hljs-subst">${post.slug}</span>`</span>,
    <span class="hljs-attr">lastModified</span>: post.<span class="hljs-property">updatedAt</span>,
    <span class="hljs-attr">changeFrequency</span>: <span class="hljs-string">&#x27;weekly&#x27;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
    <span class="hljs-attr">priority</span>: <span class="hljs-number">0.8</span>,
  }));

  <span class="hljs-keyword">return</span> [
    {
      <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;https://monsite.com&#x27;</span>,
      <span class="hljs-attr">lastModified</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
      <span class="hljs-attr">changeFrequency</span>: <span class="hljs-string">&#x27;yearly&#x27;</span>,
      <span class="hljs-attr">priority</span>: <span class="hljs-number">1</span>,
    },
    ...postUrls,
  ];
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="301" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%A4%96-robotstxt"><img class="emoji" draggable="false" alt="ü§ñ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f916.svg" data-marp-twemoji=""/> <strong>Robots.txt</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/robots.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MetadataRoute</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">robots</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">MetadataRoute</span>.<span class="hljs-property">Robots</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">userAgent</span>: <span class="hljs-string">&#x27;*&#x27;</span>,
        <span class="hljs-attr">allow</span>: <span class="hljs-string">&#x27;/&#x27;</span>,
        <span class="hljs-attr">disallow</span>: [<span class="hljs-string">&#x27;/admin/&#x27;</span>, <span class="hljs-string">&#x27;/api/&#x27;</span>],
      },
    ],
    <span class="hljs-attr">sitemap</span>: <span class="hljs-string">&#x27;https://monsite.com/sitemap.xml&#x27;</span>,
  };
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="302" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%93%8A-google-analytics-4"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Google Analytics 4</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/layout.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/script&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Script</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">https:</span>//<span class="hljs-attr">www.googletagmanager.com</span>/<span class="hljs-attr">gtag</span>/<span class="hljs-attr">js</span>?<span class="hljs-attr">id</span>=<span class="hljs-string">${process.env.NEXT_PUBLIC_GA_ID}</span>`}
          <span class="hljs-attr">strategy</span>=<span class="hljs-string">&quot;afterInteractive&quot;</span>
        /&gt;</span><span class="language-handlebars"><span class="language-xml">
        <span class="hljs-tag">&lt;<span class="hljs-name">Script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;google-analytics&quot;</span> <span class="hljs-attr">strategy</span>=<span class="hljs-string">&quot;afterInteractive&quot;</span>&gt;</span><span class="language-javascript">
          {<span class="hljs-string">`
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag(&#x27;js&#x27;, new Date());
            gtag(&#x27;config&#x27;, &#x27;<span class="hljs-subst">${process.env.NEXT_PUBLIC_GA_ID}</span>&#x27;);
          `</span>}
        </span></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">Script</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="303" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%93%88-tracking-d%C3%A9v%C3%A9nements"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>Tracking d'√©v√©nements</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// lib/analytics.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">trackEvent</span> = (<span class="hljs-params">
  <span class="hljs-attr">action</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">category</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">label</span>?: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">value</span>?: <span class="hljs-built_in">number</span>
</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">gtag</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">gtag</span>(<span class="hljs-string">&#x27;event&#x27;</span>, action, {
      <span class="hljs-attr">event_category</span>: category,
      <span class="hljs-attr">event_label</span>: label,
      <span class="hljs-attr">value</span>: value,
    });
  }
};

<span class="hljs-comment">// Usage</span>
<span class="hljs-title function_">trackEvent</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">&#x27;button&#x27;</span>, <span class="hljs-string">&#x27;subscribe&#x27;</span>, <span class="hljs-number">1</span>);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="304" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%8E%AF-conversions"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Conversions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SignupButton</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-comment">// Business logic</span>
    <span class="hljs-title function_">signup</span>();

    <span class="hljs-comment">// Track conversion</span>
    <span class="hljs-title function_">trackEvent</span>(<span class="hljs-string">&#x27;conversion&#x27;</span>, <span class="hljs-string">&#x27;signup&#x27;</span>, <span class="hljs-string">&#x27;header_cta&#x27;</span>);
  };

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>S&#x27;inscrire<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="305" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%A7%AA-ab-testing"><img class="emoji" draggable="false" alt="üß™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9ea.svg" data-marp-twemoji=""/> <strong>A/B Testing</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="approche-simple-avec-cookies">Approche simple avec cookies</h3>
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Cookies</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;js-cookie&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ABTest</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [variant, setVariant] = useState&lt;<span class="hljs-string">&#x27;A&#x27;</span> | <span class="hljs-string">&#x27;B&#x27;</span>&gt;(<span class="hljs-string">&#x27;A&#x27;</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> savedVariant = <span class="hljs-title class_">Cookies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;ab-test-variant&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;A&#x27;</span> | <span class="hljs-string">&#x27;B&#x27;</span>;
    
    <span class="hljs-keyword">if</span> (!savedVariant) {
      savedVariant = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-number">0.5</span> ? <span class="hljs-string">&#x27;A&#x27;</span> : <span class="hljs-string">&#x27;B&#x27;</span>;
      <span class="hljs-title class_">Cookies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;ab-test-variant&#x27;</span>, savedVariant, { <span class="hljs-attr">expires</span>: <span class="hljs-number">30</span> });
    }
    
    <span class="hljs-title function_">setVariant</span>(savedVariant);
  }, []);

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">children</span>(variant);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="306" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%A7%AA-ab-testing-usage"><img class="emoji" draggable="false" alt="üß™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9ea.svg" data-marp-twemoji=""/> <strong>A/B Testing (usage)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PricingPage</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ABTest</span>&gt;</span>
      {(variant) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Tarifs<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
          {variant === &#x27;A&#x27; ? (
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-blue-500&quot;</span>&gt;</span>
              Essai gratuit
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          ) : (
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-green-500&quot;</span>&gt;</span>
              Commencer maintenant
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ABTest</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="307" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%93%8A-mesurer-les-variantes"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Mesurer les variantes</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ABTest</span>(<span class="hljs-params">{ experimentName, children }</span>) {
  <span class="hljs-keyword">const</span> [variant, setVariant] = useState&lt;<span class="hljs-string">&#x27;A&#x27;</span> | <span class="hljs-string">&#x27;B&#x27;</span>&gt;(<span class="hljs-string">&#x27;A&#x27;</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// D√©terminer la variante</span>
    <span class="hljs-keyword">const</span> v = <span class="hljs-title function_">getOrAssignVariant</span>(experimentName);
    <span class="hljs-title function_">setVariant</span>(v);

    <span class="hljs-comment">// Tracker l&#x27;exposition</span>
    <span class="hljs-title function_">trackEvent</span>(<span class="hljs-string">&#x27;experiment_view&#x27;</span>, experimentName, v);
  }, [experimentName]);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">trackConversion</span> = (<span class="hljs-params"><span class="hljs-attr">eventName</span>: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-title function_">trackEvent</span>(<span class="hljs-string">&#x27;experiment_conversion&#x27;</span>, experimentName, <span class="hljs-string">`<span class="hljs-subst">${variant}</span>_<span class="hljs-subst">${eventName}</span>`</span>);
  };

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">children</span>(variant, trackConversion);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="308" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%94%97-structured-data-json-ld"><img class="emoji" draggable="false" alt="üîó" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f517.svg" data-marp-twemoji=""/> <strong>Structured Data (JSON-LD)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ArticlePage</span>(<span class="hljs-params">{ article }</span>) {
  <span class="hljs-keyword">const</span> jsonLd = {
    <span class="hljs-string">&#x27;@context&#x27;</span>: <span class="hljs-string">&#x27;https://schema.org&#x27;</span>,
    <span class="hljs-string">&#x27;@type&#x27;</span>: <span class="hljs-string">&#x27;Article&#x27;</span>,
    <span class="hljs-attr">headline</span>: article.<span class="hljs-property">title</span>,
    <span class="hljs-attr">description</span>: article.<span class="hljs-property">excerpt</span>,
    <span class="hljs-attr">image</span>: article.<span class="hljs-property">coverImage</span>,
    <span class="hljs-attr">datePublished</span>: article.<span class="hljs-property">publishedAt</span>,
    <span class="hljs-attr">author</span>: {
      <span class="hljs-string">&#x27;@type&#x27;</span>: <span class="hljs-string">&#x27;Person&#x27;</span>,
      <span class="hljs-attr">name</span>: article.<span class="hljs-property">author</span>.<span class="hljs-property">name</span>,
    },
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">script</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;application/ld+json&quot;</span>
        <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">JSON.stringify</span>(<span class="hljs-attr">jsonLd</span>) }}
      /&gt;</span><span class="language-javascript">
      {<span class="hljs-comment">/* Contenu */</span>}
    &lt;/&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="309" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%8E%A8-open-graph-images-dynamiques"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Open Graph images dynamiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/blog/[slug]/opengraph-image.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ImageResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/og&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> size = { <span class="hljs-attr">width</span>: <span class="hljs-number">1200</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">630</span> };

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">og</span>(<span class="hljs-params">{ params }</span>) {
  <span class="hljs-keyword">const</span> post = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPost</span>(params.<span class="hljs-property">slug</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageResponse</span>(
    (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> &#x27;<span class="hljs-attr">flex</span>&#x27;, <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">60</span>, <span class="hljs-attr">background:</span> &#x27;<span class="hljs-attr">white</span>&#x27; }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{post.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    ),
    size
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="310" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques-seo"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques SEO</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Metadata</strong> compl√®tes et dynamiques</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Sitemap</strong> √† jour automatiquement</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>SSR/SSG</strong> pour le contenu important</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>URLs</strong> descriptives et propres</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Images</strong> optimis√©es avec <code>alt</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-6">
<ul>
<li data-marpit-fragment="6"><strong>Structured data</strong> pour les rich snippets</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="311" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;SEO, Analytics &amp; A/B testing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">SEO, Analytics &amp; A/B testing</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Google Search Console</strong> ‚Äî search.google.com/search-console</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Google Analytics</strong> ‚Äî analytics.google.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Schema.org</strong> ‚Äî schema.org</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="312" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>

<h1 id="%F0%9F%92%B3-paiements-avec-stripe"><img class="emoji" draggable="false" alt="üí≥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b3.svg" data-marp-twemoji=""/> <strong>Paiements avec Stripe</strong></h1>
<h2 id="int%C3%A9gration-nextjs-app-router"><strong>Int√©gration Next.js App Router</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Int√©grer Stripe pour accepter des paiements s√©curis√©s</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>PCI DSS</strong> : Stripe g√®re la conformit√© pour vous</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="313" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Configurer <strong>Stripe</strong> avec Next.js</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Impl√©menter <strong>Checkout Sessions</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer les <strong>webhooks</strong> Stripe</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">S√©curiser les <strong>paiements</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="314" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%9B%A0%EF%B8%8F-installation"><img class="emoji" draggable="false" alt="üõ†Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e0.svg" data-marp-twemoji=""/> <strong>Installation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i stripe @stripe/stripe-js
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="variables-denvironnement">Variables d'environnement</h3>
<pre><code class="language-env">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="315" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-configuration-stripe"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Configuration Stripe</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/stripe.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Stripe</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;stripe&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> stripe = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stripe</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">STRIPE_SECRET_KEY</span>!, {
  <span class="hljs-attr">apiVersion</span>: <span class="hljs-string">&#x27;2023-10-16&#x27;</span>,
  <span class="hljs-attr">typescript</span>: <span class="hljs-literal">true</span>,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="316" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%9B%92-checkout-session"><img class="emoji" draggable="false" alt="üõí" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6d2.svg" data-marp-twemoji=""/> <strong>Checkout Session</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/checkout/route.ts</span>
<span class="hljs-keyword">import</span> { stripe } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/stripe&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { priceId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">checkout</span>.<span class="hljs-property">sessions</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;payment&#x27;</span>,
    <span class="hljs-attr">line_items</span>: [
      {
        <span class="hljs-attr">price</span>: priceId,
        <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span>,
      },
    ],
    <span class="hljs-attr">success_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/success?session_id={CHECKOUT_SESSION_ID}`</span>,
    <span class="hljs-attr">cancel_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/cancel`</span>,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">sessionId</span>: session.<span class="hljs-property">id</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="317" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%92%B3-formulaire-de-paiement"><img class="emoji" draggable="false" alt="üí≥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b3.svg" data-marp-twemoji=""/> <strong>Formulaire de paiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { loadStripe } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@stripe/stripe-js&#x27;</span>;

<span class="hljs-keyword">const</span> stripePromise = <span class="hljs-title function_">loadStripe</span>(
  process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span>!
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CheckoutButton</span>(<span class="hljs-params">{ priceId }: { priceId: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/checkout&#x27;</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ priceId }),
    });

    <span class="hljs-keyword">const</span> { sessionId } = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
    <span class="hljs-keyword">const</span> stripe = <span class="hljs-keyword">await</span> stripePromise;

    <span class="hljs-keyword">await</span> stripe?.<span class="hljs-title function_">redirectToCheckout</span>({ sessionId });
  };

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>Acheter<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="318" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%94%94-webhooks-stripe"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Webhooks Stripe</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/webhook/route.ts</span>
<span class="hljs-keyword">import</span> { stripe } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/stripe&#x27;</span>;
<span class="hljs-keyword">import</span> { headers } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/headers&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">text</span>();
  <span class="hljs-keyword">const</span> signature = <span class="hljs-title function_">headers</span>().<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;stripe-signature&#x27;</span>)!;

  <span class="hljs-keyword">let</span> event;

  <span class="hljs-keyword">try</span> {
    event = stripe.<span class="hljs-property">webhooks</span>.<span class="hljs-title function_">constructEvent</span>(
      body,
      signature,
      process.<span class="hljs-property">env</span>.<span class="hljs-property">STRIPE_WEBHOOK_SECRET</span>!
    );
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Invalid signature&#x27;</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">400</span> });
  }

  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;checkout.session.completed&#x27;</span>) {
    <span class="hljs-keyword">const</span> session = event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>;
    <span class="hljs-comment">// Traiter le paiement r√©ussi</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleSuccessfulPayment</span>(session);
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">received</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="319" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%E2%9C%85-traiter-le-paiement"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Traiter le paiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSuccessfulPayment</span>(<span class="hljs-params"><span class="hljs-attr">session</span>: <span class="hljs-title class_">Stripe</span>.<span class="hljs-title class_">Checkout</span>.<span class="hljs-title class_">Session</span></span>) {
  <span class="hljs-keyword">const</span> userId = session.<span class="hljs-property">metadata</span>?.<span class="hljs-property">userId</span>;
  <span class="hljs-keyword">const</span> productId = session.<span class="hljs-property">metadata</span>?.<span class="hljs-property">productId</span>;

  <span class="hljs-comment">// Mettre √† jour la base de donn√©es</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">order</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">data</span>: {
      userId,
      productId,
      <span class="hljs-attr">amount</span>: session.<span class="hljs-property">amount_total</span>! / <span class="hljs-number">100</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;paid&#x27;</span>,
      <span class="hljs-attr">stripeSessionId</span>: session.<span class="hljs-property">id</span>,
    },
  });

  <span class="hljs-comment">// Envoyer un email de confirmation</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendConfirmationEmail</span>(userId, productId);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="320" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%92%B0-payment-intent-personnalis%C3%A9"><img class="emoji" draggable="false" alt="üí∞" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b0.svg" data-marp-twemoji=""/> <strong>Payment Intent (personnalis√©)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Pour un contr√¥le total</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { amount } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> paymentIntent = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">paymentIntents</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">amount</span>: amount * <span class="hljs-number">100</span>, <span class="hljs-comment">// centimes</span>
    <span class="hljs-attr">currency</span>: <span class="hljs-string">&#x27;eur&#x27;</span>,
    <span class="hljs-attr">automatic_payment_methods</span>: {
      <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
    },
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">clientSecret</span>: paymentIntent.<span class="hljs-property">client_secret</span>,
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="321" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%8E%A8-stripe-elements"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Stripe Elements</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Elements</span>, <span class="hljs-title class_">PaymentElement</span>, useStripe, useElements } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@stripe/react-stripe-js&#x27;</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">CheckoutForm</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> stripe = <span class="hljs-title function_">useStripe</span>();
  <span class="hljs-keyword">const</span> elements = <span class="hljs-title function_">useElements</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-attr">e</span>: <span class="hljs-title class_">React</span>.<span class="hljs-title class_">FormEvent</span></span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();

    <span class="hljs-keyword">if</span> (!stripe || !elements) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">const</span> { error } = <span class="hljs-keyword">await</span> stripe.<span class="hljs-title function_">confirmPayment</span>({
      elements,
      <span class="hljs-attr">confirmParams</span>: {
        <span class="hljs-attr">return_url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span> + <span class="hljs-string">&#x27;/success&#x27;</span>,
      },
    });

    <span class="hljs-keyword">if</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error.<span class="hljs-property">message</span>);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PaymentElement</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Payer<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="322" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%A7%BE-produits-et-prix"><img class="emoji" draggable="false" alt="üßæ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9fe.svg" data-marp-twemoji=""/> <strong>Produits et prix</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Cr√©er un produit</span>
<span class="hljs-keyword">const</span> product = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">products</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Mon Produit&#x27;</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;Description du produit&#x27;</span>,
});

<span class="hljs-comment">// Cr√©er un prix</span>
<span class="hljs-keyword">const</span> price = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">prices</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">product</span>: product.<span class="hljs-property">id</span>,
  <span class="hljs-attr">unit_amount</span>: <span class="hljs-number">2000</span>, <span class="hljs-comment">// 20‚Ç¨</span>
  <span class="hljs-attr">currency</span>: <span class="hljs-string">&#x27;eur&#x27;</span>,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="323" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%94%90-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>S√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="bonnes-pratiques">Bonnes pratiques</h3>
<ul>
<li data-marpit-fragment="1"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Cl√©s secr√®tes</strong> c√¥t√© serveur uniquement</li>
<li data-marpit-fragment="2"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Webhooks</strong> pour la confirmation</li>
<li data-marpit-fragment="3"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Signature</strong> des webhooks v√©rifi√©e</li>
<li data-marpit-fragment="4"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Montants</strong> calcul√©s c√¥t√© serveur</li>
<li data-marpit-fragment="5"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>HTTPS</strong> en production</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="324" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%93%8A-r%C3%A9cup%C3%A9rer-les-paiements"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>R√©cup√©rer les paiements</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> payments = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">paymentIntents</span>.<span class="hljs-title function_">list</span>({
    <span class="hljs-attr">limit</span>: <span class="hljs-number">100</span>,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>(payments);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="325" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%92%B8-remboursements"><img class="emoji" draggable="false" alt="üí∏" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b8.svg" data-marp-twemoji=""/> <strong>Remboursements</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { paymentIntentId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> refund = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">refunds</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">payment_intent</span>: paymentIntentId,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ refund });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="326" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%E2%9C%85-checklist"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Cl√©s</strong> Stripe configur√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Checkout</strong> fonctionnel</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Webhooks</strong> configur√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Confirmation</strong> par email</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Tests</strong> en mode test</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="327" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Paiements avec Stripe&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Paiements avec Stripe</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Stripe Docs</strong> ‚Äî stripe.com/docs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Stripe Dashboard</strong> ‚Äî dashboard.stripe.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>stripe-node</strong> ‚Äî github.com/stripe/stripe-node</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="328" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>

<h1 id="%F0%9F%92%B0-abonnements-stripe-billing"><img class="emoji" draggable="false" alt="üí∞" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b0.svg" data-marp-twemoji=""/> <strong>Abonnements Stripe Billing</strong></h1>
<h2 id="gestion-des-abonnements-r%C3%A9currents"><strong>Gestion des abonnements r√©currents</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Impl√©menter un syst√®me d'abonnements avec Stripe Billing</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Recurring billing</strong> = revenus pr√©visibles</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="329" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Cr√©er des <strong>plans d'abonnement</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">G√©rer les <strong>cycles de facturation</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Impl√©menter <strong>upgrade/downgrade</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">G√©rer les <strong>annulations</strong> et <strong>pauses</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="330" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%93%8B-cr%C3%A9er-un-plan-dabonnement"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Cr√©er un plan d'abonnement</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// Cr√©er un produit r√©current</span>
<span class="hljs-keyword">const</span> product = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">products</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Plan Premium&#x27;</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;Acc√®s premium mensuel&#x27;</span>,
});

<span class="hljs-comment">// Cr√©er un prix r√©current</span>
<span class="hljs-keyword">const</span> price = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">prices</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">product</span>: product.<span class="hljs-property">id</span>,
  <span class="hljs-attr">unit_amount</span>: <span class="hljs-number">2000</span>, <span class="hljs-comment">// 20‚Ç¨</span>
  <span class="hljs-attr">currency</span>: <span class="hljs-string">&#x27;eur&#x27;</span>,
  <span class="hljs-attr">recurring</span>: {
    <span class="hljs-attr">interval</span>: <span class="hljs-string">&#x27;month&#x27;</span>,
  },
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="331" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%94%84-checkout-pour-abonnement"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Checkout pour abonnement</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/subscribe/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { priceId, customerId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">checkout</span>.<span class="hljs-property">sessions</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;subscription&#x27;</span>,
    <span class="hljs-attr">customer</span>: customerId,
    <span class="hljs-attr">line_items</span>: [{ <span class="hljs-attr">price</span>: priceId, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span> }],
    <span class="hljs-attr">success_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/dashboard?success=true`</span>,
    <span class="hljs-attr">cancel_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/pricing`</span>,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">sessionId</span>: session.<span class="hljs-property">id</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="332" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%91%A4-cr%C3%A9er-un-customer"><img class="emoji" draggable="false" alt="üë§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f464.svg" data-marp-twemoji=""/> <strong>Cr√©er un customer</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { email, name } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> customer = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">customers</span>.<span class="hljs-title function_">create</span>({
    email,
    name,
    <span class="hljs-attr">metadata</span>: {
      <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;user_123&#x27;</span>, <span class="hljs-comment">// ID de votre utilisateur</span>
    },
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">customerId</span>: customer.<span class="hljs-property">id</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="333" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%93%8A-g%C3%A9rer-les-webhooks"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>G√©rer les webhooks</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/webhook/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> event = <span class="hljs-keyword">await</span> <span class="hljs-title function_">parseWebhook</span>(request);

  <span class="hljs-keyword">switch</span> (event.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;customer.subscription.created&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleSubscriptionCreated</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;customer.subscription.updated&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleSubscriptionUpdated</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;customer.subscription.deleted&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleSubscriptionDeleted</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;invoice.payment_succeeded&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handlePaymentSucceeded</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;invoice.payment_failed&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handlePaymentFailed</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">received</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="334" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%94%84-gestion-des-%C3%A9v%C3%A9nements"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Gestion des √©v√©nements</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSubscriptionCreated</span>(<span class="hljs-params"><span class="hljs-attr">subscription</span>: <span class="hljs-title class_">Stripe</span>.<span class="hljs-title class_">Subscription</span></span>) {
  <span class="hljs-keyword">const</span> userId = subscription.<span class="hljs-property">metadata</span>.<span class="hljs-property">userId</span>;
  
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">update</span>({
    <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: userId },
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">subscriptionId</span>: subscription.<span class="hljs-property">id</span>,
      <span class="hljs-attr">plan</span>: subscription.<span class="hljs-property">items</span>.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>].<span class="hljs-property">price</span>.<span class="hljs-property">id</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;active&#x27;</span>,
    },
  });
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handlePaymentFailed</span>(<span class="hljs-params"><span class="hljs-attr">invoice</span>: <span class="hljs-title class_">Stripe</span>.<span class="hljs-title class_">Invoice</span></span>) {
  <span class="hljs-comment">// Notifier l&#x27;utilisateur</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendPaymentFailedEmail</span>(invoice.<span class="hljs-property">customer</span>);
  
  <span class="hljs-comment">// Optionnel : suspendre l&#x27;acc√®s</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">suspendUserAccess</span>(invoice.<span class="hljs-property">customer</span>);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="335" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%E2%AC%86%EF%B8%8F-upgradedowngrade"><img class="emoji" draggable="false" alt="‚¨ÜÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2b06.svg" data-marp-twemoji=""/> <strong>Upgrade/Downgrade</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { subscriptionId, newPriceId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> subscription = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">subscriptions</span>.<span class="hljs-title function_">retrieve</span>(subscriptionId);
  
  <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">subscriptions</span>.<span class="hljs-title function_">update</span>(subscriptionId, {
    <span class="hljs-attr">items</span>: [{
      <span class="hljs-attr">id</span>: subscription.<span class="hljs-property">items</span>.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>,
      <span class="hljs-attr">price</span>: newPriceId,
    }],
    <span class="hljs-attr">proration_behavior</span>: <span class="hljs-string">&#x27;create_prorations&#x27;</span>,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="336" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%E2%8F%B8%EF%B8%8F-pause-dabonnement"><img class="emoji" draggable="false" alt="‚è∏Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/23f8.svg" data-marp-twemoji=""/> <strong>Pause d'abonnement</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { subscriptionId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">subscriptions</span>.<span class="hljs-title function_">update</span>(subscriptionId, {
    <span class="hljs-attr">pause_collection</span>: {
      <span class="hljs-attr">behavior</span>: <span class="hljs-string">&#x27;void&#x27;</span>,
    },
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="337" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%E2%9D%8C-annulation"><img class="emoji" draggable="false" alt="‚ùå" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/274c.svg" data-marp-twemoji=""/> <strong>Annulation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { subscriptionId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">subscriptions</span>.<span class="hljs-title function_">cancel</span>(subscriptionId);

  <span class="hljs-comment">// Mettre √† jour la DB</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">update</span>({
    <span class="hljs-attr">where</span>: { subscriptionId },
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;cancelled&#x27;</span> },
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="338" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%93%84-portail-client"><img class="emoji" draggable="false" alt="üìÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c4.svg" data-marp-twemoji=""/> <strong>Portail client</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { customerId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">billingPortal</span>.<span class="hljs-property">sessions</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">customer</span>: customerId,
    <span class="hljs-attr">return_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/dashboard`</span>,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">url</span>: session.<span class="hljs-property">url</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="339" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%92%B3-m%C3%A9thodes-de-paiement"><img class="emoji" draggable="false" alt="üí≥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b3.svg" data-marp-twemoji=""/> <strong>M√©thodes de paiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { loadStripe } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@stripe/stripe-js&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PaymentMethodSetup</span>(<span class="hljs-params">{ customerId }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSetup</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">const</span> stripe = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadStripe</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span>);
    
    <span class="hljs-keyword">const</span> { error } = <span class="hljs-keyword">await</span> stripe.<span class="hljs-title function_">confirmSetup</span>({
      elements,
      <span class="hljs-attr">confirmParams</span>: {
        <span class="hljs-attr">return_url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span> + <span class="hljs-string">&#x27;/dashboard&#x27;</span>,
      },
    });
  };

  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleSetup}</span>&gt;</span>Ajouter une carte<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="340" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%93%8A-tableau-de-bord"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Tableau de bord</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SubscriptionDashboard</span>(<span class="hljs-params">{ user }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Mon Abonnement<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Plan: {user.plan}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Statut: {user.status}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Prochaine facture: {user.nextBillingDate}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> upgradePlan()}&gt;Upgrade<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> cancelSubscription()}&gt;Annuler<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="341" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Webhooks</strong> pour la synchronisation</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Grace period</strong> pour les √©checs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Proration</strong> pour les changements</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Portail client</strong> pour l'autogestion</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Tests</strong> avec des cartes Stripe</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="342" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Abonnements Stripe Billing&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Abonnements Stripe Billing</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Stripe Billing</strong> ‚Äî stripe.com/billing</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Webhooks</strong> ‚Äî stripe.com/docs/webhooks</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Portail client</strong> ‚Äî stripe.com/docs/billing/subscriptions/customer-portal</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="343" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>

<h1 id="%F0%9F%8F%AA-stripe-connect--marketplaces"><img class="emoji" draggable="false" alt="üè™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ea.svg" data-marp-twemoji=""/> <strong>Stripe Connect &amp; marketplaces</strong></h1>
<h2 id="plateformes-multi-vendeurs"><strong>Plateformes multi-vendeurs</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Cr√©er une marketplace avec Stripe Connect</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Connect</strong> = Plateforme + Vendeurs + Paiements</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="344" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Comprendre <strong>Stripe Connect</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Impl√©menter <strong>Express accounts</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer les <strong>commissions</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Cr√©er un <strong>onboarding</strong> vendeurs</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="345" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%8F%97%EF%B8%8F-architecture-connect"><img class="emoji" draggable="false" alt="üèóÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3d7.svg" data-marp-twemoji=""/> <strong>Architecture Connect</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="r%C3%B4les">R√¥les</h3>
<ul>
<li data-marpit-fragment="1"><strong>Plateforme</strong> : Vous (recevez les commissions)</li>
<li data-marpit-fragment="2"><strong>Vendeurs</strong> : Comptes Connect (re√ßoivent les paiements)</li>
<li data-marpit-fragment="3"><strong>Clients</strong> : Ach√®tent aux vendeurs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="flux-de-paiement">Flux de paiement</h3>
<ol>
<li>Client paie ‚Üí Plateforme</li>
<li>Plateforme garde commission</li>
<li>Plateforme transf√®re au vendeur</li>
</ol>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="346" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%91%A4-cr%C3%A9er-un-compte-express"><img class="emoji" draggable="false" alt="üë§" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f464.svg" data-marp-twemoji=""/> <strong>Cr√©er un compte Express</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/connect/account/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { email, name } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> account = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">accounts</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;express&#x27;</span>,
    <span class="hljs-attr">country</span>: <span class="hljs-string">&#x27;FR&#x27;</span>,
    email,
    <span class="hljs-attr">capabilities</span>: {
      <span class="hljs-attr">card_payments</span>: { <span class="hljs-attr">requested</span>: <span class="hljs-literal">true</span> },
      <span class="hljs-attr">transfers</span>: { <span class="hljs-attr">requested</span>: <span class="hljs-literal">true</span> },
    },
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">accountId</span>: account.<span class="hljs-property">id</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="347" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%94%97-lien-donboarding"><img class="emoji" draggable="false" alt="üîó" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f517.svg" data-marp-twemoji=""/> <strong>Lien d'onboarding</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { accountId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> accountLink = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">accountLinks</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">account</span>: accountId,
    <span class="hljs-attr">refresh_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/connect/reauth`</span>,
    <span class="hljs-attr">return_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/dashboard`</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;account_onboarding&#x27;</span>,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">url</span>: accountLink.<span class="hljs-property">url</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="348" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%92%B3-paiement-avec-commission"><img class="emoji" draggable="false" alt="üí≥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b3.svg" data-marp-twemoji=""/> <strong>Paiement avec commission</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/connect/payment/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { amount, sellerId, applicationFeeAmount } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> paymentIntent = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">paymentIntents</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">amount</span>: amount * <span class="hljs-number">100</span>,
    <span class="hljs-attr">currency</span>: <span class="hljs-string">&#x27;eur&#x27;</span>,
    <span class="hljs-attr">application_fee_amount</span>: applicationFeeAmount * <span class="hljs-number">100</span>,
    <span class="hljs-attr">transfer_data</span>: {
      <span class="hljs-attr">destination</span>: sellerId,
    },
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">clientSecret</span>: paymentIntent.<span class="hljs-property">client_secret</span>,
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="349" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%93%8A-transfert-manuel"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Transfert manuel</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { amount, sellerId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> transfer = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">transfers</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">amount</span>: amount * <span class="hljs-number">100</span>,
    <span class="hljs-attr">currency</span>: <span class="hljs-string">&#x27;eur&#x27;</span>,
    <span class="hljs-attr">destination</span>: sellerId,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ transfer });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="350" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%8E%A8-interface-vendeur"><img class="emoji" draggable="false" alt="üé®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3a8.svg" data-marp-twemoji=""/> <strong>Interface vendeur</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SellerDashboard</span>(<span class="hljs-params">{ seller }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Tableau de bord vendeur<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Statut: {seller.status}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Compte Stripe: {seller.stripeAccountId}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      {seller.status === &#x27;pending&#x27; &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> completeOnboarding()}&gt;
          Finaliser l&#x27;inscription
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      )}

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Mes ventes<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        {/* Liste des ventes */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="351" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%94%84-webhooks-connect"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Webhooks Connect</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> event = <span class="hljs-keyword">await</span> <span class="hljs-title function_">parseWebhook</span>(request);

  <span class="hljs-keyword">switch</span> (event.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;account.updated&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleAccountUpdated</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;transfer.created&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleTransferCreated</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;payment_intent.succeeded&#x27;</span>:
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">handlePaymentSucceeded</span>(event.<span class="hljs-property">data</span>.<span class="hljs-property">object</span>);
      <span class="hljs-keyword">break</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">received</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="352" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%93%88-gestion-des-commissions"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>Gestion des commissions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handlePaymentSucceeded</span>(<span class="hljs-params"><span class="hljs-attr">paymentIntent</span>: <span class="hljs-title class_">Stripe</span>.<span class="hljs-title class_">PaymentIntent</span></span>) {
  <span class="hljs-keyword">const</span> sellerId = paymentIntent.<span class="hljs-property">transfer_data</span>?.<span class="hljs-property">destination</span>;
  <span class="hljs-keyword">const</span> commission = paymentIntent.<span class="hljs-property">application_fee_amount</span>;

  <span class="hljs-comment">// Enregistrer la vente</span>
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">sale</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">data</span>: {
      sellerId,
      <span class="hljs-attr">amount</span>: paymentIntent.<span class="hljs-property">amount</span>,
      <span class="hljs-attr">commission</span>: commission || <span class="hljs-number">0</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;completed&#x27;</span>,
    },
  });

  <span class="hljs-comment">// Mettre √† jour les stats du vendeur</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateSellerStats</span>(sellerId, paymentIntent.<span class="hljs-property">amount</span>);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="353" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%8F%AA-marketplace-frontend"><img class="emoji" draggable="false" alt="üè™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3ea.svg" data-marp-twemoji=""/> <strong>Marketplace frontend</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductCard</span>(<span class="hljs-params">{ product, seller }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePurchase</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/connect/payment&#x27;</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">amount</span>: product.<span class="hljs-property">price</span>,
        <span class="hljs-attr">sellerId</span>: seller.<span class="hljs-property">stripeAccountId</span>,
        <span class="hljs-attr">applicationFeeAmount</span>: product.<span class="hljs-property">price</span> * <span class="hljs-number">0.1</span>, <span class="hljs-comment">// 10% commission</span>
      }),
    });

    <span class="hljs-keyword">const</span> { clientSecret } = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
    <span class="hljs-comment">// Rediriger vers Stripe Checkout</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{product.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Vendeur: {seller.name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Prix: {product.price}‚Ç¨<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handlePurchase}</span>&gt;</span>Acheter<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="354" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%93%8A-dashboard-plateforme"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Dashboard plateforme</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PlatformDashboard</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [stats, setStats] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchPlatformStats</span>().<span class="hljs-title function_">then</span>(setStats);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Dashboard Plateforme<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Statistiques<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Vendeurs actifs: {stats?.activeSellers}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Commission totale: {stats?.totalCommission}‚Ç¨<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Ventes ce mois: {stats?.monthlySales}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Vendeurs<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        {/* Liste des vendeurs */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="355" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%94%90-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>S√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="bonnes-pratiques">Bonnes pratiques</h3>
<ul>
<li data-marpit-fragment="1"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Webhooks</strong> v√©rifi√©s</li>
<li data-marpit-fragment="2"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Commissions</strong> calcul√©es c√¥t√© serveur</li>
<li data-marpit-fragment="3"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Limites</strong> de transfert</li>
<li data-marpit-fragment="4"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>KYC</strong> des vendeurs</li>
<li data-marpit-fragment="5"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Audit</strong> des transactions</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="356" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%93%8B-onboarding-complet"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Onboarding complet</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SellerOnboarding</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [step, setStep] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {step === 1 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">BusinessInfo</span> <span class="hljs-attr">onNext</span>=<span class="hljs-string">{()</span> =&gt;</span> setStep(2)} /&gt;}
      {step === 2 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">BankAccount</span> <span class="hljs-attr">onNext</span>=<span class="hljs-string">{()</span> =&gt;</span> setStep(3)} /&gt;}
      {step === 3 &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">TaxInfo</span> <span class="hljs-attr">onComplete</span>=<span class="hljs-string">{handleComplete}</span> /&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="357" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%E2%9C%85-checklist-marketplace"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist marketplace</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Comptes Express</strong> cr√©√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Onboarding</strong> fonctionnel</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Commissions</strong> calcul√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Webhooks</strong> configur√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Dashboard</strong> vendeurs</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="358" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Stripe Connect &amp; marketplaces&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Stripe Connect &amp; marketplaces</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Stripe Connect</strong> ‚Äî stripe.com/connect</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Express accounts</strong> ‚Äî stripe.com/docs/connect/express-accounts</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Marketplace guide</strong> ‚Äî stripe.com/docs/connect/marketplaces</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="359" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>

<h1 id="%F0%9F%93%A7-notifications--emails"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Notifications &amp; emails</strong></h1>
<h2 id="transactionnels"><strong>transactionnels</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Envoyer des emails transactionnels et notifications</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Email transactionnel</strong> = Email d√©clench√© par une action utilisateur</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="360" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Int√©grer <strong>Resend</strong> ou <strong>SendGrid</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Cr√©er des <strong>templates</strong> d'emails</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer les <strong>webhooks</strong> de livraison</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Impl√©menter les <strong>notifications push</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="361" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%A7-resend-recommand%C3%A9"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Resend (recommand√©)</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i resend
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-env">RESEND_API_KEY=re_...
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="362" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%A7-configuration-resend"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Configuration Resend</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/email.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Resend</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;resend&#x27;</span>;

<span class="hljs-keyword">const</span> resend = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Resend</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">RESEND_API_KEY</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendEmail</span>(<span class="hljs-params">{
  to,
  subject,
  html,
}: {
  to: <span class="hljs-built_in">string</span>;
  subject: <span class="hljs-built_in">string</span>;
  html: <span class="hljs-built_in">string</span>;
}</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> resend.<span class="hljs-property">emails</span>.<span class="hljs-title function_">send</span>({
    <span class="hljs-attr">from</span>: <span class="hljs-string">&#x27;noreply@votredomaine.com&#x27;</span>,
    to,
    subject,
    html,
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="363" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%A7-email-de-bienvenue"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Email de bienvenue</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/send-welcome/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { email, name } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> html = <span class="hljs-string">`
    &lt;h1&gt;Bienvenue <span class="hljs-subst">${name}</span> !&lt;/h1&gt;
    &lt;p&gt;Merci de vous √™tre inscrit sur notre plateforme.&lt;/p&gt;
    &lt;a href=&quot;https://monsite.com/dashboard&quot;&gt;Acc√©der √† votre tableau de bord&lt;/a&gt;
  `</span>;

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendEmail</span>({
    <span class="hljs-attr">to</span>: email,
    <span class="hljs-attr">subject</span>: <span class="hljs-string">&#x27;Bienvenue !&#x27;</span>,
    html,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="364" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%A7-template-react-email"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Template React Email</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i react-email @react-email/components
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-tsx"><span class="hljs-comment">// emails/WelcomeEmail.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Html</span>, <span class="hljs-title class_">Head</span>, <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Container</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-email/components&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WelcomeEmail</span>(<span class="hljs-params">{ name }: { name: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Head</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Container</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Bonjour {name},<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Bienvenue sur notre plateforme !<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://monsite.com/dashboard&quot;</span>&gt;</span>
            Acc√©der au dashboard
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="365" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%A7-utilisation-du-template"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Utilisation du template</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-email/render&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WelcomeEmail</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/emails/WelcomeEmail&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendWelcomeEmail</span>(<span class="hljs-params"><span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> html = <span class="hljs-title function_">render</span>(<span class="hljs-title class_">WelcomeEmail</span>({ name }));

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendEmail</span>({
    <span class="hljs-attr">to</span>: email,
    <span class="hljs-attr">subject</span>: <span class="hljs-string">&#x27;Bienvenue !&#x27;</span>,
    html,
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="366" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%94%94-notifications-push"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Notifications push</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i web-push
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/push.ts</span>
<span class="hljs-keyword">import</span> webpush <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;web-push&#x27;</span>;

webpush.<span class="hljs-title function_">setVapidDetails</span>(
  <span class="hljs-string">&#x27;mailto:votre@email.com&#x27;</span>,
  process.<span class="hljs-property">env</span>.<span class="hljs-property">VAPID_PUBLIC_KEY</span>!,
  process.<span class="hljs-property">env</span>.<span class="hljs-property">VAPID_PRIVATE_KEY</span>!
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendPushNotification</span>(<span class="hljs-params">
  <span class="hljs-attr">subscription</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">payload</span>: <span class="hljs-built_in">string</span>
</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> webpush.<span class="hljs-title function_">sendNotification</span>(subscription, payload);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="367" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%94%94-service-worker"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Service Worker</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-comment">// public/sw.js</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;push&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">data</span>.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-keyword">const</span> options = {
    <span class="hljs-attr">body</span>: data.<span class="hljs-property">body</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;/icon-192.png&#x27;</span>,
    <span class="hljs-attr">badge</span>: <span class="hljs-string">&#x27;/badge-72.png&#x27;</span>,
    <span class="hljs-attr">data</span>: data.<span class="hljs-property">url</span>,
  };

  event.<span class="hljs-title function_">waitUntil</span>(
    self.<span class="hljs-property">registration</span>.<span class="hljs-title function_">showNotification</span>(data.<span class="hljs-property">title</span>, options)
  );
});

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;notificationclick&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-property">notification</span>.<span class="hljs-title function_">close</span>();
  event.<span class="hljs-title function_">waitUntil</span>(
    clients.<span class="hljs-title function_">openWindow</span>(event.<span class="hljs-property">notification</span>.<span class="hljs-property">data</span>)
  );
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="368" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%94%94-subscription-c%C3%B4t%C3%A9-client"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Subscription c√¥t√© client</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PushNotificationButton</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [isSubscribed, setIsSubscribed] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">subscribe</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">const</span> registration = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">ready</span>;
    <span class="hljs-keyword">const</span> subscription = <span class="hljs-keyword">await</span> registration.<span class="hljs-property">pushManager</span>.<span class="hljs-title function_">subscribe</span>({
      <span class="hljs-attr">userVisibleOnly</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">applicationServerKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_VAPID_KEY</span>,
    });

    <span class="hljs-comment">// Envoyer au serveur</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/push/subscribe&#x27;</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(subscription),
    });

    <span class="hljs-title function_">setIsSubscribed</span>(<span class="hljs-literal">true</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{subscribe}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isSubscribed}</span>&gt;</span>
      {isSubscribed ? &#x27;Abonn√©&#x27; : &#x27;Activer les notifications&#x27;}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="369" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%A7-email-de-r%C3%A9initialisation"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Email de r√©initialisation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// emails/ResetPasswordEmail.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ResetPasswordEmail</span>(<span class="hljs-params">{ resetUrl }: { resetUrl: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Container</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Vous avez demand√© une r√©initialisation de mot de passe.<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{resetUrl}</span>&gt;</span>
            R√©initialiser le mot de passe
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Ce lien expire dans 1 heure.<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="370" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%A7-email-de-facture"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Email de facture</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// emails/InvoiceEmail.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">InvoiceEmail</span>(<span class="hljs-params">{ 
  invoice, 
  customer 
}: { 
  invoice: <span class="hljs-built_in">any</span>; 
  customer: <span class="hljs-built_in">any</span>; 
}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Container</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Bonjour {customer.name},<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Voici votre facture #{invoice.number}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          
          <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Montant:<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{invoice.amount}‚Ç¨<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Date:<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{invoice.date}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
          
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{invoice.downloadUrl}</span>&gt;</span>
            T√©l√©charger la facture
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="371" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%8A-webhooks-de-livraison"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Webhooks de livraison</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/webhook/resend/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">switch</span> (body.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;email.sent&#x27;</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Email envoy√©:&#x27;</span>, body.<span class="hljs-property">data</span>.<span class="hljs-property">email_id</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;email.delivered&#x27;</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Email livr√©:&#x27;</span>, body.<span class="hljs-property">data</span>.<span class="hljs-property">email_id</span>);
      <span class="hljs-keyword">break</span>;
    
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;email.bounced&#x27;</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Email rejet√©:&#x27;</span>, body.<span class="hljs-property">data</span>.<span class="hljs-property">email_id</span>);
      <span class="hljs-comment">// Marquer l&#x27;email comme invalide</span>
      <span class="hljs-keyword">break</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">received</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="372" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%88-queue-demails"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>Queue d'emails</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i bullmq ioredis
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/queue.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Queue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bullmq&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> emailQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">&#x27;email&#x27;</span>, {
  <span class="hljs-attr">connection</span>: {
    <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_HOST</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-built_in">parseInt</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_PORT</span>!),
  },
});

<span class="hljs-comment">// Ajouter un email √† la queue</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">queueEmail</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">await</span> emailQueue.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;send-email&#x27;</span>, data, {
    <span class="hljs-attr">delay</span>: <span class="hljs-number">1000</span>, <span class="hljs-comment">// Attendre 1 seconde</span>
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="373" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-worker-demails"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Worker d'emails</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// workers/email.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bullmq&#x27;</span>;

<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">&#x27;email&#x27;</span>, <span class="hljs-title function_">async</span> (job) =&gt; {
  <span class="hljs-keyword">const</span> { to, subject, html } = job.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendEmail</span>({ to, subject, html });
}, {
  <span class="hljs-attr">connection</span>: {
    <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_HOST</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-built_in">parseInt</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_PORT</span>!),
  },
});

worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;completed&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">job</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Email <span class="hljs-subst">${job.id}</span> envoy√© avec succ√®s`</span>);
});

worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;failed&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">job, err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Email <span class="hljs-subst">${job?.id}</span> √©chou√©:`</span>, err);
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="374" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Templates</strong> r√©utilisables</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Queue</strong> pour les gros volumes</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Webhooks</strong> pour le tracking</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Rate limiting</strong> des envois</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Unsubscribe</strong> obligatoire</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="375" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications &amp; emails transactionnels&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications &amp; emails transactionnels</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Resend</strong> ‚Äî resend.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>React Email</strong> ‚Äî react.email</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Web Push</strong> ‚Äî web.dev/push-notifications</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="376" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>

<h1 id="%F0%9F%94%94-notifications-push"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Notifications push</strong></h1>
<h2 id="background-jobs"><strong>&amp; Background jobs</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Impl√©menter des notifications push et des t√¢ches en arri√®re-plan</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Background jobs</strong> = T√¢ches asynchrones non bloquantes</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="377" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Mettre en place des <strong>notifications push</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Cr√©er des <strong>background jobs</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser <strong>BullMQ</strong> pour les queues</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">G√©rer les <strong>retry</strong> et <strong>failures</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="378" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%94%94-notifications-push-avanc%C3%A9es"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Notifications push avanc√©es</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/push-notifications.ts</span>
<span class="hljs-keyword">import</span> webpush <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;web-push&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PushNotification</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">body</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">icon</span>?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">badge</span>?: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>?: <span class="hljs-built_in">any</span>;
  <span class="hljs-attr">actions</span>?: <span class="hljs-title class_">Array</span>&lt;{
    <span class="hljs-attr">action</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  }&gt;;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendPushToUser</span>(<span class="hljs-params">
  <span class="hljs-attr">userId</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">notification</span>: <span class="hljs-title class_">PushNotification</span>
</span>) {
  <span class="hljs-keyword">const</span> subscriptions = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserPushSubscriptions</span>(userId);
  
  <span class="hljs-keyword">const</span> promises = subscriptions.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">subscription</span> =&gt;</span>
    webpush.<span class="hljs-title function_">sendNotification</span>(subscription, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(notification))
  );

  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(promises);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="379" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%94%94-notifications-programm%C3%A9es"><img class="emoji" draggable="false" alt="üîî" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f514.svg" data-marp-twemoji=""/> <strong>Notifications programm√©es</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/scheduled-notifications.ts</span>
<span class="hljs-keyword">import</span> { scheduleJob } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node-schedule&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">scheduleReminder</span>(<span class="hljs-params"><span class="hljs-attr">userId</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">date</span>: <span class="hljs-title class_">Date</span>, <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-title function_">scheduleJob</span>(<span class="hljs-string">`reminder-<span class="hljs-subst">${userId}</span>`</span>, date, <span class="hljs-title function_">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendPushToUser</span>(userId, {
      <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Rappel&#x27;</span>,
      <span class="hljs-attr">body</span>: message,
      <span class="hljs-attr">data</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;reminder&#x27;</span> }
    });
  });
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-title function_">scheduleReminder</span>(
  <span class="hljs-string">&#x27;user123&#x27;</span>,
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">&#x27;2024-12-25 10:00:00&#x27;</span>),
  <span class="hljs-string">&#x27;N\&#x27;oubliez pas votre rendez-vous !&#x27;</span>
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="380" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-background-jobs-avec-bullmq"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Background Jobs avec BullMQ</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i bullmq ioredis
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/queues.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Queue</span>, <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bullmq&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Redis</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;ioredis&#x27;</span>;

<span class="hljs-keyword">const</span> redis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Redis</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_URL</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> notificationQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">&#x27;notifications&#x27;</span>, {
  <span class="hljs-attr">connection</span>: redis,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> emailQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">&#x27;emails&#x27;</span>, {
  <span class="hljs-attr">connection</span>: redis,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> imageProcessingQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">&#x27;image-processing&#x27;</span>, {
  <span class="hljs-attr">connection</span>: redis,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="381" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-worker-pour-notifications"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Worker pour notifications</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// workers/notification-worker.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bullmq&#x27;</span>;
<span class="hljs-keyword">import</span> { sendPushToUser } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/push-notifications&#x27;</span>;

<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">&#x27;notifications&#x27;</span>, <span class="hljs-title function_">async</span> (job) =&gt; {
  <span class="hljs-keyword">const</span> { userId, notification } = job.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendPushToUser</span>(userId, notification);
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Notification envoy√©e √† l&#x27;utilisateur <span class="hljs-subst">${userId}</span>`</span>);
}, {
  <span class="hljs-attr">connection</span>: redis,
  <span class="hljs-attr">concurrency</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// Traiter 5 jobs en parall√®le</span>
});

worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;completed&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">job</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Job <span class="hljs-subst">${job.id}</span> termin√©`</span>);
});

worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;failed&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">job, err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Job <span class="hljs-subst">${job?.id}</span> √©chou√©:`</span>, err);
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="382" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%93%A7-worker-pour-emails"><img class="emoji" draggable="false" alt="üìß" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4e7.svg" data-marp-twemoji=""/> <strong>Worker pour emails</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// workers/email-worker.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bullmq&#x27;</span>;
<span class="hljs-keyword">import</span> { sendEmail } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/email&#x27;</span>;

<span class="hljs-keyword">const</span> emailWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">&#x27;emails&#x27;</span>, <span class="hljs-title function_">async</span> (job) =&gt; {
  <span class="hljs-keyword">const</span> { to, subject, html, template, data } = job.<span class="hljs-property">data</span>;
  
  <span class="hljs-keyword">if</span> (template) {
    <span class="hljs-keyword">const</span> html = <span class="hljs-keyword">await</span> <span class="hljs-title function_">renderEmailTemplate</span>(template, data);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendEmail</span>({ to, subject, html });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendEmail</span>({ to, subject, html });
  }
}, {
  <span class="hljs-attr">connection</span>: redis,
  <span class="hljs-attr">concurrency</span>: <span class="hljs-number">3</span>,
});

<span class="hljs-comment">// Retry automatique</span>
emailWorker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;failed&#x27;</span>, <span class="hljs-title function_">async</span> (job, err) =&gt; {
  <span class="hljs-keyword">if</span> (job.<span class="hljs-property">attemptsMade</span> &lt; <span class="hljs-number">3</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Retry <span class="hljs-subst">${job.attemptsMade + <span class="hljs-number">1</span>}</span> pour l&#x27;email <span class="hljs-subst">${job.id}</span>`</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Email <span class="hljs-subst">${job.id}</span> d√©finitivement √©chou√©:`</span>, err);
    <span class="hljs-comment">// Logger l&#x27;erreur ou notifier l&#x27;admin</span>
  }
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="383" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%96%BC%EF%B8%8F-worker-pour-traitement-dimages"><img class="emoji" draggable="false" alt="üñºÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5bc.svg" data-marp-twemoji=""/> <strong>Worker pour traitement d'images</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// workers/image-worker.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bullmq&#x27;</span>;
<span class="hljs-keyword">import</span> sharp <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;sharp&#x27;</span>;

<span class="hljs-keyword">const</span> imageWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">&#x27;image-processing&#x27;</span>, <span class="hljs-title function_">async</span> (job) =&gt; {
  <span class="hljs-keyword">const</span> { imagePath, userId } = job.<span class="hljs-property">data</span>;
  
  <span class="hljs-comment">// Mettre √† jour le statut</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateJobStatus</span>(job.<span class="hljs-property">id</span>, <span class="hljs-string">&#x27;processing&#x27;</span>);
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Redimensionner l&#x27;image</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sharp</span>(imagePath)
      .<span class="hljs-title function_">resize</span>(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>, { <span class="hljs-attr">fit</span>: <span class="hljs-string">&#x27;inside&#x27;</span> })
      .<span class="hljs-title function_">webp</span>({ <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span> })
      .<span class="hljs-title function_">toFile</span>(<span class="hljs-string">`<span class="hljs-subst">${imagePath}</span>.processed`</span>);
    
    <span class="hljs-comment">// Upload vers le cloud</span>
    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadToCloud</span>(<span class="hljs-string">`<span class="hljs-subst">${imagePath}</span>.processed`</span>);
    
    <span class="hljs-comment">// Notifier l&#x27;utilisateur</span>
    <span class="hljs-keyword">await</span> notificationQueue.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;image-processed&#x27;</span>, {
      userId,
      <span class="hljs-attr">imageUrl</span>: url,
    });
    
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateJobStatus</span>(job.<span class="hljs-property">id</span>, <span class="hljs-string">&#x27;completed&#x27;</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateJobStatus</span>(job.<span class="hljs-property">id</span>, <span class="hljs-string">&#x27;failed&#x27;</span>);
    <span class="hljs-keyword">throw</span> error;
  }
}, {
  <span class="hljs-attr">connection</span>: redis,
  <span class="hljs-attr">concurrency</span>: <span class="hljs-number">2</span>,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="384" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%93%8A-monitoring-des-queues"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Monitoring des queues</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/api/queue/stats/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> stats = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    notificationQueue.<span class="hljs-title function_">getJobCounts</span>(),
    emailQueue.<span class="hljs-title function_">getJobCounts</span>(),
    imageProcessingQueue.<span class="hljs-title function_">getJobCounts</span>(),
  ]);

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">notifications</span>: stats[<span class="hljs-number">0</span>],
    <span class="hljs-attr">emails</span>: stats[<span class="hljs-number">1</span>],
    <span class="hljs-attr">images</span>: stats[<span class="hljs-number">2</span>],
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="385" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%93%8A-dashboard-des-queues"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Dashboard des queues</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">QueueDashboard</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [stats, setStats] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-title function_">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/queue/stats&#x27;</span>);
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
      <span class="hljs-title function_">setStats</span>(data);
    }, <span class="hljs-number">5000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Statut des queues<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {stats &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Notifications<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>En attente: {stats.notifications.waiting}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>En cours: {stats.notifications.active}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Termin√©es: {stats.notifications.completed}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>√âchou√©es: {stats.notifications.failed}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          {/* Autres queues... */}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="386" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%E2%8F%B0-jobs-programm%C3%A9s"><img class="emoji" draggable="false" alt="‚è∞" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/23f0.svg" data-marp-twemoji=""/> <strong>Jobs programm√©s</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/scheduled-jobs.ts</span>
<span class="hljs-keyword">import</span> { scheduleJob } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node-schedule&#x27;</span>;

<span class="hljs-comment">// Nettoyage quotidien √† 2h du matin</span>
<span class="hljs-title function_">scheduleJob</span>(<span class="hljs-string">&#x27;0 2 * * *&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">cleanupOldFiles</span>();
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">cleanupExpiredSessions</span>();
});

<span class="hljs-comment">// Backup hebdomadaire le dimanche √† 3h</span>
<span class="hljs-title function_">scheduleJob</span>(<span class="hljs-string">&#x27;0 3 * * 0&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">backupDatabase</span>();
});

<span class="hljs-comment">// Rapport mensuel le 1er √† 9h</span>
<span class="hljs-title function_">scheduleJob</span>(<span class="hljs-string">&#x27;0 9 1 * *&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateMonthlyReport</span>();
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="387" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%94%84-jobs-r%C3%A9currents"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Jobs r√©currents</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/recurring-jobs.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Queue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bullmq&#x27;</span>;

<span class="hljs-comment">// Ajouter un job r√©current</span>
<span class="hljs-keyword">await</span> emailQueue.<span class="hljs-title function_">add</span>(
  <span class="hljs-string">&#x27;weekly-digest&#x27;</span>,
  { <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;weekly-digest&#x27;</span> },
  {
    <span class="hljs-attr">repeat</span>: { <span class="hljs-attr">cron</span>: <span class="hljs-string">&#x27;0 9 * * 1&#x27;</span> }, <span class="hljs-comment">// Tous les lundis √† 9h</span>
    <span class="hljs-attr">removeOnComplete</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">removeOnFail</span>: <span class="hljs-number">5</span>,
  }
);

<span class="hljs-comment">// Job avec d√©lai</span>
<span class="hljs-keyword">await</span> notificationQueue.<span class="hljs-title function_">add</span>(
  <span class="hljs-string">&#x27;welcome-reminder&#x27;</span>,
  { <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;user123&#x27;</span> },
  {
    <span class="hljs-attr">delay</span>: <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 24 heures</span>
  }
);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="388" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%9A%A8-gestion-des-erreurs"><img class="emoji" draggable="false" alt="üö®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6a8.svg" data-marp-twemoji=""/> <strong>Gestion des erreurs</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/error-handling.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createWorkerWithErrorHandling</span>(<span class="hljs-params">
  <span class="hljs-attr">queueName</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">processor</span>: (job: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;
</span>) {
  <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(queueName, processor, {
    <span class="hljs-attr">connection</span>: redis,
    <span class="hljs-attr">concurrency</span>: <span class="hljs-number">5</span>,
  });

  worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;failed&#x27;</span>, <span class="hljs-title function_">async</span> (job, err) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Job <span class="hljs-subst">${job?.id}</span> √©chou√©:`</span>, err);
    
    <span class="hljs-comment">// Notifier l&#x27;admin pour les erreurs critiques</span>
    <span class="hljs-keyword">if</span> (job?.<span class="hljs-property">attemptsMade</span> &gt;= <span class="hljs-number">3</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">notifyAdmin</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;job_failed&#x27;</span>,
        <span class="hljs-attr">queue</span>: queueName,
        <span class="hljs-attr">jobId</span>: job.<span class="hljs-property">id</span>,
        <span class="hljs-attr">error</span>: err.<span class="hljs-property">message</span>,
      });
    }
  });

  <span class="hljs-keyword">return</span> worker;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="389" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%93%88-m%C3%A9triques-et-alertes"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>M√©triques et alertes</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/metrics.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getQueueMetrics</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> queues = [notificationQueue, emailQueue, imageProcessingQueue];
  
  <span class="hljs-keyword">const</span> metrics = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
    queues.<span class="hljs-title function_">map</span>(<span class="hljs-title function_">async</span> (queue) =&gt; {
      <span class="hljs-keyword">const</span> counts = <span class="hljs-keyword">await</span> queue.<span class="hljs-title function_">getJobCounts</span>();
      <span class="hljs-keyword">const</span> waiting = <span class="hljs-keyword">await</span> queue.<span class="hljs-title function_">getWaiting</span>();
      <span class="hljs-keyword">const</span> failed = <span class="hljs-keyword">await</span> queue.<span class="hljs-title function_">getFailed</span>();
      
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">name</span>: queue.<span class="hljs-property">name</span>,
        counts,
        <span class="hljs-attr">oldestWaiting</span>: waiting[<span class="hljs-number">0</span>]?.<span class="hljs-property">timestamp</span>,
        <span class="hljs-attr">recentFailures</span>: failed.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>),
      };
    })
  );

  <span class="hljs-keyword">return</span> metrics;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="390" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%E2%9C%85-bonnes-pratiques"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Bonnes pratiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Concurrency</strong> adapt√©e √† la charge</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Retry</strong> avec backoff exponentiel</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Monitoring</strong> des queues</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Cleanup</strong> des jobs termin√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Alertes</strong> sur les √©checs</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="391" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Notifications push &amp; background jobs&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Notifications push &amp; background jobs</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>BullMQ</strong> ‚Äî bullmq.io</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Redis</strong> ‚Äî redis.io</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>node-schedule</strong> ‚Äî npmjs.com/package/node-schedule</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="392" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>

<h1 id="%F0%9F%9A%80-cicd--d%C3%A9ploiement-vercel"><img class="emoji" draggable="false" alt="üöÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg" data-marp-twemoji=""/> <strong>CI/CD &amp; d√©ploiement Vercel</strong></h1>
<h2 id="pipeline-de-production"><strong>Pipeline de production</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Mettre en place un pipeline CI/CD complet avec Vercel</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Vercel</strong> = D√©ploiement Next.js optimis√©</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="393" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Configurer <strong>Vercel</strong> pour Next.js</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Mettre en place <strong>preview deployments</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">G√©rer les <strong>environnements</strong> multiples</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Optimiser les <strong>performances</strong> de d√©ploiement</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="394" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%E2%9A%99%EF%B8%8F-configuration-vercel"><img class="emoji" draggable="false" alt="‚öôÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2699.svg" data-marp-twemoji=""/> <strong>Configuration Vercel</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i -g vercel
vercel login
vercel
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="variables-denvironnement">Variables d'environnement</h3>
<pre><code class="language-env"># Production
DATABASE_URL=postgresql://...
STRIPE_SECRET_KEY=sk_live_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...

# Preview
DATABASE_URL=postgresql://..._preview
STRIPE_SECRET_KEY=sk_test_...
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="395" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%93%81-verceljson"><img class="emoji" draggable="false" alt="üìÅ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c1.svg" data-marp-twemoji=""/> <strong>vercel.json</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;framework&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;nextjs&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;buildCommand&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm run build&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;devCommand&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm run dev&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;installCommand&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm ci&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;functions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;app/api/**/*.ts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;maxDuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;headers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/(.*)&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;headers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;X-Frame-Options&quot;</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;DENY&quot;</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="396" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%8C%BF-github-actions"><img class="emoji" draggable="false" alt="üåø" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f33f.svg" data-marp-twemoji=""/> <strong>GitHub Actions</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-yaml"><span class="hljs-comment"># .github/workflows/deploy.yml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">Vercel</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]
  <span class="hljs-attr">pull_request:</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
      
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node.js</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">&#x27;20&#x27;</span>
          <span class="hljs-attr">cache:</span> <span class="hljs-string">&#x27;npm&#x27;</span>
      
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span>
      
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">tests</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">test</span>
      
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">Vercel</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">amondnet/vercel-action@v25</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">vercel-token:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.VERCEL_TOKEN</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">vercel-org-id:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.VERCEL_ORG_ID</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">vercel-project-id:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.VERCEL_PROJECT_ID</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">vercel-args:</span> <span class="hljs-string">&#x27;--prod&#x27;</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="397" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%94%84-preview-deployments"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Preview deployments</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="automatique-avec-vercel">Automatique avec Vercel</h3>
<ul>
<li data-marpit-fragment="1">Chaque <strong>PR</strong> ‚Üí Preview automatique</li>
<li data-marpit-fragment="2"><strong>URL unique</strong> g√©n√©r√©e</li>
<li data-marpit-fragment="3"><strong>Commentaire</strong> automatique sur la PR</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="configuration">Configuration</h3>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;github&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;autoAlias&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;autoJobCancelation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="398" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%8C%8D-environnements-multiples"><img class="emoji" draggable="false" alt="üåç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f30d.svg" data-marp-twemoji=""/> <strong>Environnements multiples</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="structure-recommand%C3%A9e">Structure recommand√©e</h3>
<ul>
<li data-marpit-fragment="1"><strong>Development</strong> : <code>vercel dev</code></li>
<li data-marpit-fragment="2"><strong>Preview</strong> : Branches PR</li>
<li data-marpit-fragment="3"><strong>Staging</strong> : Branche <code>staging</code></li>
<li data-marpit-fragment="4"><strong>Production</strong> : Branche <code>main</code></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="variables-par-environnement">Variables par environnement</h3>
<pre><code class="language-bash"><span class="hljs-comment"># Production</span>
vercel <span class="hljs-built_in">env</span> add DATABASE_URL production
vercel <span class="hljs-built_in">env</span> add STRIPE_SECRET_KEY production

<span class="hljs-comment"># Preview</span>
vercel <span class="hljs-built_in">env</span> add DATABASE_URL preview
vercel <span class="hljs-built_in">env</span> add STRIPE_SECRET_KEY preview
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="399" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%93%8A-monitoring-des-d%C3%A9ploiements"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Monitoring des d√©ploiements</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/api/deployment-status/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> deployments = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(
    <span class="hljs-string">`https://api.vercel.com/v6/deployments?projectId=<span class="hljs-subst">${process.env.VERCEL_PROJECT_ID}</span>`</span>,
    {
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${process.env.VERCEL_TOKEN}</span>`</span>,
      },
    }
  );

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>(<span class="hljs-keyword">await</span> deployments.<span class="hljs-title function_">json</span>());
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="400" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%94%8D-analytics-vercel"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Analytics Vercel</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/layout.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Analytics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vercel/analytics/react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SpeedInsights</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vercel/speed-insights/next&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">Analytics</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">SpeedInsights</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="401" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%9A%80-optimisations-de-build"><img class="emoji" draggable="false" alt="üöÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg" data-marp-twemoji=""/> <strong>Optimisations de build</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-js"><span class="hljs-comment">// next.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">experimental</span>: {
    <span class="hljs-attr">turbo</span>: {
      <span class="hljs-attr">rules</span>: {
        <span class="hljs-string">&#x27;*.svg&#x27;</span>: {
          <span class="hljs-attr">loaders</span>: [<span class="hljs-string">&#x27;@svgr/webpack&#x27;</span>],
          <span class="hljs-attr">as</span>: <span class="hljs-string">&#x27;*.js&#x27;</span>,
        },
      },
    },
  },
  
  <span class="hljs-comment">// Optimisations</span>
  <span class="hljs-attr">images</span>: {
    <span class="hljs-attr">domains</span>: [<span class="hljs-string">&#x27;example.com&#x27;</span>],
    <span class="hljs-attr">formats</span>: [<span class="hljs-string">&#x27;image/webp&#x27;</span>, <span class="hljs-string">&#x27;image/avif&#x27;</span>],
  },
  
  <span class="hljs-comment">// Compression</span>
  <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
  
  <span class="hljs-comment">// Bundle analyzer</span>
  ...(process.<span class="hljs-property">env</span>.<span class="hljs-property">ANALYZE</span> === <span class="hljs-string">&#x27;true&#x27;</span> &amp;&amp; {
    <span class="hljs-attr">webpack</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
      config.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">push</span>(
        <span class="hljs-title function_">new</span> (<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;webpack-bundle-analyzer&#x27;</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>)()
      );
      <span class="hljs-keyword">return</span> config;
    },
  }),
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="402" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%94%84-rollback-automatique"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Rollback automatique</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// scripts/health-check.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">healthCheck</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${process.env.VERCEL_URL}</span>/api/health`</span>);
    
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Health check failed&#x27;</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Health check failed:&#x27;</span>, error);
    
    <span class="hljs-comment">// D√©clencher un rollback</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">rollbackDeployment</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="403" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%93%88-performance-monitoring"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>Performance monitoring</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/api/web-vitals/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { name, value, id } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-comment">// Logger les Web Vitals</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Web Vital <span class="hljs-subst">${name}</span>: <span class="hljs-subst">${value}</span>ms (<span class="hljs-subst">${id}</span>)`</span>);
  
  <span class="hljs-comment">// Envoyer √† un service d&#x27;analytics</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendToAnalytics</span>({
    <span class="hljs-attr">metric</span>: name,
    value,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
    <span class="hljs-attr">url</span>: request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;referer&#x27;</span>),
  });
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">received</span>: <span class="hljs-literal">true</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="404" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%94%90-s%C3%A9curit%C3%A9-des-d%C3%A9ploiements"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>S√©curit√© des d√©ploiements</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="bonnes-pratiques">Bonnes pratiques</h3>
<ul>
<li data-marpit-fragment="1"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Secrets</strong> dans Vercel Dashboard</li>
<li data-marpit-fragment="2"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>HTTPS</strong> automatique</li>
<li data-marpit-fragment="3"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Headers</strong> de s√©curit√©</li>
<li data-marpit-fragment="4"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Rate limiting</strong> sur les APIs</li>
<li data-marpit-fragment="5"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>CSP</strong> (Content Security Policy)</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="405" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%93%8A-dashboard-de-d%C3%A9ploiement"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Dashboard de d√©ploiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DeploymentDashboard</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [deployments, setDeployments] = <span class="hljs-title function_">useState</span>([]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchDeployments</span>().<span class="hljs-title function_">then</span>(setDeployments);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>D√©ploiements<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {deployments.map(deployment =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{deployment.id}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{deployment.meta?.gitCommitMessage}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Statut: {deployment.state}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Environnement: {deployment.target}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>URL: <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">{deployment.url}</span>&gt;</span>{deployment.url}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="406" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%E2%9C%85-checklist-d%C3%A9ploiement"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist d√©ploiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Variables</strong> d'environnement configur√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Tests</strong> passent avant d√©ploiement</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Preview</strong> automatique sur les PR</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Monitoring</strong> des performances</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Rollback</strong> automatique en cas d'erreur</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="407" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;CI/CD &amp; d√©ploiement Vercel&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">CI/CD &amp; d√©ploiement Vercel</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Vercel</strong> ‚Äî vercel.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Vercel CLI</strong> ‚Äî vercel.com/docs/cli</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>GitHub Actions</strong> ‚Äî docs.github.com/actions</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="408" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>

<h1 id="%F0%9F%93%8A-observabilit%C3%A9-logs--alerting"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Observabilit√©, logs &amp; alerting</strong></h1>
<h2 id="monitoring-en-production"><strong>Monitoring en production</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Mettre en place un monitoring complet en production</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Observabilit√©</strong> = Logs + M√©triques + Traces</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="409" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Centraliser les <strong>logs</strong> structur√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Configurer des <strong>alertes</strong> intelligentes</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Utiliser <strong>Sentry</strong> pour les erreurs</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Mettre en place des <strong>dashboards</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="410" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%9D-logging-structur%C3%A9"><img class="emoji" draggable="false" alt="üìù" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4dd.svg" data-marp-twemoji=""/> <strong>Logging structur√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i pino pino-pretty
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/logger.ts</span>
<span class="hljs-keyword">import</span> pino <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pino&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> logger = <span class="hljs-title function_">pino</span>({
  <span class="hljs-attr">level</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">LOG_LEVEL</span> || <span class="hljs-string">&#x27;info&#x27;</span>,
  <span class="hljs-attr">formatters</span>: {
    <span class="hljs-attr">level</span>: <span class="hljs-function">(<span class="hljs-params">label</span>) =&gt;</span> ({ <span class="hljs-attr">level</span>: label }),
  },
  <span class="hljs-attr">timestamp</span>: pino.<span class="hljs-property">stdTimeFunctions</span>.<span class="hljs-property">isoTime</span>,
});

<span class="hljs-comment">// Usage</span>
logger.<span class="hljs-title function_">info</span>({ <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;123&#x27;</span>, <span class="hljs-attr">action</span>: <span class="hljs-string">&#x27;login&#x27;</span> }, <span class="hljs-string">&#x27;User logged in&#x27;</span>);
logger.<span class="hljs-title function_">error</span>({ err, requestId }, <span class="hljs-string">&#x27;Request failed&#x27;</span>);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="411" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%8A-m%C3%A9triques-avec-prometheus"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>M√©triques avec Prometheus</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i prom-client
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/metrics.ts</span>
<span class="hljs-keyword">import</span> { register, <span class="hljs-title class_">Counter</span>, <span class="hljs-title class_">Histogram</span>, <span class="hljs-title class_">Gauge</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;prom-client&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> httpRequestsTotal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Counter</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;http_requests_total&#x27;</span>,
  <span class="hljs-attr">help</span>: <span class="hljs-string">&#x27;Total number of HTTP requests&#x27;</span>,
  <span class="hljs-attr">labelNames</span>: [<span class="hljs-string">&#x27;method&#x27;</span>, <span class="hljs-string">&#x27;route&#x27;</span>, <span class="hljs-string">&#x27;status&#x27;</span>],
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> httpRequestDuration = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Histogram</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;http_request_duration_seconds&#x27;</span>,
  <span class="hljs-attr">help</span>: <span class="hljs-string">&#x27;Duration of HTTP requests in seconds&#x27;</span>,
  <span class="hljs-attr">labelNames</span>: [<span class="hljs-string">&#x27;method&#x27;</span>, <span class="hljs-string">&#x27;route&#x27;</span>],
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> activeUsers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gauge</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;active_users&#x27;</span>,
  <span class="hljs-attr">help</span>: <span class="hljs-string">&#x27;Number of active users&#x27;</span>,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="412" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%8A-middleware-de-m%C3%A9triques"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Middleware de m√©triques</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// middleware.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/server&#x27;</span>;
<span class="hljs-keyword">import</span> { httpRequestsTotal, httpRequestDuration } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/metrics&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">NextRequest</span></span>) {
  <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  
  <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
  
  response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;X-Request-ID&#x27;</span>, <span class="hljs-title function_">nanoid</span>());
  
  <span class="hljs-comment">// M√©triques</span>
  <span class="hljs-keyword">const</span> duration = (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start) / <span class="hljs-number">1000</span>;
  httpRequestsTotal
    .<span class="hljs-title function_">labels</span>(request.<span class="hljs-property">method</span>, request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>, response.<span class="hljs-property">status</span>.<span class="hljs-title function_">toString</span>())
    .<span class="hljs-title function_">inc</span>();
  
  httpRequestDuration
    .<span class="hljs-title function_">labels</span>(request.<span class="hljs-property">method</span>, request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>)
    .<span class="hljs-title function_">observe</span>(duration);
  
  <span class="hljs-keyword">return</span> response;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="413" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%90%9B-sentry-pour-les-erreurs"><img class="emoji" draggable="false" alt="üêõ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f41b.svg" data-marp-twemoji=""/> <strong>Sentry pour les erreurs</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i @sentry/nextjs
npx @sentry/wizard -i nextjs
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// sentry.client.config.ts</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Sentry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@sentry/nextjs&#x27;</span>;

<span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">init</span>({
  <span class="hljs-attr">dsn</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_SENTRY_DSN</span>,
  <span class="hljs-attr">environment</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>,
  <span class="hljs-attr">tracesSampleRate</span>: <span class="hljs-number">1.0</span>,
  <span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="414" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%90%9B-sentry-c%C3%B4t%C3%A9-serveur"><img class="emoji" draggable="false" alt="üêõ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f41b.svg" data-marp-twemoji=""/> <strong>Sentry c√¥t√© serveur</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// sentry.server.config.ts</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Sentry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@sentry/nextjs&#x27;</span>;

<span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">init</span>({
  <span class="hljs-attr">dsn</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">SENTRY_DSN</span>,
  <span class="hljs-attr">environment</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>,
  <span class="hljs-attr">tracesSampleRate</span>: <span class="hljs-number">0.1</span>,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="415" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%8A-endpoint-m%C3%A9triques"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Endpoint m√©triques</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/metrics/route.ts</span>
<span class="hljs-keyword">import</span> { register } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;prom-client&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> metrics = <span class="hljs-keyword">await</span> register.<span class="hljs-title function_">metrics</span>();
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(metrics, {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">&#x27;Content-Type&#x27;</span>: register.<span class="hljs-property">contentType</span>,
    },
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="416" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%9A%A8-alertes-intelligentes"><img class="emoji" draggable="false" alt="üö®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6a8.svg" data-marp-twemoji=""/> <strong>Alertes intelligentes</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/alerts.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkAlerts</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> metrics = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchMetrics</span>();
  
  <span class="hljs-comment">// Taux d&#x27;erreur √©lev√©</span>
  <span class="hljs-keyword">if</span> (metrics.<span class="hljs-property">errorRate</span> &gt; <span class="hljs-number">0.05</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendAlert</span>({
      <span class="hljs-attr">severity</span>: <span class="hljs-string">&#x27;critical&#x27;</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">`Taux d&#x27;erreur √©lev√©: <span class="hljs-subst">${metrics.errorRate}</span>%`</span>,
      <span class="hljs-attr">channel</span>: <span class="hljs-string">&#x27;slack&#x27;</span>,
    });
  }
  
  <span class="hljs-comment">// Latence √©lev√©e</span>
  <span class="hljs-keyword">if</span> (metrics.<span class="hljs-property">p95Latency</span> &gt; <span class="hljs-number">2000</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendAlert</span>({
      <span class="hljs-attr">severity</span>: <span class="hljs-string">&#x27;warning&#x27;</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">`Latence P95 √©lev√©e: <span class="hljs-subst">${metrics.p95Latency}</span>ms`</span>,
      <span class="hljs-attr">channel</span>: <span class="hljs-string">&#x27;email&#x27;</span>,
    });
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="417" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%B1-int%C3%A9gration-slack"><img class="emoji" draggable="false" alt="üì±" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4f1.svg" data-marp-twemoji=""/> <strong>Int√©gration Slack</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/slack.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendSlackAlert</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">SLACK_WEBHOOK_URL</span>!, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">text</span>: <span class="hljs-string">`<img class="emoji" draggable="false" alt="üö®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6a8.svg" data-marp-twemoji=""/> Alerte Production`</span>,
      <span class="hljs-attr">attachments</span>: [{
        <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;danger&#x27;</span>,
        <span class="hljs-attr">fields</span>: [{
          <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Message&#x27;</span>,
          <span class="hljs-attr">value</span>: message,
          <span class="hljs-attr">short</span>: <span class="hljs-literal">false</span>,
        }],
      }],
    }),
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="418" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%8A-dashboard-grafana"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Dashboard Grafana</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="configuration-prometheus">Configuration Prometheus</h3>
<pre><code class="language-yaml"><span class="hljs-comment"># prometheus.yml</span>
<span class="hljs-attr">global:</span>
  <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>

<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&#x27;nextjs-app&#x27;</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&#x27;localhost:3000&#x27;</span>]
    <span class="hljs-attr">metrics_path:</span> <span class="hljs-string">&#x27;/api/metrics&#x27;</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">5s</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="419" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%88-m%C3%A9triques-business"><img class="emoji" draggable="false" alt="üìà" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4c8.svg" data-marp-twemoji=""/> <strong>M√©triques business</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/business-metrics.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userRegistrations = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Counter</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;user_registrations_total&#x27;</span>,
  <span class="hljs-attr">help</span>: <span class="hljs-string">&#x27;Total user registrations&#x27;</span>,
  <span class="hljs-attr">labelNames</span>: [<span class="hljs-string">&#x27;source&#x27;</span>],
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revenue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Counter</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;revenue_total&#x27;</span>,
  <span class="hljs-attr">help</span>: <span class="hljs-string">&#x27;Total revenue in cents&#x27;</span>,
  <span class="hljs-attr">labelNames</span>: [<span class="hljs-string">&#x27;currency&#x27;</span>],
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> conversionRate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gauge</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;conversion_rate&#x27;</span>,
  <span class="hljs-attr">help</span>: <span class="hljs-string">&#x27;Conversion rate percentage&#x27;</span>,
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="420" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%94%8D-tracing-distribu%C3%A9"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Tracing distribu√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/tracing.ts</span>
<span class="hljs-keyword">import</span> { trace } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@opentelemetry/api&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> withTrace&lt;T&gt;(
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;
): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
  <span class="hljs-keyword">return</span> trace.<span class="hljs-title function_">getActiveSpan</span>()?.<span class="hljs-title function_">setAttributes</span>({
    <span class="hljs-string">&#x27;operation.name&#x27;</span>: name,
  }) || <span class="hljs-title function_">fn</span>();
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">withTrace</span>(<span class="hljs-string">&#x27;user-login&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">authenticateUser</span>(credentials);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateLastLogin</span>(userId);
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="421" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%8A-health-checks"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Health checks</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/health/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> checks = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([
    <span class="hljs-title function_">checkDatabase</span>(),
    <span class="hljs-title function_">checkRedis</span>(),
    <span class="hljs-title function_">checkExternalAPI</span>(),
  ]);

  <span class="hljs-keyword">const</span> results = checks.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">check, index</span>) =&gt;</span> ({
    <span class="hljs-attr">service</span>: [<span class="hljs-string">&#x27;database&#x27;</span>, <span class="hljs-string">&#x27;redis&#x27;</span>, <span class="hljs-string">&#x27;external-api&#x27;</span>][index],
    <span class="hljs-attr">status</span>: check.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;fulfilled&#x27;</span> ? <span class="hljs-string">&#x27;healthy&#x27;</span> : <span class="hljs-string">&#x27;unhealthy&#x27;</span>,
    <span class="hljs-attr">error</span>: check.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;rejected&#x27;</span> ? check.<span class="hljs-property">reason</span>.<span class="hljs-property">message</span> : <span class="hljs-literal">null</span>,
  }));

  <span class="hljs-keyword">const</span> allHealthy = results.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;healthy&#x27;</span>);
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">status</span>: allHealthy ? <span class="hljs-string">&#x27;healthy&#x27;</span> : <span class="hljs-string">&#x27;unhealthy&#x27;</span>,
    <span class="hljs-attr">checks</span>: results,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
  }, {
    <span class="hljs-attr">status</span>: allHealthy ? <span class="hljs-number">200</span> : <span class="hljs-number">503</span>,
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="422" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%8A-uptime-monitoring"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Uptime monitoring</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/uptime.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">recordUptime</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${process.env.APP_URL}</span>/api/health`</span>);
  <span class="hljs-keyword">const</span> isHealthy = response.<span class="hljs-property">ok</span>;
  
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">uptime</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
      <span class="hljs-attr">status</span>: isHealthy ? <span class="hljs-string">&#x27;up&#x27;</span> : <span class="hljs-string">&#x27;down&#x27;</span>,
      <span class="hljs-attr">responseTime</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start,
    },
  });
}

<span class="hljs-comment">// Cron job toutes les minutes</span>
<span class="hljs-built_in">setInterval</span>(recordUptime, <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="423" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%8A-dashboard-personnalis%C3%A9"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Dashboard personnalis√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MonitoringDashboard</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [metrics, setMetrics] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-title function_">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/metrics/summary&#x27;</span>);
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
      <span class="hljs-title function_">setMetrics</span>(data);
    }, <span class="hljs-number">30000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Monitoring Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {metrics &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Performance<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Latence P95: {metrics.p95Latency}ms<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Taux d&#x27;erreur: {metrics.errorRate}%<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>RPS: {metrics.requestsPerSecond}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Business<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Utilisateurs actifs: {metrics.activeUsers}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Conversions: {metrics.conversions}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="424" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%E2%9C%85-checklist-observabilit%C3%A9"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist observabilit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Logs</strong> structur√©s centralis√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>M√©triques</strong> business et techniques</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Alertes</strong> configur√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Dashboards</strong> en temps r√©el</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Health checks</strong> automatis√©s</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="425" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Observabilit√©, logs &amp; alerting&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Observabilit√©, logs &amp; alerting</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Sentry</strong> ‚Äî sentry.io</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Prometheus</strong> ‚Äî prometheus.io</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Grafana</strong> ‚Äî grafana.com</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Pino</strong> ‚Äî getpino.io</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="426" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>

<h1 id="%F0%9F%94%92-s%C3%A9curit%C3%A9--durcissement"><img class="emoji" draggable="false" alt="üîí" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f512.svg" data-marp-twemoji=""/> <strong>S√©curit√© &amp; durcissement</strong></h1>
<h2 id="protection-avanc%C3%A9e"><strong>Protection avanc√©e</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Durcir la s√©curit√© d'une application Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>S√©curit√©</strong> = Pr√©vention + D√©tection + R√©ponse</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="427" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Impl√©menter des <strong>headers</strong> de s√©curit√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Prot√©ger contre les <strong>attaques</strong> courantes</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Mettre en place la <strong>validation</strong> stricte</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">Configurer le <strong>monitoring</strong> de s√©curit√©</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="428" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-headers-de-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>Headers de s√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// next.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">headers</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">source</span>: <span class="hljs-string">&#x27;/(.*)&#x27;</span>,
        <span class="hljs-attr">headers</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;X-Frame-Options&#x27;</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;DENY&#x27;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;X-Content-Type-Options&#x27;</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;nosniff&#x27;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;Referrer-Policy&#x27;</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;strict-origin-when-cross-origin&#x27;</span>,
          },
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;Permissions-Policy&#x27;</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;camera=(), microphone=(), geolocation=()&#x27;</span>,
          },
        ],
      },
    ];
  },
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="429" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%92-content-security-policy"><img class="emoji" draggable="false" alt="üîí" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f512.svg" data-marp-twemoji=""/> <strong>Content Security Policy</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// next.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">headers</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">source</span>: <span class="hljs-string">&#x27;/(.*)&#x27;</span>,
        <span class="hljs-attr">headers</span>: [
          {
            <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;Content-Security-Policy&#x27;</span>,
            <span class="hljs-attr">value</span>: [
              <span class="hljs-string">&quot;default-src &#x27;self&#x27;&quot;</span>,
              <span class="hljs-string">&quot;script-src &#x27;self&#x27; &#x27;unsafe-eval&#x27; &#x27;unsafe-inline&#x27; https://js.stripe.com&quot;</span>,
              <span class="hljs-string">&quot;style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; https://fonts.googleapis.com&quot;</span>,
              <span class="hljs-string">&quot;img-src &#x27;self&#x27; data: https:&quot;</span>,
              <span class="hljs-string">&quot;font-src &#x27;self&#x27; https://fonts.gstatic.com&quot;</span>,
              <span class="hljs-string">&quot;connect-src &#x27;self&#x27; https://api.stripe.com&quot;</span>,
              <span class="hljs-string">&quot;frame-src https://js.stripe.com&quot;</span>,
            ].<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;; &#x27;</span>),
          },
        ],
      },
    ];
  },
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="430" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%90-rate-limiting"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Rate limiting</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i @upstash/ratelimit @upstash/redis
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/rate-limit.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Ratelimit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@upstash/ratelimit&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Redis</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@upstash/redis&#x27;</span>;

<span class="hljs-keyword">const</span> redis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Redis</span>({
  <span class="hljs-attr">url</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">UPSTASH_REDIS_REST_URL</span>!,
  <span class="hljs-attr">token</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">UPSTASH_REDIS_REST_TOKEN</span>!,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ratelimit = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ratelimit</span>({
  redis,
  <span class="hljs-attr">limiter</span>: <span class="hljs-title class_">Ratelimit</span>.<span class="hljs-title function_">slidingWindow</span>(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;10 s&#x27;</span>),
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="431" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%90-middleware-de-rate-limiting"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Middleware de rate limiting</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// middleware.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/server&#x27;</span>;
<span class="hljs-keyword">import</span> { ratelimit } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/rate-limit&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">NextRequest</span></span>) {
  <span class="hljs-keyword">const</span> ip = request.<span class="hljs-property">ip</span> ?? <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>;
  
  <span class="hljs-keyword">const</span> { success, limit, reset, remaining } = <span class="hljs-keyword">await</span> ratelimit.<span class="hljs-title function_">limit</span>(ip);
  
  <span class="hljs-keyword">if</span> (!success) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(<span class="hljs-string">&#x27;Too Many Requests&#x27;</span>, {
      <span class="hljs-attr">status</span>: <span class="hljs-number">429</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&#x27;X-RateLimit-Limit&#x27;</span>: limit.<span class="hljs-title function_">toString</span>(),
        <span class="hljs-string">&#x27;X-RateLimit-Remaining&#x27;</span>: remaining.<span class="hljs-title function_">toString</span>(),
        <span class="hljs-string">&#x27;X-RateLimit-Reset&#x27;</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(reset).<span class="hljs-title function_">toISOString</span>(),
      },
    });
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="432" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-validation-stricte"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>Validation stricte</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/validation.ts</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;zod&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">DOMPurify</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;isomorphic-dompurify&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sanitizeInput</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">DOMPurify</span>.<span class="hljs-title function_">sanitize</span>(input.<span class="hljs-title function_">trim</span>());
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userSchema = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">email</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">email</span>().<span class="hljs-title function_">transform</span>(sanitizeInput),
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">max</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">transform</span>(sanitizeInput),
  <span class="hljs-attr">password</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">8</span>).<span class="hljs-title function_">regex</span>(<span class="hljs-regexp">/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/</span>),
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> apiKeySchema = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">key</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">uuid</span>(),
  <span class="hljs-attr">permissions</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">&#x27;read&#x27;</span>, <span class="hljs-string">&#x27;write&#x27;</span>, <span class="hljs-string">&#x27;admin&#x27;</span>])),
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="433" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%90-authentification-renforc%C3%A9e"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Authentification renforc√©e</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/auth.ts</span>
<span class="hljs-keyword">import</span> bcrypt <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;bcryptjs&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SignJWT</span>, jwtVerify } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jose&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">hashPassword</span>(<span class="hljs-params"><span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">return</span> bcrypt.<span class="hljs-title function_">hash</span>(password, <span class="hljs-number">12</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyPassword</span>(<span class="hljs-params">
  <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">hash</span>: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
  <span class="hljs-keyword">return</span> bcrypt.<span class="hljs-title function_">compare</span>(password, hash);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createToken</span>(<span class="hljs-params"><span class="hljs-attr">payload</span>: <span class="hljs-built_in">any</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SignJWT</span>(payload)
    .<span class="hljs-title function_">setProtectedHeader</span>({ <span class="hljs-attr">alg</span>: <span class="hljs-string">&#x27;HS256&#x27;</span> })
    .<span class="hljs-title function_">setIssuedAt</span>()
    .<span class="hljs-title function_">setExpirationTime</span>(<span class="hljs-string">&#x27;1h&#x27;</span>)
    .<span class="hljs-title function_">sign</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>().<span class="hljs-title function_">encode</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>));
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="434" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%90-session-s%C3%A9curis%C3%A9e"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Session s√©curis√©e</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/session.ts</span>
<span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/headers&#x27;</span>;
<span class="hljs-keyword">import</span> { createToken, verifyToken } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./auth&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSecureSession</span>(<span class="hljs-params"><span class="hljs-attr">userId</span>: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createToken</span>({ userId });
  
  <span class="hljs-title function_">cookies</span>().<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;session&#x27;</span>, token, {
    <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">secure</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;production&#x27;</span>,
    <span class="hljs-attr">sameSite</span>: <span class="hljs-string">&#x27;strict&#x27;</span>,
    <span class="hljs-attr">maxAge</span>: <span class="hljs-number">60</span> * <span class="hljs-number">60</span>, <span class="hljs-comment">// 1 heure</span>
  });
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSecureSession</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> session = <span class="hljs-title function_">cookies</span>().<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;session&#x27;</span>);
  
  <span class="hljs-keyword">if</span> (!session) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { payload } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">verifyToken</span>(session.<span class="hljs-property">value</span>);
    <span class="hljs-keyword">return</span> payload;
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="435" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-protection-csrf"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>Protection CSRF</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/csrf.ts</span>
<span class="hljs-keyword">import</span> { randomBytes } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;crypto&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateCSRFToken</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">32</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">&#x27;hex&#x27;</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyCSRFToken</span>(<span class="hljs-params"><span class="hljs-attr">token</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">sessionToken</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">return</span> token === sessionToken;
}

<span class="hljs-comment">// Usage dans un formulaire</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CSRFForm</span>(<span class="hljs-params">{ children }: { children: React.ReactNode }</span>) {
  <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">generateCSRFToken</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;csrf_token&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{token}</span> /&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="436" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%8D-d%C3%A9tection-dintrusion"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>D√©tection d'intrusion</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/security-monitor.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">logSecurityEvent</span>(<span class="hljs-params">
  <span class="hljs-attr">event</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">details</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">severity</span>: <span class="hljs-string">&#x27;low&#x27;</span> | <span class="hljs-string">&#x27;medium&#x27;</span> | <span class="hljs-string">&#x27;high&#x27;</span> | <span class="hljs-string">&#x27;critical&#x27;</span>
</span>) {
  <span class="hljs-keyword">await</span> db.<span class="hljs-property">securityLog</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">data</span>: {
      event,
      <span class="hljs-attr">details</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(details),
      severity,
      <span class="hljs-attr">ip</span>: details.<span class="hljs-property">ip</span>,
      <span class="hljs-attr">userAgent</span>: details.<span class="hljs-property">userAgent</span>,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
    },
  });

  <span class="hljs-keyword">if</span> (severity === <span class="hljs-string">&#x27;critical&#x27;</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendSecurityAlert</span>(event, details);
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="437" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%9A%A8-d%C3%A9tection-dattaques"><img class="emoji" draggable="false" alt="üö®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6a8.svg" data-marp-twemoji=""/> <strong>D√©tection d'attaques</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// middleware.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">NextRequest</span></span>) {
  <span class="hljs-keyword">const</span> userAgent = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;user-agent&#x27;</span>) || <span class="hljs-string">&#x27;&#x27;</span>;
  <span class="hljs-keyword">const</span> pathname = request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>;
  
  <span class="hljs-comment">// D√©tection de bots malveillants</span>
  <span class="hljs-keyword">const</span> maliciousPatterns = [
    <span class="hljs-regexp">/sqlmap/i</span>,
    <span class="hljs-regexp">/nikto/i</span>,
    <span class="hljs-regexp">/nmap/i</span>,
    <span class="hljs-regexp">/masscan/i</span>,
  ];
  
  <span class="hljs-keyword">if</span> (maliciousPatterns.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">pattern</span> =&gt;</span> pattern.<span class="hljs-title function_">test</span>(userAgent))) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">logSecurityEvent</span>(<span class="hljs-string">&#x27;malicious_bot&#x27;</span>, {
      userAgent,
      <span class="hljs-attr">ip</span>: request.<span class="hljs-property">ip</span>,
      pathname,
    }, <span class="hljs-string">&#x27;high&#x27;</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(<span class="hljs-string">&#x27;Forbidden&#x27;</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">403</span> });
  }
  
  <span class="hljs-comment">// D√©tection de tentatives de path traversal</span>
  <span class="hljs-keyword">if</span> (pathname.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;..&#x27;</span>) || pathname.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;~&#x27;</span>)) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">logSecurityEvent</span>(<span class="hljs-string">&#x27;path_traversal_attempt&#x27;</span>, {
      pathname,
      <span class="hljs-attr">ip</span>: request.<span class="hljs-property">ip</span>,
    }, <span class="hljs-string">&#x27;medium&#x27;</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(<span class="hljs-string">&#x27;Bad Request&#x27;</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">400</span> });
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="438" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%90-chiffrement-des-donn%C3%A9es"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Chiffrement des donn√©es</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/encryption.ts</span>
<span class="hljs-keyword">import</span> { createCipheriv, createDecipheriv, randomBytes } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;crypto&#x27;</span>;

<span class="hljs-keyword">const</span> algorithm = <span class="hljs-string">&#x27;aes-256-gcm&#x27;</span>;
<span class="hljs-keyword">const</span> key = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">ENCRYPTION_KEY</span>!, <span class="hljs-string">&#x27;hex&#x27;</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">encrypt</span>(<span class="hljs-params"><span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">const</span> iv = <span class="hljs-title function_">randomBytes</span>(<span class="hljs-number">16</span>);
  <span class="hljs-keyword">const</span> cipher = <span class="hljs-title function_">createCipheriv</span>(algorithm, key, iv);
  
  <span class="hljs-keyword">let</span> encrypted = cipher.<span class="hljs-title function_">update</span>(text, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-string">&#x27;hex&#x27;</span>);
  encrypted += cipher.<span class="hljs-title function_">final</span>(<span class="hljs-string">&#x27;hex&#x27;</span>);
  
  <span class="hljs-keyword">const</span> authTag = cipher.<span class="hljs-title function_">getAuthTag</span>();
  
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${iv.toString(<span class="hljs-string">&#x27;hex&#x27;</span>)}</span>:<span class="hljs-subst">${authTag.toString(<span class="hljs-string">&#x27;hex&#x27;</span>)}</span>:<span class="hljs-subst">${encrypted}</span>`</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">decrypt</span>(<span class="hljs-params"><span class="hljs-attr">encryptedText</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">const</span> [ivHex, authTagHex, encrypted] = encryptedText.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;:&#x27;</span>);
  
  <span class="hljs-keyword">const</span> iv = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(ivHex, <span class="hljs-string">&#x27;hex&#x27;</span>);
  <span class="hljs-keyword">const</span> authTag = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>(authTagHex, <span class="hljs-string">&#x27;hex&#x27;</span>);
  
  <span class="hljs-keyword">const</span> decipher = <span class="hljs-title function_">createDecipheriv</span>(algorithm, key, iv);
  decipher.<span class="hljs-title function_">setAuthTag</span>(authTag);
  
  <span class="hljs-keyword">let</span> decrypted = decipher.<span class="hljs-title function_">update</span>(encrypted, <span class="hljs-string">&#x27;hex&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);
  decrypted += decipher.<span class="hljs-title function_">final</span>(<span class="hljs-string">&#x27;utf8&#x27;</span>);
  
  <span class="hljs-keyword">return</span> decrypted;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="439" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%94%8D-audit-de-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="üîç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f50d.svg" data-marp-twemoji=""/> <strong>Audit de s√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm audit
npm audit fix
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-bash"><span class="hljs-comment"># Scan de vuln√©rabilit√©s</span>
npm i -g snyk
snyk <span class="hljs-built_in">test</span>
snyk monitor
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="440" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%9B%A1%EF%B8%8F-s%C3%A9curit%C3%A9-des-apis"><img class="emoji" draggable="false" alt="üõ°Ô∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6e1.svg" data-marp-twemoji=""/> <strong>S√©curit√© des APIs</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/protected/route.ts</span>
<span class="hljs-keyword">import</span> { getSecureSession } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/session&#x27;</span>;
<span class="hljs-keyword">import</span> { rateLimit } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/rate-limit&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-comment">// V√©rification de session</span>
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSecureSession</span>();
  <span class="hljs-keyword">if</span> (!session) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Unauthorized&#x27;</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">401</span> });
  }
  
  <span class="hljs-comment">// Rate limiting</span>
  <span class="hljs-keyword">const</span> ip = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;x-forwarded-for&#x27;</span>) || <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>;
  <span class="hljs-keyword">const</span> { success } = <span class="hljs-keyword">await</span> rateLimit.<span class="hljs-title function_">limit</span>(ip);
  <span class="hljs-keyword">if</span> (!success) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;Rate limited&#x27;</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">429</span> });
  }
  
  <span class="hljs-comment">// Validation des donn√©es</span>
  <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">const</span> validatedData = apiSchema.<span class="hljs-title function_">parse</span>(body);
  
  <span class="hljs-comment">// Traitement s√©curis√©</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">processSecurely</span>(validatedData);
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>(result);
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="441" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%93%8A-dashboard-de-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Dashboard de s√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SecurityDashboard</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [securityEvents, setSecurityEvents] = <span class="hljs-title function_">useState</span>([]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchSecurityEvents</span>().<span class="hljs-title function_">then</span>(setSecurityEvents);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Dashboard de S√©curit√©<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>√âv√©nements r√©cents<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        {securityEvents.map(event =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{event.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">alert-</span>${<span class="hljs-attr">event.severity</span>}`}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{event.event}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>IP: {event.ip}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Date: {event.timestamp}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Statistiques<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Tentatives de connexion √©chou√©es: {stats.failedLogins}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Requ√™tes bloqu√©es: {stats.blockedRequests}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="442" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%E2%9C%85-checklist-s%C3%A9curit%C3%A9"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist s√©curit√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Headers</strong> de s√©curit√© configur√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Rate limiting</strong> impl√©ment√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Validation</strong> stricte des donn√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Monitoring</strong> des √©v√©nements</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Audit</strong> r√©gulier des d√©pendances</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="443" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;S√©curit√© &amp; durcissement&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">S√©curit√© &amp; durcissement</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>OWASP</strong> ‚Äî owasp.org</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Next.js Security</strong> ‚Äî nextjs.org/docs/advanced-features/security-headers</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Snyk</strong> ‚Äî snyk.io</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="444" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>

<h1 id="%F0%9F%8F%97%EF%B8%8F-site-reliability-engineering"><img class="emoji" draggable="false" alt="üèóÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3d7.svg" data-marp-twemoji=""/> <strong>Site Reliability Engineering</strong></h1>
<h2 id="sre--devops-avanc%C3%A9"><strong>SRE &amp; DevOps avanc√©</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Appliquer les principes SRE √† une application Next.js</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>SRE</strong> = Ing√©nierie de la fiabilit√© des sites</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="445" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">D√©finir des <strong>SLI/SLO/SLA</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Impl√©menter des <strong>circuit breakers</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Mettre en place la <strong>r√©cup√©ration automatique</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">G√©rer les <strong>incidents</strong> de production</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="446" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%8A-slislosla"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>SLI/SLO/SLA</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="service-level-indicators-sli">Service Level Indicators (SLI)</h3>
<ul>
<li data-marpit-fragment="1"><strong>Disponibilit√©</strong> : % de requ√™tes r√©ussies</li>
<li data-marpit-fragment="2"><strong>Latence</strong> : P95 des temps de r√©ponse</li>
<li data-marpit-fragment="3"><strong>D√©bit</strong> : Requ√™tes par seconde</li>
<li data-marpit-fragment="4"><strong>Erreurs</strong> : % de requ√™tes en erreur</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="service-level-objectives-slo">Service Level Objectives (SLO)</h3>
<ul>
<li data-marpit-fragment="5">Disponibilit√© : <strong>99.9%</strong> (8.77h de downtime/an)</li>
<li data-marpit-fragment="6">Latence P95 : <strong>&lt; 200ms</strong></li>
<li data-marpit-fragment="7">Taux d'erreur : <strong>&lt; 0.1%</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="447" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%8A-monitoring-des-sli"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Monitoring des SLI</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/sli-monitoring.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SLIMonitor</span> {
  <span class="hljs-keyword">private</span> metrics = {
    <span class="hljs-attr">requests</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">errors</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">latencies</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>[],
  };

  <span class="hljs-title function_">recordRequest</span>(<span class="hljs-params"><span class="hljs-attr">latency</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">success</span>: <span class="hljs-built_in">boolean</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">requests</span>++;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">latencies</span>.<span class="hljs-title function_">push</span>(latency);
    
    <span class="hljs-keyword">if</span> (!success) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">errors</span>++;
    }
  }

  <span class="hljs-title function_">getAvailability</span>(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> ((<span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">requests</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">errors</span>) / <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">requests</span>) * <span class="hljs-number">100</span>;
  }

  <span class="hljs-title function_">getP95Latency</span>(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> sorted = <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">latencies</span>.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
    <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(sorted.<span class="hljs-property">length</span> * <span class="hljs-number">0.95</span>);
    <span class="hljs-keyword">return</span> sorted[index] || <span class="hljs-number">0</span>;
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="448" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%94%84-circuit-breaker"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Circuit Breaker</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-bash">npm i opossum
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/circuit-breaker.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CircuitBreaker</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;opossum&#x27;</span>;

<span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-attr">errorThresholdPercentage</span>: <span class="hljs-number">50</span>,
  <span class="hljs-attr">resetTimeout</span>: <span class="hljs-number">30000</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> apiCircuitBreaker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircuitBreaker</span>(
  <span class="hljs-title function_">async</span> (<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>) =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>`</span>);
    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
  },
  options
);

apiCircuitBreaker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;open&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Circuit breaker opened - API is down&#x27;</span>);
});

apiCircuitBreaker.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;halfOpen&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Circuit breaker half-open - testing API&#x27;</span>);
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="449" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%94%84-retry-avec-backoff"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Retry avec backoff</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/retry.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> retryWithBackoff&lt;T&gt;(
  <span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;,
  <span class="hljs-attr">maxRetries</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">3</span>,
  <span class="hljs-attr">baseDelay</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1000</span>
): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">lastError</span>: <span class="hljs-title class_">Error</span>;
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>; attempt &lt;= maxRetries; attempt++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fn</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      lastError = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>;
      
      <span class="hljs-keyword">if</span> (attempt === maxRetries) {
        <span class="hljs-keyword">throw</span> lastError;
      }
      
      <span class="hljs-keyword">const</span> delay = baseDelay * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, attempt);
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, delay));
    }
  }
  
  <span class="hljs-keyword">throw</span> lastError!;
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="450" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%9A%A8-chaos-engineering"><img class="emoji" draggable="false" alt="üö®" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f6a8.svg" data-marp-twemoji=""/> <strong>Chaos Engineering</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/chaos.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChaosMonkey</span> {
  <span class="hljs-keyword">private</span> enabled = process.<span class="hljs-property">env</span>.<span class="hljs-property">CHAOS_MONKEY_ENABLED</span> === <span class="hljs-string">&#x27;true&#x27;</span>;
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">injectFailure</span>(<span class="hljs-params"><span class="hljs-attr">probability</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0.1</span></span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">enabled</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; probability) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Chaos Monkey: Random failure injected&#x27;</span>);
    }
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">injectLatency</span>(<span class="hljs-params"><span class="hljs-attr">maxDelay</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1000</span></span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">enabled</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> delay = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * maxDelay;
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, delay));
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="451" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%94%84-health-checks-avanc%C3%A9s"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Health checks avanc√©s</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/health/route.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> checks = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([
    <span class="hljs-title function_">checkDatabase</span>(),
    <span class="hljs-title function_">checkRedis</span>(),
    <span class="hljs-title function_">checkExternalAPI</span>(),
    <span class="hljs-title function_">checkDiskSpace</span>(),
    <span class="hljs-title function_">checkMemoryUsage</span>(),
  ]);

  <span class="hljs-keyword">const</span> results = checks.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">check, index</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> service = [<span class="hljs-string">&#x27;database&#x27;</span>, <span class="hljs-string">&#x27;redis&#x27;</span>, <span class="hljs-string">&#x27;external-api&#x27;</span>, <span class="hljs-string">&#x27;disk&#x27;</span>, <span class="hljs-string">&#x27;memory&#x27;</span>][index];
    
    <span class="hljs-keyword">return</span> {
      service,
      <span class="hljs-attr">status</span>: check.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;fulfilled&#x27;</span> ? <span class="hljs-string">&#x27;healthy&#x27;</span> : <span class="hljs-string">&#x27;unhealthy&#x27;</span>,
      <span class="hljs-attr">responseTime</span>: check.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;fulfilled&#x27;</span> ? check.<span class="hljs-property">value</span>.<span class="hljs-property">responseTime</span> : <span class="hljs-literal">null</span>,
      <span class="hljs-attr">error</span>: check.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;rejected&#x27;</span> ? check.<span class="hljs-property">reason</span>.<span class="hljs-property">message</span> : <span class="hljs-literal">null</span>,
    };
  });

  <span class="hljs-keyword">const</span> allHealthy = results.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;healthy&#x27;</span>);
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">status</span>: allHealthy ? <span class="hljs-string">&#x27;healthy&#x27;</span> : <span class="hljs-string">&#x27;unhealthy&#x27;</span>,
    <span class="hljs-attr">checks</span>: results,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
    <span class="hljs-attr">version</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">APP_VERSION</span>,
  }, {
    <span class="hljs-attr">status</span>: allHealthy ? <span class="hljs-number">200</span> : <span class="hljs-number">503</span>,
  });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="452" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%8A-alerting-intelligent"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Alerting intelligent</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/alerting.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentAlerting</span> {
  <span class="hljs-keyword">private</span> alertHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>[]&gt;();
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">shouldAlert</span>(
    <span class="hljs-attr">metric</span>: <span class="hljs-built_in">string</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>,
    <span class="hljs-attr">threshold</span>: <span class="hljs-built_in">number</span>,
    <span class="hljs-attr">windowMinutes</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> windowMs = windowMinutes * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
    
    <span class="hljs-comment">// Nettoyer l&#x27;historique</span>
    <span class="hljs-keyword">const</span> history = <span class="hljs-variable language_">this</span>.<span class="hljs-property">alertHistory</span>.<span class="hljs-title function_">get</span>(metric) || [];
    <span class="hljs-keyword">const</span> recentHistory = history.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">timestamp</span> =&gt;</span> now - timestamp &lt; windowMs);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">alertHistory</span>.<span class="hljs-title function_">set</span>(metric, recentHistory);
    
    <span class="hljs-comment">// √âviter le spam d&#x27;alertes</span>
    <span class="hljs-keyword">if</span> (recentHistory.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// D√©clencher l&#x27;alerte si seuil d√©pass√©</span>
    <span class="hljs-keyword">if</span> (value &gt; threshold) {
      recentHistory.<span class="hljs-title function_">push</span>(now);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="453" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%94%84-auto-healing"><img class="emoji" draggable="false" alt="üîÑ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f504.svg" data-marp-twemoji=""/> <strong>Auto-healing</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/auto-healing.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutoHealer</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">detectAndHeal</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> health = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/health&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>());
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> check <span class="hljs-keyword">of</span> health.<span class="hljs-property">checks</span>) {
      <span class="hljs-keyword">if</span> (check.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;unhealthy&#x27;</span>) {
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attemptHealing</span>(check.<span class="hljs-property">service</span>);
      }
    }
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">attemptHealing</span>(<span class="hljs-params"><span class="hljs-attr">service</span>: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">switch</span> (service) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;database&#x27;</span>:
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">restartDatabaseConnection</span>();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;redis&#x27;</span>:
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearRedisCache</span>();
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;external-api&#x27;</span>:
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">switchToBackupAPI</span>();
        <span class="hljs-keyword">break</span>;
    }
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">restartDatabaseConnection</span>(<span class="hljs-params"></span>) {
    <span class="hljs-comment">// Logique de red√©marrage de connexion DB</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Restarting database connection...&#x27;</span>);
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="454" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%8A-incident-response"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Incident Response</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/incident-response.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IncidentResponse</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleIncident</span>(<span class="hljs-params"><span class="hljs-attr">incident</span>: {
    severity: <span class="hljs-string">&#x27;low&#x27;</span> | <span class="hljs-string">&#x27;medium&#x27;</span> | <span class="hljs-string">&#x27;high&#x27;</span> | <span class="hljs-string">&#x27;critical&#x27;</span>;
    description: <span class="hljs-built_in">string</span>;
    affectedServices: <span class="hljs-built_in">string</span>[];
  }</span>) {
    <span class="hljs-comment">// Cr√©er l&#x27;incident</span>
    <span class="hljs-keyword">const</span> incidentId = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createIncident</span>(incident);
    
    <span class="hljs-comment">// Notifier l&#x27;√©quipe</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyTeam</span>(incident);
    
    <span class="hljs-comment">// D√©clencher les actions automatiques</span>
    <span class="hljs-keyword">if</span> (incident.<span class="hljs-property">severity</span> === <span class="hljs-string">&#x27;critical&#x27;</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerEmergencyProcedures</span>(incidentId);
    }
    
    <span class="hljs-keyword">return</span> incidentId;
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">createIncident</span>(<span class="hljs-params"><span class="hljs-attr">incident</span>: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-property">incident</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">data</span>: {
        ...incident,
        <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;open&#x27;</span>,
        <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
      },
    });
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="455" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%8A-runbooks-automatis%C3%A9s"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Runbooks automatis√©s</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/runbooks.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutomatedRunbooks</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">executeRunbook</span>(<span class="hljs-params"><span class="hljs-attr">incidentType</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">context</span>: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">switch</span> (incidentType) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;high-latency&#x27;</span>:
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">runbookHighLatency</span>(context);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;database-down&#x27;</span>:
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">runbookDatabaseDown</span>(context);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;memory-leak&#x27;</span>:
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">runbookMemoryLeak</span>(context);
        <span class="hljs-keyword">break</span>;
    }
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">runbookHighLatency</span>(<span class="hljs-params"><span class="hljs-attr">context</span>: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-comment">// 1. V√©rifier les m√©triques</span>
    <span class="hljs-keyword">const</span> metrics = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getMetrics</span>();
    
    <span class="hljs-comment">// 2. Red√©marrer les instances surcharg√©es</span>
    <span class="hljs-keyword">if</span> (metrics.<span class="hljs-property">cpu</span> &gt; <span class="hljs-number">80</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">restartInstances</span>();
    }
    
    <span class="hljs-comment">// 3. Activer le cache</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">enableAggressiveCaching</span>();
    
    <span class="hljs-comment">// 4. Notifier l&#x27;√©quipe</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyTeam</span>(<span class="hljs-string">&#x27;High latency detected, auto-healing in progress&#x27;</span>);
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="456" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%8A-post-mortem-automatis%C3%A9"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Post-mortem automatis√©</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/post-mortem.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutomatedPostMortem</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generatePostMortem</span>(<span class="hljs-params"><span class="hljs-attr">incidentId</span>: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> incident = <span class="hljs-keyword">await</span> db.<span class="hljs-property">incident</span>.<span class="hljs-title function_">findUnique</span>({
      <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: incidentId },
    });
    
    <span class="hljs-keyword">const</span> timeline = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildTimeline</span>(incident);
    <span class="hljs-keyword">const</span> rootCause = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeRootCause</span>(incident);
    <span class="hljs-keyword">const</span> actions = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateActionItems</span>(incident);
    
    <span class="hljs-keyword">const</span> postMortem = {
      incident,
      timeline,
      rootCause,
      <span class="hljs-attr">actionItems</span>: actions,
      <span class="hljs-attr">lessonsLearned</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extractLessons</span>(incident),
    };
    
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">savePostMortem</span>(postMortem);
    <span class="hljs-keyword">return</span> postMortem;
  }
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="457" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%8A-sre-dashboard"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>SRE Dashboard</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-string">&#x27;use client&#x27;</span>;
<span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">SREDashboard</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> [sli, setSli] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [incidents, setIncidents] = <span class="hljs-title function_">useState</span>([]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-title function_">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> [sliRes, incidentsRes] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
        <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/sli&#x27;</span>),
        <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/incidents&#x27;</span>),
      ]);
      
      <span class="hljs-title function_">setSli</span>(<span class="hljs-keyword">await</span> sliRes.<span class="hljs-title function_">json</span>());
      <span class="hljs-title function_">setIncidents</span>(<span class="hljs-keyword">await</span> incidentsRes.<span class="hljs-title function_">json</span>());
    }, <span class="hljs-number">30000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>SRE Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Service Level Indicators<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Disponibilit√©: {sli?.availability}%<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Latence P95: {sli?.p95Latency}ms<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Taux d&#x27;erreur: {sli?.errorRate}%<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Incidents r√©cents<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        {incidents.map(incident =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{incident.id}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{incident.description}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Statut: {incident.status}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="458" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%E2%9C%85-checklist-sre"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Checklist SRE</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>SLI/SLO</strong> d√©finis et monitor√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Circuit breakers</strong> impl√©ment√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Auto-healing</strong> configur√©</li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4"><strong>Runbooks</strong> automatis√©s</li>
</ul>
</div>
<div class="fragment fade-in-up delay-5">
<ul>
<li data-marpit-fragment="5"><strong>Post-mortems</strong> syst√©matiques</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="3" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="459" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Site Reliability Engineering&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Site Reliability Engineering</span></header>
<h1 id="%F0%9F%93%9A-ressources"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Google SRE Book</strong> ‚Äî sre.google/sre-book</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2"><strong>Chaos Engineering</strong> ‚Äî principlesofchaos.org</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3"><strong>Circuit Breaker Pattern</strong> ‚Äî martinfowler.com/bliki/CircuitBreaker.html</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="460" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>

<h1 id="%F0%9F%8E%AF-projet-fil-rouge"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Projet fil rouge</strong></h1>
<h2 id="application-compl%C3%A8te-nextjs"><strong>Application compl√®te Next.js</strong></h2>
<div class="fragment fade-in-up delay-1">
<p><strong>Objectifs</strong> :<br />
Cr√©er une application Next.js compl√®te en appliquant tous les concepts</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üí°" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4a1.svg" data-marp-twemoji=""/> <strong>Projet fil rouge</strong> = Application r√©elle avec toutes les fonctionnalit√©s</p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-marpit-fragments="4" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="461" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-p%C3%A9dagogiques"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs p√©dagogiques</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1">Int√©grer <strong>tous les concepts</strong> appris</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<ul>
<li data-marpit-fragment="2">Cr√©er une <strong>architecture</strong> scalable</li>
</ul>
</div>
<div class="fragment fade-in-up delay-3">
<ul>
<li data-marpit-fragment="3">Impl√©menter les <strong>bonnes pratiques</strong></li>
</ul>
</div>
<div class="fragment fade-in-up delay-4">
<ul>
<li data-marpit-fragment="4">D√©ployer en <strong>production</strong></li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="462" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%8F%97%EF%B8%8F-architecture-du-projet"><img class="emoji" draggable="false" alt="üèóÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3d7.svg" data-marp-twemoji=""/> <strong>Architecture du projet</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="stack-technique">Stack technique</h3>
<ul>
<li data-marpit-fragment="1"><strong>Frontend</strong> : Next.js 14 + App Router</li>
<li data-marpit-fragment="2"><strong>Styling</strong> : Tailwind CSS + shadcn/ui</li>
<li data-marpit-fragment="3"><strong>Database</strong> : PostgreSQL + Prisma</li>
<li data-marpit-fragment="4"><strong>Auth</strong> : NextAuth.js</li>
<li data-marpit-fragment="5"><strong>Payments</strong> : Stripe</li>
<li data-marpit-fragment="6"><strong>Deployment</strong> : Vercel</li>
<li data-marpit-fragment="7"><strong>Monitoring</strong> : Sentry + Vercel Analytics</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-marpit-fragments="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="463" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%93%8B-fonctionnalit%C3%A9s-principales"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Fonctionnalit√©s principales</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="core-features">Core Features</h3>
<ul>
<li data-marpit-fragment="1"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Authentification</strong> compl√®te</li>
<li data-marpit-fragment="2"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Dashboard</strong> utilisateur</li>
<li data-marpit-fragment="3"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Paiements</strong> Stripe</li>
<li data-marpit-fragment="4"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Notifications</strong> push</li>
<li data-marpit-fragment="5"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>API</strong> s√©curis√©e</li>
<li data-marpit-fragment="6"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Tests</strong> complets</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="advanced-features">Advanced Features</h3>
<ul>
<li data-marpit-fragment="7"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Internationalisation</strong> (i18n)</li>
<li data-marpit-fragment="8"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>PWA</strong> avec offline</li>
<li data-marpit-fragment="9"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Analytics</strong> avanc√©es</li>
<li data-marpit-fragment="10"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>SEO</strong> optimis√©</li>
<li data-marpit-fragment="11"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Performance</strong> monitoring</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="464" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%97%82%EF%B8%8F-structure-du-projet"><img class="emoji" draggable="false" alt="üóÇÔ∏è" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f5c2.svg" data-marp-twemoji=""/> <strong>Structure du projet</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code>my-nextjs-app/
‚îú‚îÄ‚îÄ app/                    # App Router
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/            # Route groups
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API routes
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # Dashboard
‚îÇ   ‚îî‚îÄ‚îÄ globals.css        # Global styles
‚îú‚îÄ‚îÄ components/            # Composants r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ ui/               # shadcn/ui components
‚îÇ   ‚îî‚îÄ‚îÄ forms/            # Form components
‚îú‚îÄ‚îÄ lib/                  # Utilitaires
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts          # Configuration auth
‚îÇ   ‚îú‚îÄ‚îÄ db.ts            # Database client
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts         # Helpers
‚îú‚îÄ‚îÄ prisma/              # Database schema
‚îú‚îÄ‚îÄ public/               # Assets statiques
‚îî‚îÄ‚îÄ tests/               # Tests
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="465" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%94%90-authentification"><img class="emoji" draggable="false" alt="üîê" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f510.svg" data-marp-twemoji=""/> <strong>Authentification</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/auth/[...nextauth]/route.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">NextAuth</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-auth&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaAdapter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@auth/prisma-adapter&#x27;</span>;
<span class="hljs-keyword">import</span> { authOptions } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/auth&#x27;</span>;

<span class="hljs-keyword">const</span> handler = <span class="hljs-title class_">NextAuth</span>({
  ...authOptions,
  <span class="hljs-attr">adapter</span>: <span class="hljs-title class_">PrismaAdapter</span>(prisma),
});

<span class="hljs-keyword">export</span> { handler <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">GET</span>, handler <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">POST</span> };
</code></pre>
</div>
<div class="fragment fade-in-up delay-2">
<pre><code class="language-ts"><span class="hljs-comment">// lib/auth.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">authOptions</span>: <span class="hljs-title class_">NextAuthOptions</span> = {
  <span class="hljs-attr">providers</span>: [
    <span class="hljs-title class_">GoogleProvider</span>({
      <span class="hljs-attr">clientId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GOOGLE_CLIENT_ID</span>!,
      <span class="hljs-attr">clientSecret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GOOGLE_CLIENT_SECRET</span>!,
    }),
    <span class="hljs-title class_">CredentialsProvider</span>({
      <span class="hljs-attr">credentials</span>: {
        <span class="hljs-attr">email</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Email&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;email&#x27;</span> },
        <span class="hljs-attr">password</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">&#x27;Password&#x27;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;password&#x27;</span> },
      },
      <span class="hljs-keyword">async</span> <span class="hljs-title function_">authorize</span>(<span class="hljs-params">credentials</span>) {
        <span class="hljs-comment">// Logique d&#x27;authentification</span>
      },
    }),
  ],
  <span class="hljs-attr">callbacks</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">session</span>(<span class="hljs-params">{ session, token }</span>) {
      <span class="hljs-comment">// Personnaliser la session</span>
      <span class="hljs-keyword">return</span> session;
    },
  },
};
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="466" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%92%B3-int%C3%A9gration-stripe"><img class="emoji" draggable="false" alt="üí≥" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4b3.svg" data-marp-twemoji=""/> <strong>Int√©gration Stripe</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// app/api/create-checkout-session/route.ts</span>
<span class="hljs-keyword">import</span> { stripe } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/lib/stripe&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params"><span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span></span>) {
  <span class="hljs-keyword">const</span> { priceId, userId } = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>();

  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">checkout</span>.<span class="hljs-property">sessions</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;subscription&#x27;</span>,
    <span class="hljs-attr">customer</span>: userId,
    <span class="hljs-attr">line_items</span>: [{ <span class="hljs-attr">price</span>: priceId, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span> }],
    <span class="hljs-attr">success_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/dashboard?success=true`</span>,
    <span class="hljs-attr">cancel_url</span>: <span class="hljs-string">`<span class="hljs-subst">${request.headers.get(<span class="hljs-string">&#x27;origin&#x27;</span>)}</span>/pricing`</span>,
  });

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">sessionId</span>: session.<span class="hljs-property">id</span> });
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="467" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%93%8A-dashboard-utilisateur"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Dashboard utilisateur</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/dashboard/page.tsx</span>
<span class="hljs-keyword">import</span> { getServerSession } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-auth&#x27;</span>;
<span class="hljs-keyword">import</span> { redirect } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next/navigation&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DashboardStats</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/dashboard-stats&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RecentActivity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/components/recent-activity&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DashboardPage</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getServerSession</span>();
  
  <span class="hljs-keyword">if</span> (!session) {
    <span class="hljs-title function_">redirect</span>(<span class="hljs-string">&#x27;/auth/signin&#x27;</span>);
  }

  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container mx-auto py-8&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-3xl font-bold mb-8&quot;</span>&gt;</span>
        Bienvenue, {session.user?.name}
      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;grid grid-cols-1 md:grid-cols-3 gap-6 mb-8&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DashboardStats</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;grid grid-cols-1 lg:grid-cols-2 gap-6&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RecentActivity</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">QuickActions</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="468" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%A7%AA-tests-complets"><img class="emoji" draggable="false" alt="üß™" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f9ea.svg" data-marp-twemoji=""/> <strong>Tests complets</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// tests/api/auth.test.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">POST</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/app/api/auth/signin/route&#x27;</span>;
<span class="hljs-keyword">import</span> { createMocks } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node-mocks-http&#x27;</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;/api/auth/signin&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should authenticate valid user&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> { req, res } = <span class="hljs-title function_">createMocks</span>({
      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
      <span class="hljs-attr">body</span>: {
        <span class="hljs-attr">email</span>: <span class="hljs-string">&#x27;test@example.com&#x27;</span>,
        <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;password123&#x27;</span>,
      },
    });

    <span class="hljs-keyword">await</span> <span class="hljs-title function_">POST</span>(req);
    
    <span class="hljs-title function_">expect</span>(res.<span class="hljs-title function_">_getStatusCode</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">200</span>);
    <span class="hljs-title function_">expect</span>(res.<span class="hljs-title function_">_getJSONData</span>()).<span class="hljs-title function_">toHaveProperty</span>(<span class="hljs-string">&#x27;user&#x27;</span>);
  });
});
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="469" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%8C%8D-internationalisation"><img class="emoji" draggable="false" alt="üåç" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f30d.svg" data-marp-twemoji=""/> <strong>Internationalisation</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-ts"><span class="hljs-comment">// lib/i18n.ts</span>
<span class="hljs-keyword">import</span> { createLocalizedPathnamesNavigation } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;next-intl/navigation&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> locales = [<span class="hljs-string">&#x27;en&#x27;</span>, <span class="hljs-string">&#x27;fr&#x27;</span>, <span class="hljs-string">&#x27;es&#x27;</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> defaultLocale = <span class="hljs-string">&#x27;fr&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { <span class="hljs-title class_">Link</span>, redirect, usePathname, useRouter } =
  <span class="hljs-title function_">createLocalizedPathnamesNavigation</span>({
    locales,
    defaultLocale,
    <span class="hljs-attr">pathnames</span>: {
      <span class="hljs-string">&#x27;/&#x27;</span>: <span class="hljs-string">&#x27;/&#x27;</span>,
      <span class="hljs-string">&#x27;/dashboard&#x27;</span>: <span class="hljs-string">&#x27;/dashboard&#x27;</span>,
      <span class="hljs-string">&#x27;/pricing&#x27;</span>: <span class="hljs-string">&#x27;/pricing&#x27;</span>,
    },
  });
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="470" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%93%B1-pwa-configuration"><img class="emoji" draggable="false" alt="üì±" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4f1.svg" data-marp-twemoji=""/> <strong>PWA Configuration</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-json"><span class="hljs-comment">// public/manifest.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Mon App Next.js&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;short_name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MonApp&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Application Next.js compl√®te&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;start_url&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;display&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;standalone&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;background_color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#ffffff&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;theme_color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#000000&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;icons&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;src&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/icon-192.png&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;sizes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192x192&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;image/png&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;src&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/icon-512.png&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;sizes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;512x512&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;image/png&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="471" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%93%8A-analytics--monitoring"><img class="emoji" draggable="false" alt="üìä" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4ca.svg" data-marp-twemoji=""/> <strong>Analytics &amp; Monitoring</strong></h1>
<div class="fragment fade-in-up delay-1">
<pre><code class="language-tsx"><span class="hljs-comment">// app/layout.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Analytics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vercel/analytics/react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SpeedInsights</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vercel/speed-insights/next&#x27;</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Sentry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@sentry/nextjs&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
  children,
}: {
  children: React.ReactNode;
}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;fr&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">Analytics</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">SpeedInsights</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="472" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%9A%80-d%C3%A9ploiement"><img class="emoji" draggable="false" alt="üöÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg" data-marp-twemoji=""/> <strong>D√©ploiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="configuration-vercel">Configuration Vercel</h3>
<pre><code class="language-json"><span class="hljs-comment">// vercel.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;framework&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;nextjs&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;buildCommand&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm run build&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;devCommand&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm run dev&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;installCommand&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;npm ci&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;functions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;app/api/**/*.ts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;maxDuration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;env&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;DATABASE_URL&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@database-url&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;NEXTAUTH_SECRET&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@nextauth-secret&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;STRIPE_SECRET_KEY&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@stripe-secret-key&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-marpit-fragments="10" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="473" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%93%8B-checklist-de-d%C3%A9ploiement"><img class="emoji" draggable="false" alt="üìã" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4cb.svg" data-marp-twemoji=""/> <strong>Checklist de d√©ploiement</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="pr%C3%A9-d%C3%A9ploiement">Pr√©-d√©ploiement</h3>
<ul>
<li data-marpit-fragment="1"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Tests</strong> passent (unit, integration, e2e)</li>
<li data-marpit-fragment="2"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Linting</strong> et <strong>formatting</strong> OK</li>
<li data-marpit-fragment="3"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Type checking</strong> sans erreurs</li>
<li data-marpit-fragment="4"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Build</strong> r√©ussi</li>
<li data-marpit-fragment="5"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Variables</strong> d'environnement configur√©es</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="post-d%C3%A9ploiement">Post-d√©ploiement</h3>
<ul>
<li data-marpit-fragment="6"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Health checks</strong> fonctionnels</li>
<li data-marpit-fragment="7"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Monitoring</strong> configur√©</li>
<li data-marpit-fragment="8"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Analytics</strong> actives</li>
<li data-marpit-fragment="9"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Error tracking</strong> op√©rationnel</li>
<li data-marpit-fragment="10"><img class="emoji" draggable="false" alt="‚úÖ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2705.svg" data-marp-twemoji=""/> <strong>Performance</strong> acceptable</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-marpit-fragments="8" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="474" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%8E%AF-objectifs-dapprentissage"><img class="emoji" draggable="false" alt="üéØ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f3af.svg" data-marp-twemoji=""/> <strong>Objectifs d'apprentissage</strong></h1>
<div class="fragment fade-in-up delay-1">
<h3 id="techniques">Techniques</h3>
<ul>
<li data-marpit-fragment="1"><strong>Architecture</strong> scalable et maintenable</li>
<li data-marpit-fragment="2"><strong>Patterns</strong> avanc√©s Next.js</li>
<li data-marpit-fragment="3"><strong>Performance</strong> optimis√©e</li>
<li data-marpit-fragment="4"><strong>S√©curit√©</strong> renforc√©e</li>
</ul>
</div>
<div class="fragment fade-in-up delay-2">
<h3 id="m%C3%A9tier">M√©tier</h3>
<ul>
<li data-marpit-fragment="5"><strong>Gestion</strong> de projet complexe</li>
<li data-marpit-fragment="6"><strong>D√©ploiement</strong> en production</li>
<li data-marpit-fragment="7"><strong>Monitoring</strong> et maintenance</li>
<li data-marpit-fragment="8"><strong>√âvolutivit√©</strong> de l'application</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-marpit-fragments="5" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="475" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%93%9A-ressources-du-projet"><img class="emoji" draggable="false" alt="üìö" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f4da.svg" data-marp-twemoji=""/> <strong>Ressources du projet</strong></h1>
<div class="fragment fade-in-up delay-1">
<ul>
<li data-marpit-fragment="1"><strong>Repository</strong> GitHub avec documentation</li>
<li data-marpit-fragment="2"><strong>Demo</strong> en ligne d√©ploy√©e</li>
<li data-marpit-fragment="3"><strong>Architecture</strong> document√©e</li>
<li data-marpit-fragment="4"><strong>Tests</strong> avec couverture</li>
<li data-marpit-fragment="5"><strong>CI/CD</strong> configur√©</li>
</ul>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-paginate="true" data-header="![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;" data-footer="D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev" data-theme="sergentdev" lang="en-US" data-marpit-pagination="476" style="--paginate:true;--header:![logo](https://sergent.dev/logo_dev_comp.webp)&lt;span class=&quot;part-title&quot;&gt;Projet fil rouge&lt;/span&gt;;--footer:D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev;--theme:sergentdev;" data-marpit-pagination-total="476">
<header><img src="https://sergent.dev/logo_dev_comp.webp" alt="logo" /><span class="part-title">Projet fil rouge</span></header>
<h1 id="%F0%9F%8E%89-f%C3%A9licitations"><img class="emoji" draggable="false" alt="üéâ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f389.svg" data-marp-twemoji=""/> <strong>F√©licitations !</strong></h1>
<div class="fragment fade-in-up delay-1">
<p>Vous avez maintenant toutes les comp√©tences pour cr√©er des applications Next.js professionnelles et les d√©ployer en production !</p>
</div>
<div class="fragment fade-in-scale delay-2">
<blockquote>
<p><img class="emoji" draggable="false" alt="üöÄ" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/1f680.svg" data-marp-twemoji=""/> <strong>Pr√™t pour la production !</strong></p>
</blockquote>
</div>
<footer>D√©veloppement Front-End Avanc√© - TypeScript &amp; Next.js - Formation SergentDev</footer>
</section></foreignObject></svg></div><script>/*!! License: https://unpkg.com/@marp-team/marp-cli@4.2.3/lib/bespoke.js.LICENSE.txt */
!function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,n,r=(n||(n=1,t={from:function(e,t){var n,r=1===(e.parent||e).nodeType?e.parent||e:document.querySelector(e.parent||e),o=[].filter.call("string"==typeof e.slides?r.querySelectorAll(e.slides):e.slides||r.children,function(e){return"SCRIPT"!==e.nodeName}),a={},i=function(e,t){return(t=t||{}).index=o.indexOf(e),t.slide=e,t},s=function(e,t){a[e]=(a[e]||[]).filter(function(e){return e!==t})},c=function(e,t){return(a[e]||[]).reduce(function(e,n){return e&&!1!==n(t)},!0)},l=function(e,t){o[e]&&(n&&c("deactivate",i(n,t)),n=o[e],c("activate",i(n,t)))},d=function(e,t){var r=o.indexOf(n)+e;c(e>0?"next":"prev",i(n,t))&&l(r,t)},u={off:s,on:function(e,t){return(a[e]||(a[e]=[])).push(t),s.bind(null,e,t)},fire:c,slide:function(e,t){if(!arguments.length)return o.indexOf(n);c("slide",i(o[e],t))&&l(e,t)},next:d.bind(null,1),prev:d.bind(null,-1),parent:r,slides:o,destroy:function(e){c("destroy",i(n,e)),a={}}};return(t||[]).forEach(function(e){e(u)}),n||l(0),u}}),t),o=e(r);const a=document.body,i=(...e)=>history.replaceState(...e),s="",c="presenter",l="next",d=["",c,l],u="bespoke-marp-",f=`data-${u}`,m=(e,{protocol:t,host:n,pathname:r,hash:o}=location)=>{const a=e.toString();return`${t}//${n}${r}${a?"?":""}${a}${o}`},g=()=>a.dataset.bespokeView,p=e=>new URLSearchParams(location.search).get(e),v=(e,t={})=>{const n={location,setter:i,...t},r=new URLSearchParams(n.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?r.set(t,n):r.delete(t)}try{n.setter({...window.history.state??{}},"",m(r,n.location))}catch(e){console.error(e)}},h=(()=>{const e="bespoke-marp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}})(),y=e=>{try{return localStorage.getItem(e)}catch{return null}},b=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},w=e=>{try{return localStorage.removeItem(e),!0}catch{return!1}},x=(e,t)=>{const n="aria-hidden";t?e.setAttribute(n,"true"):e.removeAttribute(n)},k=e=>{e.parent.classList.add(`${u}parent`),e.slides.forEach(e=>e.classList.add(`${u}slide`)),e.on("activate",t=>{const n=`${u}active`,r=t.slide,o=r.classList,a=!o.contains(n);if(e.slides.forEach(e=>{e.classList.remove(n),x(e,!0)}),o.add(n),x(r,!1),a){const e=`${n}-ready`;o.add(e),document.body.clientHeight,o.remove(e)}})},$=e=>{let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map(e=>[null,...e.querySelectorAll("[data-marpit-fragment]")])});const r=r=>void 0!==e.fragments[t][n+r],o=(r,o)=>{t=r,n=o,e.fragments.forEach((e,t)=>{e.forEach((e,n)=>{if(null==e)return;const a=t<r||t===r&&n<=o;e.setAttribute(`${f}fragment`,(a?"":"in")+"active");const i=`${f}current-fragment`;t===r&&n===o?e.setAttribute(i,"current"):e.removeAttribute(i)})}),e.fragmentIndex=o;const a={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:o};e.fire("fragment",a)};e.on("next",({fragment:a=!0})=>{if(a){if(r(1))return o(t,n+1),!1;const a=t+1;e.fragments[a]&&o(a,0)}else{const r=e.fragments[t].length;if(n+1<r)return o(t,r-1),!1;const a=e.fragments[t+1];a&&o(t+1,a.length-1)}}),e.on("prev",({fragment:a=!0})=>{if(r(-1)&&a)return o(t,n-1),!1;const i=t-1;e.fragments[i]&&o(i,e.fragments[i].length-1)}),e.on("slide",({index:t,fragment:n})=>{let r=0;if(void 0!==n){const o=e.fragments[t];if(o){const{length:e}=o;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}o(t,r)}),o(0,0)},E=document,L=()=>!(!E.fullscreenEnabled&&!E.webkitFullscreenEnabled),S=()=>!(!E.fullscreenElement&&!E.webkitFullscreenElement),P=e=>{e.fullscreen=()=>{L()&&(async()=>{S()?(E.exitFullscreen||E.webkitExitFullscreen)?.call(E):((e=E.body)=>{(e.requestFullscreen||e.webkitRequestFullscreen)?.call(e)})()})()},document.addEventListener("keydown",t=>{"f"!==t.key&&"F11"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!L()||(e.fullscreen(),t.preventDefault())})},_=`${u}inactive`,T=(e=2e3)=>({parent:t,fire:n})=>{const r=t.classList,o=e=>n(`marp-${e?"":"in"}active`);let a;const i=()=>{a&&clearTimeout(a),a=setTimeout(()=>{r.add(_),o()},e),r.contains(_)&&(r.remove(_),o(!0))};for(const e of["mousedown","mousemove","touchend"])document.addEventListener(e,i);setTimeout(i,0)},I=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"],M=e=>{e.parent.addEventListener("keydown",e=>{if(!e.target)return;const t=e.target;(I.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()})},O=e=>{window.addEventListener("load",()=>{for(const t of e.slides){const e=t.querySelector("marp-auto-scaling, [data-auto-scaling], [data-marp-fitting]");t.setAttribute(`${f}load`,e?"":"hideable")}})},A=({interval:e=250}={})=>t=>{document.addEventListener("keydown",e=>{if(" "===e.key&&e.shiftKey)t.prev();else if("ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key)t.prev({fragment:!e.shiftKey});else if(" "!==e.key||e.shiftKey)if("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)t.next({fragment:!e.shiftKey});else if("End"===e.key)t.slide(t.slides.length-1,{fragment:-1});else{if("Home"!==e.key)return;t.slide(0)}else t.next();e.preventDefault()});let n,r,o=0;t.parent.addEventListener("wheel",a=>{let i=!1;const s=(e,t)=>{e&&(i=i||((e,t)=>((e,t)=>{const n="X"===t?"Width":"Height";return e[`client${n}`]<e[`scroll${n}`]})(e,t)&&((e,t)=>{const{overflow:n}=e,r=e[`overflow${t}`];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r})(getComputedStyle(e),t))(e,t)),e?.parentElement&&s(e.parentElement,t)};if(0!==a.deltaX&&s(a.target,"X"),0!==a.deltaY&&s(a.target,"Y"),i)return;a.preventDefault();const c=Math.sqrt(a.deltaX**2+a.deltaY**2);if(void 0!==a.wheelDelta){if(void 0===a.webkitForce&&Math.abs(a.wheelDelta)<40)return;if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<4)return}else if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<12)return;r&&clearTimeout(r),r=setTimeout(()=>{n=0},e);const l=Date.now()-o<e,d=c<=n;if(n=c,l||d)return;let u;(a.deltaX>0||a.deltaY>0)&&(u="next"),(a.deltaX<0||a.deltaY<0)&&(u="prev"),u&&(t[u](),o=Date.now())})},C=(e=`.${u}osc`)=>{const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[${f}osc=${JSON.stringify(e)}]`).forEach(n)};return L()||n("fullscreen",e=>e.style.display="none"),h||n("presenter",e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."}),e=>{t.addEventListener("click",t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;n&&t.target.blur();const r={fragment:!t.shiftKey};"next"===n?e.next(r):"prev"===n?e.prev(r):"fullscreen"===n?e?.fullscreen():"presenter"===n&&e.openPresenterView()}}),e.parent.appendChild(t),e.on("activate",({index:t})=>{n("page",n=>n.textContent=`Page ${t+1} of ${e.slides.length}`)}),e.on("fragment",({index:t,fragments:r,fragmentIndex:o})=>{n("prev",e=>e.disabled=0===t&&0===o),n("next",n=>n.disabled=t===e.slides.length-1&&o===r.length-1)}),e.on("marp-active",()=>x(t,!1)),e.on("marp-inactive",()=>x(t,!0)),L()&&(e=>{for(const t of["","webkit"])E.addEventListener(t+"fullscreenchange",e)})(()=>n("fullscreen",e=>e.classList.toggle("exit",L()&&S())))}},D=e=>{window.addEventListener("message",t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let o=Number.parseInt(t,10),a=Number.parseInt(n,10)+1;a>=e.fragments[o].length&&(o+=1,a=0),e.slide(o,{fragment:a})}})};var N,B,q,K,F,j,V,U={exports:{}},X=(N||(N=1,U.exports=(B=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],q=function(e){return String(e).replace(/[&<>"']/g,function(e){return"&"+K[e]+";"})},K={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},F="dangerouslySetInnerHTML",j={className:"class",htmlFor:"for"},V={},function(e,t){var n=[],r="";t=t||{};for(var o=arguments.length;o-- >2;)n.push(arguments[o]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(var a in t)!1!==t[a]&&null!=t[a]&&a!==F&&(r+=" "+(j[a]?j[a]:q(a))+'="'+q(t[a])+'"');r+=">"}if(-1===B.indexOf(e)){if(t[F])r+=t[F].__html;else for(;n.length;){var i=n.pop();if(i)if(i.pop)for(var s=i.length;s--;)n.push(i[s]);else r+=!0===V[i]?i:q(i)}r+=e?"</"+e+">":""}return V[r]=!0,r})),U.exports),H=e(X);const R=({children:e})=>H(null,null,...e),W=`${u}presenter-`,J={container:`${W}container`,dragbar:`${W}dragbar-container`,next:`${W}next`,nextContainer:`${W}next-container`,noteContainer:`${W}note-container`,noteWrapper:`${W}note-wrapper`,noteButtons:`${W}note-buttons`,infoContainer:`${W}info-container`,infoPage:`${W}info-page`,infoPageText:`${W}info-page-text`,infoPagePrev:`${W}info-page-prev`,infoPageNext:`${W}info-page-next`,noteButtonsBigger:`${W}note-bigger`,noteButtonsSmaller:`${W}note-smaller`,infoTime:`${W}info-time`,infoTimer:`${W}info-timer`},Y=e=>{const{title:t}=document;document.title="[Presenter view]"+(t?` - ${t}`:"");const n={},r=e=>(n[e]=n[e]||document.querySelector(`.${e}`),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=J.container,t.appendChild(e),t.insertAdjacentHTML("beforeend",H(R,null,H("div",{class:J.nextContainer},H("iframe",{class:J.next,src:"?view=next"})),H("div",{class:J.dragbar}),H("div",{class:J.noteContainer},H("div",{class:J.noteWrapper}),H("div",{class:J.noteButtons},H("button",{class:J.noteButtonsSmaller,tabindex:"-1",title:"Smaller notes font size"},"Smaller notes font size"),H("button",{class:J.noteButtonsBigger,tabindex:"-1",title:"Bigger notes font size"},"Bigger notes font size"))),H("div",{class:J.infoContainer},H("div",{class:J.infoPage},H("button",{class:J.infoPagePrev,tabindex:"-1",title:"Previous"},"Previous"),H("span",{class:J.infoPageText}),H("button",{class:J.infoPageNext,tabindex:"-1",title:"Next"},"Next")),H("time",{class:J.infoTime,title:"Current time"}),H("time",{class:J.infoTimer,title:"Timer"})))),t})(e.parent)),(e=>{let t=!1;r(J.dragbar).addEventListener("mousedown",()=>{t=!0,r(J.dragbar).classList.add("active")}),window.addEventListener("mouseup",()=>{t=!1,r(J.dragbar).classList.remove("active")}),window.addEventListener("mousemove",e=>{if(!t)return;const n=e.clientX/document.documentElement.clientWidth*100;r(J.container).style.setProperty("--bespoke-marp-presenter-split-ratio",`${Math.max(0,Math.min(100,n))}%`)}),r(J.nextContainer).addEventListener("click",()=>e.next());const n=r(J.next),o=(a=n,(e,t)=>a.contentWindow?.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin));var a;n.addEventListener("load",()=>{r(J.nextContainer).classList.add("active"),o(e.slide(),e.fragmentIndex),e.on("fragment",({index:e,fragmentIndex:t})=>o(e,t))});const i=document.querySelectorAll(".bespoke-marp-note");i.forEach(e=>{e.addEventListener("keydown",e=>e.stopPropagation()),r(J.noteWrapper).appendChild(e)}),e.on("activate",()=>i.forEach(t=>t.classList.toggle("active",t.dataset.index==e.slide())));let s=0;const c=e=>{s=Math.max(-5,s+e),r(J.noteContainer).style.setProperty("--bespoke-marp-note-font-scale",(1.2**s).toFixed(4))},l=()=>c(1),d=()=>c(-1),u=r(J.noteButtonsBigger),f=r(J.noteButtonsSmaller);u.addEventListener("click",()=>{u.blur(),l()}),f.addEventListener("click",()=>{f.blur(),d()}),document.addEventListener("keydown",e=>{"+"===e.key&&l(),"-"===e.key&&d()},!0),e.on("activate",({index:t})=>{r(J.infoPageText).textContent=`${t+1} / ${e.slides.length}`});const m=r(J.infoPagePrev),g=r(J.infoPageNext);m.addEventListener("click",t=>{m.blur(),e.prev({fragment:!t.shiftKey})}),g.addEventListener("click",t=>{g.blur(),e.next({fragment:!t.shiftKey})}),e.on("fragment",({index:t,fragments:n,fragmentIndex:r})=>{m.disabled=0===t&&0===r,g.disabled=t===e.slides.length-1&&r===n.length-1});let p=new Date;const v=()=>{const e=new Date,t=e=>`${Math.floor(e)}`.padStart(2,"0"),n=e.getTime()-p.getTime(),o=t(n/1e3%60),a=t(n/1e3/60%60),i=t(n/36e5%24);r(J.infoTime).textContent=e.toLocaleTimeString(),r(J.infoTimer).textContent=`${i}:${a}:${o}`};v(),setInterval(v,250),r(J.infoTimer).addEventListener("click",()=>{p=new Date})})(e)},z=e=>{if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:G},presenterUrl:{enumerable:!0,get:Q}}),h&&document.addEventListener("keydown",t=>{"p"!==t.key||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())})};function G(){const{max:e,floor:t}=Math,n=e(t(.85*window.innerWidth),640),r=e(t(.85*window.innerHeight),360);return window.open(this.presenterUrl,W+this.syncKey,`width=${n},height=${r},menubar=no,toolbar=no`)}function Q(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),m(e)}const Z=e=>{const t=g();return t===l&&e.appendChild(document.createElement("span")),{[s]:z,[c]:Y,[l]:D}[t]},ee=e=>{e.on("activate",t=>{document.querySelectorAll(".bespoke-progress-parent > .bespoke-progress-bar").forEach(n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"})})},te=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},ne=(e={})=>{const t={history:!0,...e};return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},o=(t={fragment:!0})=>{let n=t.fragment?te(p("f")||""):null;((t,n)=>{const{min:r,max:o}=Math,{fragments:a,slides:i}=e,s=o(0,r(t,i.length-1)),c=o(0,r(n||0,a[s].length-1));s===e.slide()&&c===e.fragmentIndex||e.slide(s,{fragment:c})})((()=>{if(location.hash){const[t]=location.hash.slice(1).split(":~:");if(/^\d+$/.test(t))return(te(t)??1)-1;const r=document.getElementById(t)||document.querySelector(`a[name="${CSS.escape(t)}"]`);if(r){const{length:t}=e.slides;for(let o=0;o<t;o+=1)if(e.slides[o].contains(r)){const t=e.fragments?.[o],a=r.closest("[data-marpit-fragment]");if(t&&a){const e=t.indexOf(a);e>=0&&(n=e)}return o}}}return 0})(),n)};e.on("fragment",({index:e,fragmentIndex:r})=>{n||v({f:0===r||r.toString()},{location:{...location,hash:`#${e+1}`},setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})}),setTimeout(()=>{o(),window.addEventListener("hashchange",()=>r(()=>{o({fragment:!1}),v({f:void 0})})),window.addEventListener("popstate",()=>{n||r(()=>o())}),n=!1},0)}},re=(e={})=>{const t=e.key||window.history.state?.marpBespokeSyncKey||Math.random().toString(36).slice(2),n=`bespoke-marp-sync-${t}`;var r;r={marpBespokeSyncKey:t},v({},{setter:(e,...t)=>i({...e,...r},...t)});const o=()=>{const e=y(n);return e?JSON.parse(e):Object.create(null)},a=e=>{const t=o(),r={...t,...e(t)};return b(n,JSON.stringify(r)),r},s=()=>{window.removeEventListener("pageshow",s),a(e=>({reference:(e.reference||0)+1}))};return e=>{s(),Object.defineProperty(e,"syncKey",{value:t,enumerable:!0});let r=!0;setTimeout(()=>{e.on("fragment",e=>{r&&a(()=>({index:e.index,fragmentIndex:e.fragmentIndex}))})},0),window.addEventListener("storage",t=>{if(t.key===n&&t.oldValue&&t.newValue){const n=JSON.parse(t.oldValue),o=JSON.parse(t.newValue);if(n.index!==o.index||n.fragmentIndex!==o.fragmentIndex)try{r=!1,e.slide(o.index,{fragment:o.fragmentIndex,forSync:!0})}finally{r=!0}}});const i=()=>{const{reference:e}=o();void 0===e||e<=1?w(n):a(()=>({reference:e-1}))};window.addEventListener("pagehide",e=>{e.persisted&&window.addEventListener("pageshow",s),i()}),e.on("destroy",i)}},{PI:oe,abs:ae,sqrt:ie,atan2:se}=Math,ce={passive:!0},le=({slope:e=-.7,swipeThreshold:t=30}={})=>n=>{let r;const o=n.parent,a=e=>{const t=o.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};o.addEventListener("touchstart",({touches:e})=>{r=1===e.length?a(e[0]):void 0},ce),o.addEventListener("touchmove",e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=a(e.touches[0]),n=t.x-r.x,o=t.y-r.y;r.delta=ie(ae(n)**2+ae(o)**2),r.radian=se(n,o)}else r=void 0}),o.addEventListener("touchend",o=>{if(r){if(r.delta&&r.delta>=t&&r.radian){const t=(r.radian-e+oe)%(2*oe)-oe;n[t<0?"next":"prev"](),o.stopPropagation()}r=void 0}},ce)},de=new Map;de.clear(),de.set("none",{backward:{both:void 0,incoming:void 0,outgoing:void 0},forward:{both:void 0,incoming:void 0,outgoing:void 0}});const ue={both:"",outgoing:"outgoing-",incoming:"incoming-"},fe={forward:"",backward:"-backward"},me=e=>`--marp-bespoke-transition-animation-${e}`,ge=e=>`--marp-transition-${e}`,pe=me("name"),ve=me("duration"),he=e=>new Promise(t=>{const n={},r=document.createElement("div"),o=e=>{r.remove(),t(e)};r.addEventListener("animationstart",()=>o(n)),Object.assign(r.style,{animationName:e,animationDuration:"1s",animationFillMode:"both",animationPlayState:"paused",position:"absolute",pointerEvents:"none"}),document.body.appendChild(r);const a=getComputedStyle(r).getPropertyValue(ge("duration"));a&&Number.parseFloat(a)>=0&&(n.defaultDuration=a),((e,t)=>{requestAnimationFrame(()=>{e.style.animationPlayState="running",requestAnimationFrame(()=>t(void 0))})})(r,o)}),ye=async e=>de.has(e)?de.get(e):(e=>{const t={},n=[];for(const[r,o]of Object.entries(ue))for(const[a,i]of Object.entries(fe)){const s=`marp-${o}transition${i}-${e}`;n.push(he(s).then(e=>{t[a]=t[a]||{},t[a][r]=e?{...e,name:s}:void 0}))}return Promise.all(n).then(()=>t)})(e).then(t=>(de.set(e,t),t)),be=e=>Object.values(e).flatMap(Object.values).every(e=>!e),we=(e,{type:t,backward:n})=>{const r=e[n?"backward":"forward"],o=(()=>{const e=r[t],n=e=>({[pe]:e.name});if(e)return n(e);if(r.both){const e=n(r.both);return"incoming"===t&&(e[me("direction")]="reverse"),e}})();return!o&&n?we(e,{type:t,backward:!1}):o||{[pe]:"__bespoke_marp_transition_no_animation__"}},xe=e=>{if(e)try{const t=JSON.parse(e);if((e=>{if("object"!=typeof e)return!1;const t=e;return"string"==typeof t.name&&(void 0===t.duration||"string"==typeof t.duration)})(t))return t}catch{}},ke="_tSId",$e="_tA",Ee="bespoke-marp-transition-warming-up",Le=window.matchMedia("(prefers-reduced-motion: reduce)"),Se="__bespoke_marp_transition_reduced_outgoing__",Pe="__bespoke_marp_transition_reduced_incoming__",_e={forward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}},backward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}}},Te=e=>{if(!document.startViewTransition)return;const t=t=>(void 0!==t&&(e._tD=t),e._tD);let n;t(!1),((...e)=>{CSS.registerProperty({name:ge("duration"),syntax:"<time>",inherits:!0,initialValue:"-1s"});const t=[...new Set(e).values()];return Promise.all(t.map(e=>ye(e))).then()})(...Array.from(document.querySelectorAll("section[data-transition], section[data-transition-back]")).flatMap(e=>[e.dataset.transition,e.dataset.transitionBack].flatMap(e=>{const t=xe(e);return[t?.name,t?.builtinFallback?`__builtin__${t.name}`:void 0]}).filter(e=>!!e))).then(()=>{document.querySelectorAll("style").forEach(e=>{e.innerHTML=e.innerHTML.replace(/--marp-transition-duration:[^;}]*[;}]/g,e=>e.slice(0,-1)+"!important"+e.slice(-1))})});const r=(n,{back:r,cond:o})=>a=>{const i=t();if(i)return!!a[$e]||!("object"!=typeof i||(i.skipTransition(),!a.forSync));if(!o(a))return!0;const s=e.slides[e.slide()],c=()=>a.back??r,l="data-transition"+(c()?"-back":""),d=s.querySelector(`section[${l}]`);if(!d)return!0;const u=xe(d.getAttribute(l)??void 0);return!u||((async(e,{builtinFallback:t=!0}={})=>{let n=await ye(e);if(be(n)){if(!t)return;return n=await ye(`__builtin__${e}`),be(n)?void 0:n}return n})(u.name,{builtinFallback:u.builtinFallback}).then(e=>{if(!e){t(!0);try{n(a)}finally{t(!1)}return}let r=e;Le.matches&&(console.warn("Use a constant animation to transition because preferring reduced motion by viewer has detected."),r=_e);const o=document.getElementById(ke);o&&o.remove();const i=document.createElement("style");i.id=ke,document.head.appendChild(i),((e,t)=>{const n=[`:root{${ge("direction")}:${t.backward?-1:1};}`,":root:has(.bespoke-marp-inactive){cursor:none;}"],r=t=>{const n=e[t].both?.defaultDuration||e[t].outgoing?.defaultDuration||e[t].incoming?.defaultDuration;return"forward"===t?n:n||r("forward")},o=t.duration||r(t.backward?"backward":"forward");void 0!==o&&n.push(`::view-transition-group(*){${ve}:${o};}`);const a=e=>Object.entries(e).map(([e,t])=>`${e}:${t};`).join("");return n.push(`::view-transition-old(root){${a(we(e,{...t,type:"outgoing"}))}}`,`::view-transition-new(root){${a(we(e,{...t,type:"incoming"}))}}`),n})(r,{backward:c(),duration:u.duration}).forEach(e=>i.sheet?.insertRule(e));const s=document.documentElement.classList;s.add(Ee);let l=!1;const d=()=>{l||(n(a),l=!0,s.remove(Ee))},f=()=>{t(!1),i.remove(),s.remove(Ee)};try{t(!0);const e=document.startViewTransition(d);t(e),e.finished.finally(f)}catch(e){console.error(e),d(),f()}}),!1)};e.on("prev",r(t=>e.prev({...t,[$e]:!0}),{back:!0,cond:e=>e.index>0&&!((e.fragment??1)&&n.fragmentIndex>0)})),e.on("next",r(t=>e.next({...t,[$e]:!0}),{cond:t=>t.index+1<e.slides.length&&!(n.fragmentIndex+1<n.fragments.length)})),setTimeout(()=>{e.on("slide",r(t=>e.slide(t.index,{...t,[$e]:!0}),{cond:t=>{const n=e.slide();return t.index!==n&&(t.back=t.index<n,!0)}}))},0),e.on("fragment",e=>{n=e})};let Ie;const Me=()=>(void 0===Ie&&(Ie="wakeLock"in navigator&&navigator.wakeLock),Ie),Oe=async()=>{const e=Me();if(e)try{return await e.request("screen")}catch(e){console.warn(e)}return null},Ae=async()=>{if(!Me())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&Oe()};for(const e of["visibilitychange","fullscreenchange"])document.addEventListener(e,t);return e=await Oe(),e};((e=document.getElementById(":$p"))=>{(()=>{const e=p("view");a.dataset.bespokeView=e===l||e===c?e:""})();const t=(e=>{const t=p(e);return v({[e]:void 0}),t})("sync")||void 0;o.from(e,((...e)=>{const t=d.findIndex(e=>g()===e);return e.map(([e,n])=>e[t]&&n).filter(e=>e)})([[1,1,0],re({key:t})],[[1,1,1],Z(e)],[[1,1,0],M],[[1,1,1],k],[[1,0,0],T()],[[1,1,1],O],[[1,1,1],ne({history:!1})],[[1,1,0],A()],[[1,1,0],P],[[1,0,0],ee],[[1,1,0],le()],[[1,0,0],C()],[[1,0,0],Te],[[1,1,1],$],[[1,1,0],Ae]))})()}();</script></body></html>